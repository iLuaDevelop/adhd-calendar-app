const MT=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}};MT();var L={exports:{}},Te={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var ty=Object.getOwnPropertySymbols,FT=Object.prototype.hasOwnProperty,VT=Object.prototype.propertyIsEnumerable;function UT(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function BT(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(e).map(function(s){return e[s]});if(r.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(s){i[s]=s}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var C_=BT()?Object.assign:function(t,e){for(var n,r=UT(t),i,s=1;s<arguments.length;s++){n=Object(arguments[s]);for(var o in n)FT.call(n,o)&&(r[o]=n[o]);if(ty){i=ty(n);for(var l=0;l<i.length;l++)VT.call(n,i[l])&&(r[i[l]]=n[i[l]])}}return r};/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tp=C_,vo=60103,b_=60106;Te.Fragment=60107;Te.StrictMode=60108;Te.Profiler=60114;var k_=60109,x_=60110,A_=60112;Te.Suspense=60113;var P_=60115,R_=60116;if(typeof Symbol=="function"&&Symbol.for){var dn=Symbol.for;vo=dn("react.element"),b_=dn("react.portal"),Te.Fragment=dn("react.fragment"),Te.StrictMode=dn("react.strict_mode"),Te.Profiler=dn("react.profiler"),k_=dn("react.provider"),x_=dn("react.context"),A_=dn("react.forward_ref"),Te.Suspense=dn("react.suspense"),P_=dn("react.memo"),R_=dn("react.lazy")}var ny=typeof Symbol=="function"&&Symbol.iterator;function zT(t){return t===null||typeof t!="object"?null:(t=ny&&t[ny]||t["@@iterator"],typeof t=="function"?t:null)}function bl(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var N_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D_={};function _o(t,e,n){this.props=t,this.context=e,this.refs=D_,this.updater=n||N_}_o.prototype.isReactComponent={};_o.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error(bl(85));this.updater.enqueueSetState(this,t,e,"setState")};_o.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function O_(){}O_.prototype=_o.prototype;function Ip(t,e,n){this.props=t,this.context=e,this.refs=D_,this.updater=n||N_}var Cp=Ip.prototype=new O_;Cp.constructor=Ip;Tp(Cp,_o.prototype);Cp.isPureReactComponent=!0;var bp={current:null},L_=Object.prototype.hasOwnProperty,M_={key:!0,ref:!0,__self:!0,__source:!0};function F_(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)L_.call(e,r)&&!M_.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];i.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:vo,type:t,key:s,ref:o,props:i,_owner:bp.current}}function jT(t,e){return{$$typeof:vo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function kp(t){return typeof t=="object"&&t!==null&&t.$$typeof===vo}function $T(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ry=/\/+/g;function ah(t,e){return typeof t=="object"&&t!==null&&t.key!=null?$T(""+t.key):e.toString(36)}function Oc(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case vo:case b_:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+ah(o,0):r,Array.isArray(i)?(n="",t!=null&&(n=t.replace(ry,"$&/")+"/"),Oc(i,e,n,"",function(d){return d})):i!=null&&(kp(i)&&(i=jT(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(ry,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Array.isArray(t))for(var l=0;l<t.length;l++){s=t[l];var c=r+ah(s,l);o+=Oc(s,e,n,c,i)}else if(c=zT(t),typeof c=="function")for(t=c.call(t),l=0;!(s=t.next()).done;)s=s.value,c=r+ah(s,l++),o+=Oc(s,e,n,c,i);else if(s==="object")throw e=""+t,Error(bl(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e));return o}function hc(t,e,n){if(t==null)return t;var r=[],i=0;return Oc(t,r,"","",function(s){return e.call(n,s,i++)}),r}function WT(t){if(t._status===-1){var e=t._result;e=e(),t._status=0,t._result=e,e.then(function(n){t._status===0&&(n=n.default,t._status=1,t._result=n)},function(n){t._status===0&&(t._status=2,t._result=n)})}if(t._status===1)return t._result;throw t._result}var V_={current:null};function lr(){var t=V_.current;if(t===null)throw Error(bl(321));return t}var HT={ReactCurrentDispatcher:V_,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:bp,IsSomeRendererActing:{current:!1},assign:Tp};Te.Children={map:hc,forEach:function(t,e,n){hc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return hc(t,function(){e++}),e},toArray:function(t){return hc(t,function(e){return e})||[]},only:function(t){if(!kp(t))throw Error(bl(143));return t}};Te.Component=_o;Te.PureComponent=Ip;Te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=HT;Te.cloneElement=function(t,e,n){if(t==null)throw Error(bl(267,t));var r=Tp({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=bp.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)L_.call(e,c)&&!M_.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:vo,type:t.type,key:i,ref:s,props:r,_owner:o}};Te.createContext=function(t,e){return e===void 0&&(e=null),t={$$typeof:x_,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider={$$typeof:k_,_context:t},t.Consumer=t};Te.createElement=F_;Te.createFactory=function(t){var e=F_.bind(null,t);return e.type=t,e};Te.createRef=function(){return{current:null}};Te.forwardRef=function(t){return{$$typeof:A_,render:t}};Te.isValidElement=kp;Te.lazy=function(t){return{$$typeof:R_,_payload:{_status:-1,_result:t},_init:WT}};Te.memo=function(t,e){return{$$typeof:P_,type:t,compare:e===void 0?null:e}};Te.useCallback=function(t,e){return lr().useCallback(t,e)};Te.useContext=function(t,e){return lr().useContext(t,e)};Te.useDebugValue=function(){};Te.useEffect=function(t,e){return lr().useEffect(t,e)};Te.useImperativeHandle=function(t,e,n){return lr().useImperativeHandle(t,e,n)};Te.useLayoutEffect=function(t,e){return lr().useLayoutEffect(t,e)};Te.useMemo=function(t,e){return lr().useMemo(t,e)};Te.useReducer=function(t,e,n){return lr().useReducer(t,e,n)};Te.useRef=function(t){return lr().useRef(t)};Te.useState=function(t){return lr().useState(t)};Te.version="17.0.2";L.exports=Te;var we=L.exports,U_={exports:{}},on={},B_={exports:{}},z_={};/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){var e,n,r,i;if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}if(typeof window=="undefined"||typeof MessageChannel!="function"){var c=null,d=null,f=function(){if(c!==null)try{var M=t.unstable_now();c(!0,M),c=null}catch(B){throw setTimeout(f,0),B}};e=function(M){c!==null?setTimeout(e,0,M):(c=M,setTimeout(f,0))},n=function(M,B){d=setTimeout(M,B)},r=function(){clearTimeout(d)},t.unstable_shouldYield=function(){return!1},i=t.unstable_forceFrameRate=function(){}}else{var v=window.setTimeout,m=window.clearTimeout;if(typeof console!="undefined"){var T=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof T!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var P=!1,R=null,y=-1,E=5,x=0;t.unstable_shouldYield=function(){return t.unstable_now()>=x},i=function(){},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<M?Math.floor(1e3/M):5};var D=new MessageChannel,O=D.port2;D.port1.onmessage=function(){if(R!==null){var M=t.unstable_now();x=M+E;try{R(!0,M)?O.postMessage(null):(P=!1,R=null)}catch(B){throw O.postMessage(null),B}}else P=!1},e=function(M){R=M,P||(P=!0,O.postMessage(null))},n=function(M,B){y=v(function(){M(t.unstable_now())},B)},r=function(){m(y),y=-1}}function z(M,B){var Y=M.length;M.push(B);e:for(;;){var ne=Y-1>>>1,ue=M[ne];if(ue!==void 0&&0<_(ue,B))M[ne]=B,M[Y]=ue,Y=ne;else break e}}function V(M){return M=M[0],M===void 0?null:M}function k(M){var B=M[0];if(B!==void 0){var Y=M.pop();if(Y!==B){M[0]=Y;e:for(var ne=0,ue=M.length;ne<ue;){var ge=2*(ne+1)-1,Ee=M[ge],Ae=ge+1,ot=M[Ae];if(Ee!==void 0&&0>_(Ee,Y))ot!==void 0&&0>_(ot,Ee)?(M[ne]=ot,M[Ae]=Y,ne=Ae):(M[ne]=Ee,M[ge]=Y,ne=ge);else if(ot!==void 0&&0>_(ot,Y))M[ne]=ot,M[Ae]=Y,ne=Ae;else break e}}return B}return null}function _(M,B){var Y=M.sortIndex-B.sortIndex;return Y!==0?Y:M.id-B.id}var S=[],I=[],b=1,N=null,w=3,Q=!1,J=!1,se=!1;function q(M){for(var B=V(I);B!==null;){if(B.callback===null)k(I);else if(B.startTime<=M)k(I),B.sortIndex=B.expirationTime,z(S,B);else break;B=V(I)}}function te(M){if(se=!1,q(M),!J)if(V(S)!==null)J=!0,e($);else{var B=V(I);B!==null&&n(te,B.startTime-M)}}function $(M,B){J=!1,se&&(se=!1,r()),Q=!0;var Y=w;try{for(q(B),N=V(S);N!==null&&(!(N.expirationTime>B)||M&&!t.unstable_shouldYield());){var ne=N.callback;if(typeof ne=="function"){N.callback=null,w=N.priorityLevel;var ue=ne(N.expirationTime<=B);B=t.unstable_now(),typeof ue=="function"?N.callback=ue:N===V(S)&&k(S),q(B)}else k(S);N=V(S)}if(N!==null)var ge=!0;else{var Ee=V(I);Ee!==null&&n(te,Ee.startTime-B),ge=!1}return ge}finally{N=null,w=Y,Q=!1}}var H=i;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){J||Q||(J=!0,e($))},t.unstable_getCurrentPriorityLevel=function(){return w},t.unstable_getFirstCallbackNode=function(){return V(S)},t.unstable_next=function(M){switch(w){case 1:case 2:case 3:var B=3;break;default:B=w}var Y=w;w=B;try{return M()}finally{w=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=H,t.unstable_runWithPriority=function(M,B){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var Y=w;w=M;try{return B()}finally{w=Y}},t.unstable_scheduleCallback=function(M,B,Y){var ne=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?ne+Y:ne):Y=ne,M){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=Y+ue,M={id:b++,callback:B,priorityLevel:M,startTime:Y,expirationTime:ue,sortIndex:-1},Y>ne?(M.sortIndex=Y,z(I,M),V(S)===null&&M===V(I)&&(se?r():se=!0,n(te,Y-ne))):(M.sortIndex=ue,z(S,M),J||Q||(J=!0,e($))),M},t.unstable_wrapCallback=function(M){var B=w;return function(){var Y=w;w=B;try{return M.apply(this,arguments)}finally{w=Y}}}})(z_);B_.exports=z_;/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ju=L.exports,Fe=C_,it=B_.exports;function X(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!Ju)throw Error(X(227));var j_=new Set,Za={};function ts(t,e){to(t,e),to(t+"Capture",e)}function to(t,e){for(Za[t]=e,t=0;t<e.length;t++)j_.add(e[t])}var rr=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),qT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,iy=Object.prototype.hasOwnProperty,sy={},oy={};function GT(t){return iy.call(oy,t)?!0:iy.call(sy,t)?!1:qT.test(t)?oy[t]=!0:(sy[t]=!0,!1)}function KT(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function XT(t,e,n,r){if(e===null||typeof e=="undefined"||KT(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function At(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var mt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){mt[t]=new At(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];mt[e]=new At(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){mt[t]=new At(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){mt[t]=new At(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){mt[t]=new At(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){mt[t]=new At(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){mt[t]=new At(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){mt[t]=new At(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){mt[t]=new At(t,5,!1,t.toLowerCase(),null,!1,!1)});var xp=/[\-:]([a-z])/g;function Ap(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(xp,Ap);mt[e]=new At(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(xp,Ap);mt[e]=new At(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(xp,Ap);mt[e]=new At(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){mt[t]=new At(t,1,!1,t.toLowerCase(),null,!1,!1)});mt.xlinkHref=new At("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){mt[t]=new At(t,1,!1,t.toLowerCase(),null,!0,!0)});function Pp(t,e,n,r){var i=mt.hasOwnProperty(e)?mt[e]:null,s=i!==null?i.type===0:r?!1:!(!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N");s||(XT(e,n,i,r)&&(n=null),r||i===null?GT(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ns=Ju.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,wa=60103,Li=60106,xr=60107,Rp=60108,Ra=60114,Np=60109,Dp=60110,Zu=60112,Na=60113,ru=60120,ed=60115,Op=60116,Lp=60121,Mp=60128,$_=60129,Fp=60130,nf=60131;if(typeof Symbol=="function"&&Symbol.for){var nt=Symbol.for;wa=nt("react.element"),Li=nt("react.portal"),xr=nt("react.fragment"),Rp=nt("react.strict_mode"),Ra=nt("react.profiler"),Np=nt("react.provider"),Dp=nt("react.context"),Zu=nt("react.forward_ref"),Na=nt("react.suspense"),ru=nt("react.suspense_list"),ed=nt("react.memo"),Op=nt("react.lazy"),Lp=nt("react.block"),nt("react.scope"),Mp=nt("react.opaque.id"),$_=nt("react.debug_trace_mode"),Fp=nt("react.offscreen"),nf=nt("react.legacy_hidden")}var ay=typeof Symbol=="function"&&Symbol.iterator;function oa(t){return t===null||typeof t!="object"?null:(t=ay&&t[ay]||t["@@iterator"],typeof t=="function"?t:null)}var lh;function Ea(t){if(lh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);lh=e&&e[1]||""}return`
`+lh+t}var ch=!1;function fc(t,e){if(!t||ch)return"";ch=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l])return`
`+i[o].replace(" at new "," at ");while(1<=o&&0<=l);break}}}finally{ch=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ea(t):""}function QT(t){switch(t.tag){case 5:return Ea(t.type);case 16:return Ea("Lazy");case 13:return Ea("Suspense");case 19:return Ea("SuspenseList");case 0:case 2:case 15:return t=fc(t.type,!1),t;case 11:return t=fc(t.type.render,!1),t;case 22:return t=fc(t.type._render,!1),t;case 1:return t=fc(t.type,!0),t;default:return""}}function zs(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case xr:return"Fragment";case Li:return"Portal";case Ra:return"Profiler";case Rp:return"StrictMode";case Na:return"Suspense";case ru:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Dp:return(t.displayName||"Context")+".Consumer";case Np:return(t._context.displayName||"Context")+".Provider";case Zu:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case ed:return zs(t.type);case Lp:return zs(t._render);case Op:e=t._payload,t=t._init;try{return zs(t(e))}catch{}}return null}function Yr(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function W_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function YT(t){var e=W_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n!="undefined"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function pc(t){t._valueTracker||(t._valueTracker=YT(t))}function H_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=W_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function iu(t){if(t=t||(typeof document!="undefined"?document:void 0),typeof t=="undefined")return null;try{return t.activeElement||t.body}catch{return t.body}}function rf(t,e){var n=e.checked;return Fe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:t._wrapperState.initialChecked})}function ly(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Yr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function q_(t,e){e=e.checked,e!=null&&Pp(t,"checked",e,!1)}function sf(t,e){q_(t,e);var n=Yr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?of(t,e.type,n):e.hasOwnProperty("defaultValue")&&of(t,e.type,Yr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function cy(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function of(t,e,n){(e!=="number"||iu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}function JT(t){var e="";return Ju.Children.forEach(t,function(n){n!=null&&(e+=n)}),e}function af(t,e){return t=Fe({children:void 0},e),(e=JT(e.children))&&(t.children=e),t}function js(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Yr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function lf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(X(91));return Fe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function uy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(X(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(X(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Yr(n)}}function G_(t,e){var n=Yr(e.value),r=Yr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function dy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}var cf={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function K_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function uf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?K_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var mc,X_=function(t){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!==cf.svg||"innerHTML"in t)t.innerHTML=e;else{for(mc=mc||document.createElement("div"),mc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=mc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function el(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Da={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ZT=["Webkit","ms","Moz","O"];Object.keys(Da).forEach(function(t){ZT.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Da[e]=Da[t]})});function Q_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Da.hasOwnProperty(t)&&Da[t]?(""+e).trim():e+"px"}function Y_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Q_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var eI=Fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function df(t,e){if(e){if(eI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(X(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(X(60));if(!(typeof e.dangerouslySetInnerHTML=="object"&&"__html"in e.dangerouslySetInnerHTML))throw Error(X(61))}if(e.style!=null&&typeof e.style!="object")throw Error(X(62))}}function hf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Vp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ff=null,$s=null,Ws=null;function hy(t){if(t=xl(t)){if(typeof ff!="function")throw Error(X(280));var e=t.stateNode;e&&(e=od(e),ff(t.stateNode,t.type,e))}}function J_(t){$s?Ws?Ws.push(t):Ws=[t]:$s=t}function Z_(){if($s){var t=$s,e=Ws;if(Ws=$s=null,hy(t),e)for(t=0;t<e.length;t++)hy(e[t])}}function Up(t,e){return t(e)}function e1(t,e,n,r,i){return t(e,n,r,i)}function Bp(){}var t1=Up,Mi=!1,uh=!1;function zp(){($s!==null||Ws!==null)&&(Bp(),Z_())}function tI(t,e,n){if(uh)return t(e,n);uh=!0;try{return t1(t,e,n)}finally{uh=!1,zp()}}function tl(t,e){var n=t.stateNode;if(n===null)return null;var r=od(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(X(231,e,typeof n));return n}var pf=!1;if(rr)try{var aa={};Object.defineProperty(aa,"passive",{get:function(){pf=!0}}),window.addEventListener("test",aa,aa),window.removeEventListener("test",aa,aa)}catch{pf=!1}function nI(t,e,n,r,i,s,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var Oa=!1,su=null,ou=!1,mf=null,rI={onError:function(t){Oa=!0,su=t}};function iI(t,e,n,r,i,s,o,l,c){Oa=!1,su=null,nI.apply(rI,arguments)}function sI(t,e,n,r,i,s,o,l,c){if(iI.apply(this,arguments),Oa){if(Oa){var d=su;Oa=!1,su=null}else throw Error(X(198));ou||(ou=!0,mf=d)}}function rs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&1026)!==0&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function n1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function fy(t){if(rs(t)!==t)throw Error(X(188))}function oI(t){var e=t.alternate;if(!e){if(e=rs(t),e===null)throw Error(X(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return fy(i),t;if(s===r)return fy(i),e;s=s.sibling}throw Error(X(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(X(189))}}if(n.alternate!==r)throw Error(X(190))}if(n.tag!==3)throw Error(X(188));return n.stateNode.current===n?t:e}function r1(t){if(t=oI(t),!t)return null;for(var e=t;;){if(e.tag===5||e.tag===6)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function py(t,e){for(var n=t.alternate;e!==null;){if(e===t||e===n)return!0;e=e.return}return!1}var i1,jp,s1,o1,gf=!1,bn=[],Vr=null,Ur=null,Br=null,nl=new Map,rl=new Map,la=[],my="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yf(t,e,n,r,i){return{blockedOn:t,domEventName:e,eventSystemFlags:n|16,nativeEvent:i,targetContainers:[r]}}function gy(t,e){switch(t){case"focusin":case"focusout":Vr=null;break;case"dragenter":case"dragleave":Ur=null;break;case"mouseover":case"mouseout":Br=null;break;case"pointerover":case"pointerout":nl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":rl.delete(e.pointerId)}}function ca(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t=yf(e,n,r,i,s),e!==null&&(e=xl(e),e!==null&&jp(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function aI(t,e,n,r,i){switch(e){case"focusin":return Vr=ca(Vr,t,e,n,r,i),!0;case"dragenter":return Ur=ca(Ur,t,e,n,r,i),!0;case"mouseover":return Br=ca(Br,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return nl.set(s,ca(nl.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,rl.set(s,ca(rl.get(s)||null,t,e,n,r,i)),!0}return!1}function lI(t){var e=Fi(t.target);if(e!==null){var n=rs(e);if(n!==null){if(e=n.tag,e===13){if(e=n1(n),e!==null){t.blockedOn=e,o1(t.lanePriority,function(){it.unstable_runWithPriority(t.priority,function(){s1(n)})});return}}else if(e===3&&n.stateNode.hydrate){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Lc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=qp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n!==null)return e=xl(n),e!==null&&jp(e),t.blockedOn=n,!1;e.shift()}return!0}function yy(t,e,n){Lc(t)&&n.delete(e)}function cI(){for(gf=!1;0<bn.length;){var t=bn[0];if(t.blockedOn!==null){t=xl(t.blockedOn),t!==null&&i1(t);break}for(var e=t.targetContainers;0<e.length;){var n=qp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n!==null){t.blockedOn=n;break}e.shift()}t.blockedOn===null&&bn.shift()}Vr!==null&&Lc(Vr)&&(Vr=null),Ur!==null&&Lc(Ur)&&(Ur=null),Br!==null&&Lc(Br)&&(Br=null),nl.forEach(yy),rl.forEach(yy)}function ua(t,e){t.blockedOn===e&&(t.blockedOn=null,gf||(gf=!0,it.unstable_scheduleCallback(it.unstable_NormalPriority,cI)))}function a1(t){function e(i){return ua(i,t)}if(0<bn.length){ua(bn[0],t);for(var n=1;n<bn.length;n++){var r=bn[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Vr!==null&&ua(Vr,t),Ur!==null&&ua(Ur,t),Br!==null&&ua(Br,t),nl.forEach(e),rl.forEach(e),n=0;n<la.length;n++)r=la[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<la.length&&(n=la[0],n.blockedOn===null);)lI(n),n.blockedOn===null&&la.shift()}function gc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Os={animationend:gc("Animation","AnimationEnd"),animationiteration:gc("Animation","AnimationIteration"),animationstart:gc("Animation","AnimationStart"),transitionend:gc("Transition","TransitionEnd")},dh={},l1={};rr&&(l1=document.createElement("div").style,"AnimationEvent"in window||(delete Os.animationend.animation,delete Os.animationiteration.animation,delete Os.animationstart.animation),"TransitionEvent"in window||delete Os.transitionend.transition);function td(t){if(dh[t])return dh[t];if(!Os[t])return t;var e=Os[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in l1)return dh[t]=e[n];return t}var c1=td("animationend"),u1=td("animationiteration"),d1=td("animationstart"),h1=td("transitionend"),f1=new Map,$p=new Map,uI=["abort","abort",c1,"animationEnd",u1,"animationIteration",d1,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",h1,"transitionEnd","waiting","waiting"];function Wp(t,e){for(var n=0;n<t.length;n+=2){var r=t[n],i=t[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),$p.set(r,e),f1.set(r,i),ts(i,[r])}}var dI=it.unstable_now;dI();var Pe=8;function ks(t){if((1&t)!==0)return Pe=15,1;if((2&t)!==0)return Pe=14,2;if((4&t)!==0)return Pe=13,4;var e=24&t;return e!==0?(Pe=12,e):(t&32)!==0?(Pe=11,32):(e=192&t,e!==0?(Pe=10,e):(t&256)!==0?(Pe=9,256):(e=3584&t,e!==0?(Pe=8,e):(t&4096)!==0?(Pe=7,4096):(e=4186112&t,e!==0?(Pe=6,e):(e=62914560&t,e!==0?(Pe=5,e):t&67108864?(Pe=4,67108864):(t&134217728)!==0?(Pe=3,134217728):(e=805306368&t,e!==0?(Pe=2,e):(1073741824&t)!==0?(Pe=1,1073741824):(Pe=8,t))))))}function hI(t){switch(t){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function fI(t){switch(t){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(X(358,t))}}function il(t,e){var n=t.pendingLanes;if(n===0)return Pe=0;var r=0,i=0,s=t.expiredLanes,o=t.suspendedLanes,l=t.pingedLanes;if(s!==0)r=s,i=Pe=15;else if(s=n&134217727,s!==0){var c=s&~o;c!==0?(r=ks(c),i=Pe):(l&=s,l!==0&&(r=ks(l),i=Pe))}else s=n&~o,s!==0?(r=ks(s),i=Pe):l!==0&&(r=ks(l),i=Pe);if(r===0)return 0;if(r=31-Jr(r),r=n&((0>r?0:1<<r)<<1)-1,e!==0&&e!==r&&(e&o)===0){if(ks(e),i<=Pe)return e;Pe=i}if(e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Jr(e),i=1<<n,r|=t[n],e&=~i;return r}function p1(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function au(t,e){switch(t){case 15:return 1;case 14:return 2;case 12:return t=xs(24&~e),t===0?au(10,e):t;case 10:return t=xs(192&~e),t===0?au(8,e):t;case 8:return t=xs(3584&~e),t===0&&(t=xs(4186112&~e),t===0&&(t=512)),t;case 2:return e=xs(805306368&~e),e===0&&(e=268435456),e}throw Error(X(358,t))}function xs(t){return t&-t}function hh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function nd(t,e,n){t.pendingLanes|=e;var r=e-1;t.suspendedLanes&=r,t.pingedLanes&=r,t=t.eventTimes,e=31-Jr(e),t[e]=n}var Jr=Math.clz32?Math.clz32:gI,pI=Math.log,mI=Math.LN2;function gI(t){return t===0?32:31-(pI(t)/mI|0)|0}var yI=it.unstable_UserBlockingPriority,vI=it.unstable_runWithPriority,Mc=!0;function _I(t,e,n,r){Mi||Bp();var i=Hp,s=Mi;Mi=!0;try{e1(i,t,e,n,r)}finally{(Mi=s)||zp()}}function wI(t,e,n,r){vI(yI,Hp.bind(null,t,e,n,r))}function Hp(t,e,n,r){if(Mc){var i;if((i=(e&4)===0)&&0<bn.length&&-1<my.indexOf(t))t=yf(null,t,e,n,r),bn.push(t);else{var s=qp(t,e,n,r);if(s===null)i&&gy(t,r);else{if(i){if(-1<my.indexOf(t)){t=yf(s,t,e,n,r),bn.push(t);return}if(aI(s,t,e,n,r))return;gy(t,r)}k1(t,e,r,null,n)}}}}function qp(t,e,n,r){var i=Vp(r);if(i=Fi(i),i!==null){var s=rs(i);if(s===null)i=null;else{var o=s.tag;if(o===13){if(i=n1(s),i!==null)return i;i=null}else if(o===3){if(s.stateNode.hydrate)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return k1(t,e,r,i,n),null}var Dr=null,Gp=null,Fc=null;function m1(){if(Fc)return Fc;var t,e=Gp,n=e.length,r,i="value"in Dr?Dr.value:Dr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Fc=i.slice(t,1<r?1-r:void 0)}function Vc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function yc(){return!0}function vy(){return!1}function Ht(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?yc:vy,this.isPropagationStopped=vy,this}return Fe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=yc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=yc)},persist:function(){},isPersistent:yc}),e}var wo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kp=Ht(wo),kl=Fe({},wo,{view:0,detail:0}),EI=Ht(kl),fh,ph,da,rd=Fe({},kl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==da&&(da&&t.type==="mousemove"?(fh=t.screenX-da.screenX,ph=t.screenY-da.screenY):ph=fh=0,da=t),fh)},movementY:function(t){return"movementY"in t?t.movementY:ph}}),_y=Ht(rd),SI=Fe({},rd,{dataTransfer:0}),TI=Ht(SI),II=Fe({},kl,{relatedTarget:0}),mh=Ht(II),CI=Fe({},wo,{animationName:0,elapsedTime:0,pseudoElement:0}),bI=Ht(CI),kI=Fe({},wo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),xI=Ht(kI),AI=Fe({},wo,{data:0}),wy=Ht(AI),PI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},RI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},NI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function DI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=NI[t])?!!e[t]:!1}function Xp(){return DI}var OI=Fe({},kl,{key:function(t){if(t.key){var e=PI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Vc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?RI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xp,charCode:function(t){return t.type==="keypress"?Vc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Vc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),LI=Ht(OI),MI=Fe({},rd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ey=Ht(MI),FI=Fe({},kl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xp}),VI=Ht(FI),UI=Fe({},wo,{propertyName:0,elapsedTime:0,pseudoElement:0}),BI=Ht(UI),zI=Fe({},rd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),jI=Ht(zI),$I=[9,13,27,32],Qp=rr&&"CompositionEvent"in window,La=null;rr&&"documentMode"in document&&(La=document.documentMode);var WI=rr&&"TextEvent"in window&&!La,g1=rr&&(!Qp||La&&8<La&&11>=La),Sy=String.fromCharCode(32),Ty=!1;function y1(t,e){switch(t){case"keyup":return $I.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function v1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ls=!1;function HI(t,e){switch(t){case"compositionend":return v1(e);case"keypress":return e.which!==32?null:(Ty=!0,Sy);case"textInput":return t=e.data,t===Sy&&Ty?null:t;default:return null}}function qI(t,e){if(Ls)return t==="compositionend"||!Qp&&y1(t,e)?(t=m1(),Fc=Gp=Dr=null,Ls=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return g1&&e.locale!=="ko"?null:e.data;default:return null}}var GI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Iy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!GI[t.type]:e==="textarea"}function _1(t,e,n,r){J_(r),e=lu(e,"onChange"),0<e.length&&(n=new Kp("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ma=null,sl=null;function KI(t){I1(t,0)}function id(t){var e=Fs(t);if(H_(e))return t}function XI(t,e){if(t==="change")return e}var w1=!1;if(rr){var gh;if(rr){var yh="oninput"in document;if(!yh){var Cy=document.createElement("div");Cy.setAttribute("oninput","return;"),yh=typeof Cy.oninput=="function"}gh=yh}else gh=!1;w1=gh&&(!document.documentMode||9<document.documentMode)}function by(){Ma&&(Ma.detachEvent("onpropertychange",E1),sl=Ma=null)}function E1(t){if(t.propertyName==="value"&&id(sl)){var e=[];if(_1(e,sl,t,Vp(t)),t=KI,Mi)t(e);else{Mi=!0;try{Up(t,e)}finally{Mi=!1,zp()}}}}function QI(t,e,n){t==="focusin"?(by(),Ma=e,sl=n,Ma.attachEvent("onpropertychange",E1)):t==="focusout"&&by()}function YI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return id(sl)}function JI(t,e){if(t==="click")return id(e)}function ZI(t,e){if(t==="input"||t==="change")return id(e)}function eC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Yt=typeof Object.is=="function"?Object.is:eC,tC=Object.prototype.hasOwnProperty;function ol(t,e){if(Yt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!tC.call(e,n[r])||!Yt(t[n[r]],e[n[r]]))return!1;return!0}function ky(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function xy(t,e){var n=ky(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ky(n)}}function S1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?S1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Ay(){for(var t=window,e=iu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=iu(t.document)}return e}function vf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var nC=rr&&"documentMode"in document&&11>=document.documentMode,Ms=null,_f=null,Fa=null,wf=!1;function Py(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;wf||Ms==null||Ms!==iu(r)||(r=Ms,"selectionStart"in r&&vf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Fa&&ol(Fa,r)||(Fa=r,r=lu(_f,"onSelect"),0<r.length&&(e=new Kp("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ms)))}Wp("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);Wp("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);Wp(uI,2);for(var Ry="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),vh=0;vh<Ry.length;vh++)$p.set(Ry[vh],0);to("onMouseEnter",["mouseout","mouseover"]);to("onMouseLeave",["mouseout","mouseover"]);to("onPointerEnter",["pointerout","pointerover"]);to("onPointerLeave",["pointerout","pointerover"]);ts("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ts("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ts("onBeforeInput",["compositionend","keypress","textInput","paste"]);ts("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ts("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ts("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),T1=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sa));function Ny(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,sI(r,e,void 0,t),t.currentTarget=null}function I1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==s&&i.isPropagationStopped())break e;Ny(i,l,d),s=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==s&&i.isPropagationStopped())break e;Ny(i,l,d),s=c}}}if(ou)throw t=mf,ou=!1,mf=null,t}function Ne(t,e){var n=A1(e),r=t+"__bubble";n.has(r)||(b1(e,t,2,!1),n.add(r))}var Dy="_reactListening"+Math.random().toString(36).slice(2);function C1(t){t[Dy]||(t[Dy]=!0,j_.forEach(function(e){T1.has(e)||Oy(e,!1,t,null),Oy(e,!0,t,null)}))}function Oy(t,e,n,r){var i=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,s=n;if(t==="selectionchange"&&n.nodeType!==9&&(s=n.ownerDocument),r!==null&&!e&&T1.has(t)){if(t!=="scroll")return;i|=2,s=r}var o=A1(s),l=t+"__"+(e?"capture":"bubble");o.has(l)||(e&&(i|=4),b1(s,t,i,e),o.add(l))}function b1(t,e,n,r){var i=$p.get(e);switch(i===void 0?2:i){case 0:i=_I;break;case 1:i=wI;break;default:i=Hp}n=i.bind(null,e,n,t),i=void 0,!pf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function k1(t,e,n,r,i){var s=r;if((e&1)===0&&(e&2)===0&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Fi(l),o===null)return;if(c=o.tag,c===5||c===6){r=s=o;continue e}l=l.parentNode}}r=r.return}tI(function(){var d=s,f=Vp(n),v=[];e:{var m=f1.get(t);if(m!==void 0){var T=Kp,P=t;switch(t){case"keypress":if(Vc(n)===0)break e;case"keydown":case"keyup":T=LI;break;case"focusin":P="focus",T=mh;break;case"focusout":P="blur",T=mh;break;case"beforeblur":case"afterblur":T=mh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=_y;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=TI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=VI;break;case c1:case u1:case d1:T=bI;break;case h1:T=BI;break;case"scroll":T=EI;break;case"wheel":T=jI;break;case"copy":case"cut":case"paste":T=xI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=Ey}var R=(e&4)!==0,y=!R&&t==="scroll",E=R?m!==null?m+"Capture":null:m;R=[];for(var x=d,D;x!==null;){D=x;var O=D.stateNode;if(D.tag===5&&O!==null&&(D=O,E!==null&&(O=tl(x,E),O!=null&&R.push(al(x,O,D)))),y)break;x=x.return}0<R.length&&(m=new T(m,P,null,n,f),v.push({event:m,listeners:R}))}}if((e&7)===0){e:{if(m=t==="mouseover"||t==="pointerover",T=t==="mouseout"||t==="pointerout",m&&(e&16)===0&&(P=n.relatedTarget||n.fromElement)&&(Fi(P)||P[Eo]))break e;if((T||m)&&(m=f.window===f?f:(m=f.ownerDocument)?m.defaultView||m.parentWindow:window,T?(P=n.relatedTarget||n.toElement,T=d,P=P?Fi(P):null,P!==null&&(y=rs(P),P!==y||P.tag!==5&&P.tag!==6)&&(P=null)):(T=null,P=d),T!==P)){if(R=_y,O="onMouseLeave",E="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(R=Ey,O="onPointerLeave",E="onPointerEnter",x="pointer"),y=T==null?m:Fs(T),D=P==null?m:Fs(P),m=new R(O,x+"leave",T,n,f),m.target=y,m.relatedTarget=D,O=null,Fi(f)===d&&(R=new R(E,x+"enter",P,n,f),R.target=D,R.relatedTarget=y,O=R),y=O,T&&P)t:{for(R=T,E=P,x=0,D=R;D;D=Cs(D))x++;for(D=0,O=E;O;O=Cs(O))D++;for(;0<x-D;)R=Cs(R),x--;for(;0<D-x;)E=Cs(E),D--;for(;x--;){if(R===E||E!==null&&R===E.alternate)break t;R=Cs(R),E=Cs(E)}R=null}else R=null;T!==null&&Ly(v,m,T,R,!1),P!==null&&y!==null&&Ly(v,y,P,R,!0)}}e:{if(m=d?Fs(d):window,T=m.nodeName&&m.nodeName.toLowerCase(),T==="select"||T==="input"&&m.type==="file")var z=XI;else if(Iy(m))if(w1)z=ZI;else{z=YI;var V=QI}else(T=m.nodeName)&&T.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(z=JI);if(z&&(z=z(t,d))){_1(v,z,n,f);break e}V&&V(t,m,d),t==="focusout"&&(V=m._wrapperState)&&V.controlled&&m.type==="number"&&of(m,"number",m.value)}switch(V=d?Fs(d):window,t){case"focusin":(Iy(V)||V.contentEditable==="true")&&(Ms=V,_f=d,Fa=null);break;case"focusout":Fa=_f=Ms=null;break;case"mousedown":wf=!0;break;case"contextmenu":case"mouseup":case"dragend":wf=!1,Py(v,n,f);break;case"selectionchange":if(nC)break;case"keydown":case"keyup":Py(v,n,f)}var k;if(Qp)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Ls?y1(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(g1&&n.locale!=="ko"&&(Ls||_!=="onCompositionStart"?_==="onCompositionEnd"&&Ls&&(k=m1()):(Dr=f,Gp="value"in Dr?Dr.value:Dr.textContent,Ls=!0)),V=lu(d,_),0<V.length&&(_=new wy(_,t,null,n,f),v.push({event:_,listeners:V}),k?_.data=k:(k=v1(n),k!==null&&(_.data=k)))),(k=WI?HI(t,n):qI(t,n))&&(d=lu(d,"onBeforeInput"),0<d.length&&(f=new wy("onBeforeInput","beforeinput",null,n,f),v.push({event:f,listeners:d}),f.data=k))}I1(v,e)})}function al(t,e,n){return{instance:t,listener:e,currentTarget:n}}function lu(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=tl(t,n),s!=null&&r.unshift(al(t,s,i)),s=tl(t,e),s!=null&&r.push(al(t,s,i))),t=t.return}return r}function Cs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Ly(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&d!==null&&(l=d,i?(c=tl(n,s),c!=null&&o.unshift(al(n,c,l))):i||(c=tl(n,s),c!=null&&o.push(al(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}function cu(){}var _h=null,wh=null;function x1(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function Ef(t,e){return t==="textarea"||t==="option"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var My=typeof setTimeout=="function"?setTimeout:void 0,rC=typeof clearTimeout=="function"?clearTimeout:void 0;function Yp(t){t.nodeType===1?t.textContent="":t.nodeType===9&&(t=t.body,t!=null&&(t.textContent=""))}function Hs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break}return t}function Fy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Eh=0;function iC(t){return{$$typeof:Mp,toString:t,valueOf:t}}var sd=Math.random().toString(36).slice(2),Or="__reactFiber$"+sd,uu="__reactProps$"+sd,Eo="__reactContainer$"+sd,Vy="__reactEvents$"+sd;function Fi(t){var e=t[Or];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Eo]||n[Or]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Fy(t);t!==null;){if(n=t[Or])return n;t=Fy(t)}return e}t=n,n=t.parentNode}return null}function xl(t){return t=t[Or]||t[Eo],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Fs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(X(33))}function od(t){return t[uu]||null}function A1(t){var e=t[Vy];return e===void 0&&(e=t[Vy]=new Set),e}var Sf=[],Vs=-1;function ui(t){return{current:t}}function Le(t){0>Vs||(t.current=Sf[Vs],Sf[Vs]=null,Vs--)}function je(t,e){Vs++,Sf[Vs]=t.current,t.current=e}var Zr={},It=ui(Zr),Mt=ui(!1),Hi=Zr;function no(t,e){var n=t.type.contextTypes;if(!n)return Zr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ft(t){return t=t.childContextTypes,t!=null}function du(){Le(Mt),Le(It)}function Uy(t,e,n){if(It.current!==Zr)throw Error(X(168));je(It,e),je(Mt,n)}function P1(t,e,n){var r=t.stateNode;if(t=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(X(108,zs(e)||"Unknown",i));return Fe({},n,r)}function Uc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Zr,Hi=It.current,je(It,t),je(Mt,Mt.current),!0}function By(t,e,n){var r=t.stateNode;if(!r)throw Error(X(169));n?(t=P1(t,e,Hi),r.__reactInternalMemoizedMergedChildContext=t,Le(Mt),Le(It),je(It,t)):Le(Mt),je(Mt,n)}var Jp=null,ji=null,sC=it.unstable_runWithPriority,Zp=it.unstable_scheduleCallback,Tf=it.unstable_cancelCallback,oC=it.unstable_shouldYield,zy=it.unstable_requestPaint,If=it.unstable_now,aC=it.unstable_getCurrentPriorityLevel,ad=it.unstable_ImmediatePriority,R1=it.unstable_UserBlockingPriority,N1=it.unstable_NormalPriority,D1=it.unstable_LowPriority,O1=it.unstable_IdlePriority,Sh={},lC=zy!==void 0?zy:function(){},qn=null,Bc=null,Th=!1,jy=If(),St=1e4>jy?If:function(){return If()-jy};function ro(){switch(aC()){case ad:return 99;case R1:return 98;case N1:return 97;case D1:return 96;case O1:return 95;default:throw Error(X(332))}}function L1(t){switch(t){case 99:return ad;case 98:return R1;case 97:return N1;case 96:return D1;case 95:return O1;default:throw Error(X(332))}}function qi(t,e){return t=L1(t),sC(t,e)}function ll(t,e,n){return t=L1(t),Zp(t,e,n)}function Un(){if(Bc!==null){var t=Bc;Bc=null,Tf(t)}M1()}function M1(){if(!Th&&qn!==null){Th=!0;var t=0;try{var e=qn;qi(99,function(){for(;t<e.length;t++){var n=e[t];do n=n(!0);while(n!==null)}}),qn=null}catch(n){throw qn!==null&&(qn=qn.slice(t+1)),Zp(ad,Un),n}finally{Th=!1}}}var cC=ns.ReactCurrentBatchConfig;function fn(t,e){if(t&&t.defaultProps){e=Fe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var hu=ui(null),fu=null,Us=null,pu=null;function em(){pu=Us=fu=null}function tm(t){var e=hu.current;Le(hu),t.type._context._currentValue=e}function F1(t,e){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)===e){if(n===null||(n.childLanes&e)===e)break;n.childLanes|=e}else t.childLanes|=e,n!==null&&(n.childLanes|=e);t=t.return}}function qs(t,e){fu=t,pu=Us=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&e)!==0&&(pn=!0),t.firstContext=null)}function nn(t,e){if(pu!==t&&e!==!1&&e!==0)if((typeof e!="number"||e===1073741823)&&(pu=t,e=1073741823),e={context:t,observedBits:e,next:null},Us===null){if(fu===null)throw Error(X(308));Us=e,fu.dependencies={lanes:0,firstContext:e,responders:null}}else Us=Us.next=e;return t._currentValue}var kr=!1;function nm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function V1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function zr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function jr(t,e){if(t=t.updateQueue,t!==null){t=t.shared;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}}function $y(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function cl(t,e,n,r){var i=t.updateQueue;kr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?s=d:o.next=d,o=c;var f=t.alternate;if(f!==null){f=f.updateQueue;var v=f.lastBaseUpdate;v!==o&&(v===null?f.firstBaseUpdate=d:v.next=d,f.lastBaseUpdate=c)}}if(s!==null){v=i.baseState,o=0,f=d=c=null;do{l=s.lane;var m=s.eventTime;if((r&l)===l){f!==null&&(f=f.next={eventTime:m,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var T=t,P=s;switch(l=e,m=n,P.tag){case 1:if(T=P.payload,typeof T=="function"){v=T.call(m,v,l);break e}v=T;break e;case 3:T.flags=T.flags&-4097|64;case 0:if(T=P.payload,l=typeof T=="function"?T.call(m,v,l):T,l==null)break e;v=Fe({},v,l);break e;case 2:kr=!0}}s.callback!==null&&(t.flags|=32,l=i.effects,l===null?i.effects=[s]:l.push(s))}else m={eventTime:m,lane:l,tag:s.tag,payload:s.payload,callback:s.callback,next:null},f===null?(d=f=m,c=v):f=f.next=m,o|=l;if(s=s.next,s===null){if(l=i.shared.pending,l===null)break;s=l.next,l.next=null,i.lastBaseUpdate=l,i.shared.pending=null}}while(1);f===null&&(c=v),i.baseState=c,i.firstBaseUpdate=d,i.lastBaseUpdate=f,Pl|=o,t.lanes=o,t.memoizedState=v}}function Wy(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(X(191,i));i.call(r)}}}var U1=new Ju.Component().refs;function mu(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Fe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ld={isMounted:function(t){return(t=t._reactInternals)?rs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=jt(),i=$r(t),s=zr(r,i);s.payload=e,n!=null&&(s.callback=n),jr(t,s),Wr(t,i,r)},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=jt(),i=$r(t),s=zr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),jr(t,s),Wr(t,i,r)},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=jt(),r=$r(t),i=zr(n,r);i.tag=2,e!=null&&(i.callback=e),jr(t,i),Wr(t,r,n)}};function Hy(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!ol(n,r)||!ol(i,s):!0}function B1(t,e,n){var r=!1,i=Zr,s=e.contextType;return typeof s=="object"&&s!==null?s=nn(s):(i=Ft(e)?Hi:It.current,r=e.contextTypes,s=(r=r!=null)?no(t,i):Zr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ld,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function qy(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ld.enqueueReplaceState(e,e.state,null)}function Cf(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=U1,nm(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=nn(s):(s=Ft(e)?Hi:It.current,i.context=no(t,s)),cl(t,n,i,r),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(mu(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&ld.enqueueReplaceState(i,i.state,null),cl(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4)}var vc=Array.isArray;function ha(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(X(309));var r=n.stateNode}if(!r)throw Error(X(147,t));var i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(s){var o=r.refs;o===U1&&(o=r.refs={}),s===null?delete o[i]:o[i]=s},e._stringRef=i,e)}if(typeof t!="string")throw Error(X(284));if(!n._owner)throw Error(X(290,t))}return t}function _c(t,e){if(t.type!=="textarea")throw Error(X(31,Object.prototype.toString.call(e)==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":e))}function z1(t){function e(y,E){if(t){var x=y.lastEffect;x!==null?(x.nextEffect=E,y.lastEffect=E):y.firstEffect=y.lastEffect=E,E.nextEffect=null,E.flags=8}}function n(y,E){if(!t)return null;for(;E!==null;)e(y,E),E=E.sibling;return null}function r(y,E){for(y=new Map;E!==null;)E.key!==null?y.set(E.key,E):y.set(E.index,E),E=E.sibling;return y}function i(y,E){return y=ti(y,E),y.index=0,y.sibling=null,y}function s(y,E,x){return y.index=x,t?(x=y.alternate,x!==null?(x=x.index,x<E?(y.flags=2,E):x):(y.flags=2,E)):E}function o(y){return t&&y.alternate===null&&(y.flags=2),y}function l(y,E,x,D){return E===null||E.tag!==6?(E=xh(x,y.mode,D),E.return=y,E):(E=i(E,x),E.return=y,E)}function c(y,E,x,D){return E!==null&&E.elementType===x.type?(D=i(E,x.props),D.ref=ha(y,E,x),D.return=y,D):(D=Wc(x.type,x.key,x.props,null,y.mode,D),D.ref=ha(y,E,x),D.return=y,D)}function d(y,E,x,D){return E===null||E.tag!==4||E.stateNode.containerInfo!==x.containerInfo||E.stateNode.implementation!==x.implementation?(E=Ah(x,y.mode,D),E.return=y,E):(E=i(E,x.children||[]),E.return=y,E)}function f(y,E,x,D,O){return E===null||E.tag!==7?(E=Qs(x,y.mode,D,O),E.return=y,E):(E=i(E,x),E.return=y,E)}function v(y,E,x){if(typeof E=="string"||typeof E=="number")return E=xh(""+E,y.mode,x),E.return=y,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case wa:return x=Wc(E.type,E.key,E.props,null,y.mode,x),x.ref=ha(y,null,E),x.return=y,x;case Li:return E=Ah(E,y.mode,x),E.return=y,E}if(vc(E)||oa(E))return E=Qs(E,y.mode,x,null),E.return=y,E;_c(y,E)}return null}function m(y,E,x,D){var O=E!==null?E.key:null;if(typeof x=="string"||typeof x=="number")return O!==null?null:l(y,E,""+x,D);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case wa:return x.key===O?x.type===xr?f(y,E,x.props.children,D,O):c(y,E,x,D):null;case Li:return x.key===O?d(y,E,x,D):null}if(vc(x)||oa(x))return O!==null?null:f(y,E,x,D,null);_c(y,x)}return null}function T(y,E,x,D,O){if(typeof D=="string"||typeof D=="number")return y=y.get(x)||null,l(E,y,""+D,O);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case wa:return y=y.get(D.key===null?x:D.key)||null,D.type===xr?f(E,y,D.props.children,O,D.key):c(E,y,D,O);case Li:return y=y.get(D.key===null?x:D.key)||null,d(E,y,D,O)}if(vc(D)||oa(D))return y=y.get(x)||null,f(E,y,D,O,null);_c(E,D)}return null}function P(y,E,x,D){for(var O=null,z=null,V=E,k=E=0,_=null;V!==null&&k<x.length;k++){V.index>k?(_=V,V=null):_=V.sibling;var S=m(y,V,x[k],D);if(S===null){V===null&&(V=_);break}t&&V&&S.alternate===null&&e(y,V),E=s(S,E,k),z===null?O=S:z.sibling=S,z=S,V=_}if(k===x.length)return n(y,V),O;if(V===null){for(;k<x.length;k++)V=v(y,x[k],D),V!==null&&(E=s(V,E,k),z===null?O=V:z.sibling=V,z=V);return O}for(V=r(y,V);k<x.length;k++)_=T(V,y,k,x[k],D),_!==null&&(t&&_.alternate!==null&&V.delete(_.key===null?k:_.key),E=s(_,E,k),z===null?O=_:z.sibling=_,z=_);return t&&V.forEach(function(I){return e(y,I)}),O}function R(y,E,x,D){var O=oa(x);if(typeof O!="function")throw Error(X(150));if(x=O.call(x),x==null)throw Error(X(151));for(var z=O=null,V=E,k=E=0,_=null,S=x.next();V!==null&&!S.done;k++,S=x.next()){V.index>k?(_=V,V=null):_=V.sibling;var I=m(y,V,S.value,D);if(I===null){V===null&&(V=_);break}t&&V&&I.alternate===null&&e(y,V),E=s(I,E,k),z===null?O=I:z.sibling=I,z=I,V=_}if(S.done)return n(y,V),O;if(V===null){for(;!S.done;k++,S=x.next())S=v(y,S.value,D),S!==null&&(E=s(S,E,k),z===null?O=S:z.sibling=S,z=S);return O}for(V=r(y,V);!S.done;k++,S=x.next())S=T(V,y,k,S.value,D),S!==null&&(t&&S.alternate!==null&&V.delete(S.key===null?k:S.key),E=s(S,E,k),z===null?O=S:z.sibling=S,z=S);return t&&V.forEach(function(b){return e(y,b)}),O}return function(y,E,x,D){var O=typeof x=="object"&&x!==null&&x.type===xr&&x.key===null;O&&(x=x.props.children);var z=typeof x=="object"&&x!==null;if(z)switch(x.$$typeof){case wa:e:{for(z=x.key,O=E;O!==null;){if(O.key===z){switch(O.tag){case 7:if(x.type===xr){n(y,O.sibling),E=i(O,x.props.children),E.return=y,y=E;break e}break;default:if(O.elementType===x.type){n(y,O.sibling),E=i(O,x.props),E.ref=ha(y,O,x),E.return=y,y=E;break e}}n(y,O);break}else e(y,O);O=O.sibling}x.type===xr?(E=Qs(x.props.children,y.mode,D,x.key),E.return=y,y=E):(D=Wc(x.type,x.key,x.props,null,y.mode,D),D.ref=ha(y,E,x),D.return=y,y=D)}return o(y);case Li:e:{for(O=x.key;E!==null;){if(E.key===O)if(E.tag===4&&E.stateNode.containerInfo===x.containerInfo&&E.stateNode.implementation===x.implementation){n(y,E.sibling),E=i(E,x.children||[]),E.return=y,y=E;break e}else{n(y,E);break}else e(y,E);E=E.sibling}E=Ah(x,y.mode,D),E.return=y,y=E}return o(y)}if(typeof x=="string"||typeof x=="number")return x=""+x,E!==null&&E.tag===6?(n(y,E.sibling),E=i(E,x),E.return=y,y=E):(n(y,E),E=xh(x,y.mode,D),E.return=y,y=E),o(y);if(vc(x))return P(y,E,x,D);if(oa(x))return R(y,E,x,D);if(z&&_c(y,x),typeof x=="undefined"&&!O)switch(y.tag){case 1:case 22:case 0:case 11:case 15:throw Error(X(152,zs(y.type)||"Component"))}return n(y,E)}}var gu=z1(!0),j1=z1(!1),Al={},An=ui(Al),ul=ui(Al),dl=ui(Al);function Vi(t){if(t===Al)throw Error(X(174));return t}function bf(t,e){switch(je(dl,e),je(ul,t),je(An,Al),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:uf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=uf(e,t)}Le(An),je(An,e)}function io(){Le(An),Le(ul),Le(dl)}function Gy(t){Vi(dl.current);var e=Vi(An.current),n=uf(e,t.type);e!==n&&(je(ul,t),je(An,n))}function rm(t){ul.current===t&&(Le(An),Le(ul))}var ze=ui(0);function yu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&64)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Kn=null,Lr=null,Pn=!1;function $1(t,e){var n=Jt(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=e,n.return=t,n.flags=8,t.lastEffect!==null?(t.lastEffect.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n}function Ky(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,!0):!1;case 13:return!1;default:return!1}}function kf(t){if(Pn){var e=Lr;if(e){var n=e;if(!Ky(t,e)){if(e=Hs(n.nextSibling),!e||!Ky(t,e)){t.flags=t.flags&-1025|2,Pn=!1,Kn=t;return}$1(Kn,n)}Kn=t,Lr=Hs(e.firstChild)}else t.flags=t.flags&-1025|2,Pn=!1,Kn=t}}function Xy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Kn=t}function wc(t){if(t!==Kn)return!1;if(!Pn)return Xy(t),Pn=!0,!1;var e=t.type;if(t.tag!==5||e!=="head"&&e!=="body"&&!Ef(e,t.memoizedProps))for(e=Lr;e;)$1(t,e),e=Hs(e.nextSibling);if(Xy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(X(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Lr=Hs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Lr=null}}else Lr=Kn?Hs(t.stateNode.nextSibling):null;return!0}function Ih(){Lr=Kn=null,Pn=!1}var Gs=[];function im(){for(var t=0;t<Gs.length;t++)Gs[t]._workInProgressVersionPrimary=null;Gs.length=0}var Va=ns.ReactCurrentDispatcher,tn=ns.ReactCurrentBatchConfig,hl=0,He=null,vt=null,ut=null,vu=!1,Ua=!1;function Rt(){throw Error(X(321))}function sm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Yt(t[n],e[n]))return!1;return!0}function om(t,e,n,r,i,s){if(hl=s,He=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Va.current=t===null||t.memoizedState===null?dC:hC,t=n(r,i),Ua){s=0;do{if(Ua=!1,!(25>s))throw Error(X(301));s+=1,ut=vt=null,e.updateQueue=null,Va.current=fC,t=n(r,i)}while(Ua)}if(Va.current=Su,e=vt!==null&&vt.next!==null,hl=0,ut=vt=He=null,vu=!1,e)throw Error(X(300));return t}function Ui(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ut===null?He.memoizedState=ut=t:ut=ut.next=t,ut}function is(){if(vt===null){var t=He.alternate;t=t!==null?t.memoizedState:null}else t=vt.next;var e=ut===null?He.memoizedState:ut.next;if(e!==null)ut=e,vt=t;else{if(t===null)throw Error(X(310));vt=t,t={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},ut===null?He.memoizedState=ut=t:ut=ut.next=t}return ut}function kn(t,e){return typeof e=="function"?e(t):e}function fa(t){var e=is(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var r=vt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){i=i.next,r=r.baseState;var l=o=s=null,c=i;do{var d=c.lane;if((hl&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===t?c.eagerState:t(r,c.action);else{var f={lane:d,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};l===null?(o=l=f,s=r):l=l.next=f,He.lanes|=d,Pl|=d}c=c.next}while(c!==null&&c!==i);l===null?s=r:l.next=o,Yt(r,e.memoizedState)||(pn=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=l,n.lastRenderedState=r}return[e.memoizedState,n.dispatch]}function pa(t){var e=is(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Yt(s,e.memoizedState)||(pn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Qy(t,e,n){var r=e._getVersion;r=r(e._source);var i=e._workInProgressVersionPrimary;if(i!==null?t=i===r:(t=t.mutableReadLanes,(t=(hl&t)===t)&&(e._workInProgressVersionPrimary=r,Gs.push(e))),t)return n(e._source);throw Gs.push(e),Error(X(350))}function W1(t,e,n,r){var i=kt;if(i===null)throw Error(X(349));var s=e._getVersion,o=s(e._source),l=Va.current,c=l.useState(function(){return Qy(i,e,n)}),d=c[1],f=c[0];c=ut;var v=t.memoizedState,m=v.refs,T=m.getSnapshot,P=v.source;v=v.subscribe;var R=He;return t.memoizedState={refs:m,source:e,subscribe:r},l.useEffect(function(){m.getSnapshot=n,m.setSnapshot=d;var y=s(e._source);if(!Yt(o,y)){y=n(e._source),Yt(f,y)||(d(y),y=$r(R),i.mutableReadLanes|=y&i.pendingLanes),y=i.mutableReadLanes,i.entangledLanes|=y;for(var E=i.entanglements,x=y;0<x;){var D=31-Jr(x),O=1<<D;E[D]|=y,x&=~O}}},[n,e,r]),l.useEffect(function(){return r(e._source,function(){var y=m.getSnapshot,E=m.setSnapshot;try{E(y(e._source));var x=$r(R);i.mutableReadLanes|=x&i.pendingLanes}catch(D){E(function(){throw D})}})},[e,r]),Yt(T,n)&&Yt(P,e)&&Yt(v,r)||(t={pending:null,dispatch:null,lastRenderedReducer:kn,lastRenderedState:f},t.dispatch=d=cm.bind(null,He,t),c.queue=t,c.baseQueue=null,f=Qy(i,e,n),c.memoizedState=c.baseState=f),f}function H1(t,e,n){var r=is();return W1(r,t,e,n)}function ma(t){var e=Ui();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t=e.queue={pending:null,dispatch:null,lastRenderedReducer:kn,lastRenderedState:t},t=t.dispatch=cm.bind(null,He,t),[e.memoizedState,t]}function _u(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=He.updateQueue,e===null?(e={lastEffect:null},He.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Yy(t){var e=Ui();return t={current:t},e.memoizedState=t}function wu(){return is().memoizedState}function xf(t,e,n,r){var i=Ui();He.flags|=t,i.memoizedState=_u(1|e,n,void 0,r===void 0?null:r)}function am(t,e,n,r){var i=is();r=r===void 0?null:r;var s=void 0;if(vt!==null){var o=vt.memoizedState;if(s=o.destroy,r!==null&&sm(r,o.deps)){_u(e,n,s,r);return}}He.flags|=t,i.memoizedState=_u(1|e,n,s,r)}function Jy(t,e){return xf(516,4,t,e)}function Eu(t,e){return am(516,4,t,e)}function q1(t,e){return am(4,2,t,e)}function G1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function K1(t,e,n){return n=n!=null?n.concat([t]):null,am(4,2,G1.bind(null,e,t),n)}function lm(){}function X1(t,e){var n=is();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&sm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Q1(t,e){var n=is();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&sm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function uC(t,e){var n=ro();qi(98>n?98:n,function(){t(!0)}),qi(97<n?97:n,function(){var r=tn.transition;tn.transition=1;try{t(!1),e()}finally{tn.transition=r}})}function cm(t,e,n){var r=jt(),i=$r(t),s={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},o=e.pending;if(o===null?s.next=s:(s.next=o.next,o.next=s),e.pending=s,o=t.alternate,t===He||o!==null&&o===He)Ua=vu=!0;else{if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var l=e.lastRenderedState,c=o(l,n);if(s.eagerReducer=o,s.eagerState=c,Yt(c,l))return}catch{}finally{}Wr(t,i,r)}}var Su={readContext:nn,useCallback:Rt,useContext:Rt,useEffect:Rt,useImperativeHandle:Rt,useLayoutEffect:Rt,useMemo:Rt,useReducer:Rt,useRef:Rt,useState:Rt,useDebugValue:Rt,useDeferredValue:Rt,useTransition:Rt,useMutableSource:Rt,useOpaqueIdentifier:Rt,unstable_isNewReconciler:!1},dC={readContext:nn,useCallback:function(t,e){return Ui().memoizedState=[t,e===void 0?null:e],t},useContext:nn,useEffect:Jy,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,xf(4,2,G1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return xf(4,2,t,e)},useMemo:function(t,e){var n=Ui();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ui();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t=r.queue={pending:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},t=t.dispatch=cm.bind(null,He,t),[r.memoizedState,t]},useRef:Yy,useState:ma,useDebugValue:lm,useDeferredValue:function(t){var e=ma(t),n=e[0],r=e[1];return Jy(function(){var i=tn.transition;tn.transition=1;try{r(t)}finally{tn.transition=i}},[t]),n},useTransition:function(){var t=ma(!1),e=t[0];return t=uC.bind(null,t[1]),Yy(t),[t,e]},useMutableSource:function(t,e,n){var r=Ui();return r.memoizedState={refs:{getSnapshot:e,setSnapshot:null},source:t,subscribe:n},W1(r,t,e,n)},useOpaqueIdentifier:function(){if(Pn){var t=!1,e=iC(function(){throw t||(t=!0,n("r:"+(Eh++).toString(36))),Error(X(355))}),n=ma(e)[1];return(He.mode&2)===0&&(He.flags|=516,_u(5,function(){n("r:"+(Eh++).toString(36))},void 0,null)),e}return e="r:"+(Eh++).toString(36),ma(e),e},unstable_isNewReconciler:!1},hC={readContext:nn,useCallback:X1,useContext:nn,useEffect:Eu,useImperativeHandle:K1,useLayoutEffect:q1,useMemo:Q1,useReducer:fa,useRef:wu,useState:function(){return fa(kn)},useDebugValue:lm,useDeferredValue:function(t){var e=fa(kn),n=e[0],r=e[1];return Eu(function(){var i=tn.transition;tn.transition=1;try{r(t)}finally{tn.transition=i}},[t]),n},useTransition:function(){var t=fa(kn)[0];return[wu().current,t]},useMutableSource:H1,useOpaqueIdentifier:function(){return fa(kn)[0]},unstable_isNewReconciler:!1},fC={readContext:nn,useCallback:X1,useContext:nn,useEffect:Eu,useImperativeHandle:K1,useLayoutEffect:q1,useMemo:Q1,useReducer:pa,useRef:wu,useState:function(){return pa(kn)},useDebugValue:lm,useDeferredValue:function(t){var e=pa(kn),n=e[0],r=e[1];return Eu(function(){var i=tn.transition;tn.transition=1;try{r(t)}finally{tn.transition=i}},[t]),n},useTransition:function(){var t=pa(kn)[0];return[wu().current,t]},useMutableSource:H1,useOpaqueIdentifier:function(){return pa(kn)[0]},unstable_isNewReconciler:!1},pC=ns.ReactCurrentOwner,pn=!1;function Nt(t,e,n,r){e.child=t===null?j1(e,null,n,r):gu(e,t.child,n,r)}function Zy(t,e,n,r,i){n=n.render;var s=e.ref;return qs(e,i),r=om(t,e,n,r,s,i),t!==null&&!pn?(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~i,Xn(t,e,i)):(e.flags|=1,Nt(t,e,r,i),e.child)}function ev(t,e,n,r,i,s){if(t===null){var o=n.type;return typeof o=="function"&&!mm(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,Y1(t,e,o,r,i,s)):(t=Wc(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}return o=t.child,(i&s)===0&&(i=o.memoizedProps,n=n.compare,n=n!==null?n:ol,n(i,r)&&t.ref===e.ref)?Xn(t,e,s):(e.flags|=1,t=ti(o,r),t.ref=e.ref,t.return=e,e.child=t)}function Y1(t,e,n,r,i,s){if(t!==null&&ol(t.memoizedProps,r)&&t.ref===e.ref)if(pn=!1,(s&i)!==0)(t.flags&16384)!==0&&(pn=!0);else return e.lanes=t.lanes,Xn(t,e,s);return Af(t,e,n,r,s)}function Ch(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden"||r.mode==="unstable-defer-without-hiding")if((e.mode&4)===0)e.memoizedState={baseLanes:0},Sc(e,n);else if((n&1073741824)!==0)e.memoizedState={baseLanes:0},Sc(e,s!==null?s.baseLanes:n);else return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t},Sc(e,t),null;else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Sc(e,r);return Nt(t,e,i,n),e.child}function J1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=128)}function Af(t,e,n,r,i){var s=Ft(n)?Hi:It.current;return s=no(e,s),qs(e,i),n=om(t,e,n,r,s,i),t!==null&&!pn?(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~i,Xn(t,e,i)):(e.flags|=1,Nt(t,e,n,i),e.child)}function tv(t,e,n,r,i){if(Ft(n)){var s=!0;Uc(e)}else s=!1;if(qs(e,i),e.stateNode===null)t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),B1(e,n,r),Cf(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=nn(d):(d=Ft(n)?Hi:It.current,d=no(e,d));var f=n.getDerivedStateFromProps,v=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";v||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==d)&&qy(e,o,r,d),kr=!1;var m=e.memoizedState;o.state=m,cl(e,r,o,i),c=e.memoizedState,l!==r||m!==c||Mt.current||kr?(typeof f=="function"&&(mu(e,n,f,r),c=e.memoizedState),(l=kr||Hy(e,n,l,r,m,c,d))?(v||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4)):(typeof o.componentDidMount=="function"&&(e.flags|=4),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4),r=!1)}else{o=e.stateNode,V1(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:fn(e.type,l),o.props=d,v=e.pendingProps,m=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=nn(c):(c=Ft(n)?Hi:It.current,c=no(e,c));var T=n.getDerivedStateFromProps;(f=typeof T=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==v||m!==c)&&qy(e,o,r,c),kr=!1,m=e.memoizedState,o.state=m,cl(e,r,o,i);var P=e.memoizedState;l!==v||m!==P||Mt.current||kr?(typeof T=="function"&&(mu(e,n,T,r),P=e.memoizedState),(d=kr||Hy(e,n,d,r,m,P,c))?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,P,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,P,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=256)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=256),e.memoizedProps=r,e.memoizedState=P),o.props=r,o.state=P,o.context=c,r=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=256),r=!1)}return Pf(t,e,n,r,s,i)}function Pf(t,e,n,r,i,s){J1(t,e);var o=(e.flags&64)!==0;if(!r&&!o)return i&&By(e,n,!1),Xn(t,e,s);r=e.stateNode,pC.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=gu(e,t.child,null,s),e.child=gu(e,null,l,s)):Nt(t,e,l,s),e.memoizedState=r.state,i&&By(e,n,!0),e.child}function nv(t){var e=t.stateNode;e.pendingContext?Uy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Uy(t,e.context,!1),bf(t,e.containerInfo)}var Ec={dehydrated:null,retryLane:0};function rv(t,e,n){var r=e.pendingProps,i=ze.current,s=!1,o;return(o=(e.flags&64)!==0)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-65):t!==null&&t.memoizedState===null||r.fallback===void 0||r.unstable_avoidThisFallback===!0||(i|=1),je(ze,i&1),t===null?(r.fallback!==void 0&&kf(e),t=r.children,i=r.fallback,s?(t=iv(e,t,i,n),e.child.memoizedState={baseLanes:n},e.memoizedState=Ec,t):typeof r.unstable_expectedLoadTime=="number"?(t=iv(e,t,i,n),e.child.memoizedState={baseLanes:n},e.memoizedState=Ec,e.lanes=33554432,t):(n=gm({mode:"visible",children:t},e.mode,n,null),n.return=e,e.child=n)):t.memoizedState!==null?s?(r=ov(t,e,r.children,r.fallback,n),s=e.child,i=t.child.memoizedState,s.memoizedState=i===null?{baseLanes:n}:{baseLanes:i.baseLanes|n},s.childLanes=t.childLanes&~n,e.memoizedState=Ec,r):(n=sv(t,e,r.children,n),e.memoizedState=null,n):s?(r=ov(t,e,r.children,r.fallback,n),s=e.child,i=t.child.memoizedState,s.memoizedState=i===null?{baseLanes:n}:{baseLanes:i.baseLanes|n},s.childLanes=t.childLanes&~n,e.memoizedState=Ec,r):(n=sv(t,e,r.children,n),e.memoizedState=null,n)}function iv(t,e,n,r){var i=t.mode,s=t.child;return e={mode:"hidden",children:e},(i&2)===0&&s!==null?(s.childLanes=0,s.pendingProps=e):s=gm(e,i,0,null),n=Qs(n,i,r,null),s.return=t,n.return=t,s.sibling=n,t.child=s,n}function sv(t,e,n,r){var i=t.child;return t=i.sibling,n=ti(i,{mode:"visible",children:n}),(e.mode&2)===0&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(t.nextEffect=null,t.flags=8,e.firstEffect=e.lastEffect=t),e.child=n}function ov(t,e,n,r,i){var s=e.mode,o=t.child;t=o.sibling;var l={mode:"hidden",children:n};return(s&2)===0&&e.child!==o?(n=e.child,n.childLanes=0,n.pendingProps=l,o=n.lastEffect,o!==null?(e.firstEffect=n.firstEffect,e.lastEffect=o,o.nextEffect=null):e.firstEffect=e.lastEffect=null):n=ti(o,l),t!==null?r=ti(t,r):(r=Qs(r,s,i,null),r.flags|=2),r.return=e,n.return=e,n.sibling=r,e.child=n,r}function av(t,e){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),F1(t.return,e)}function bh(t,e,n,r,i,s){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.lastEffect=s)}function lv(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Nt(t,e,r.children,n),r=ze.current,(r&2)!==0)r=r&1|2,e.flags|=64;else{if(t!==null&&(t.flags&64)!==0)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&av(t,n);else if(t.tag===19)av(t,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(je(ze,r),(e.mode&2)===0)e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&yu(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),bh(e,!1,i,n,s,e.lastEffect);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&yu(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}bh(e,!0,n,null,s,e.lastEffect);break;case"together":bh(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function Xn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Pl|=e.lanes,(n&e.childLanes)!==0){if(t!==null&&e.child!==t.child)throw Error(X(153));if(e.child!==null){for(t=e.child,n=ti(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ti(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}return null}var Z1,Rf,ew,tw;Z1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Rf=function(){};ew=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Vi(An.current);var s=null;switch(n){case"input":i=rf(t,i),r=rf(t,r),s=[];break;case"option":i=af(t,i),r=af(t,r),s=[];break;case"select":i=Fe({},i,{value:void 0}),r=Fe({},r,{value:void 0}),s=[];break;case"textarea":i=lf(t,i),r=lf(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=cu)}df(n,r);var o;n=null;for(d in i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var l=i[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Za.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in r){var c=r[d];if(l=i!=null?i[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Za.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Ne("scroll",t),s||l===c||(s=[])):typeof c=="object"&&c!==null&&c.$$typeof===Mp?c.toString():(s=s||[]).push(d,c))}n&&(s=s||[]).push("style",n);var d=s;(e.updateQueue=d)&&(e.flags|=4)}};tw=function(t,e,n,r){n!==r&&(e.flags|=4)};function ga(t,e){if(!Pn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function mC(t,e,n){var r=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Ft(e.type)&&du(),null;case 3:return io(),Le(Mt),Le(It),im(),r=e.stateNode,r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(wc(e)?e.flags|=4:r.hydrate||(e.flags|=256)),Rf(e),null;case 5:rm(e);var i=Vi(dl.current);if(n=e.type,t!==null&&e.stateNode!=null)ew(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=128);else{if(!r){if(e.stateNode===null)throw Error(X(166));return null}if(t=Vi(An.current),wc(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Or]=e,r[uu]=s,n){case"dialog":Ne("cancel",r),Ne("close",r);break;case"iframe":case"object":case"embed":Ne("load",r);break;case"video":case"audio":for(t=0;t<Sa.length;t++)Ne(Sa[t],r);break;case"source":Ne("error",r);break;case"img":case"image":case"link":Ne("error",r),Ne("load",r);break;case"details":Ne("toggle",r);break;case"input":ly(r,s),Ne("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ne("invalid",r);break;case"textarea":uy(r,s),Ne("invalid",r)}df(n,s),t=null;for(var o in s)s.hasOwnProperty(o)&&(i=s[o],o==="children"?typeof i=="string"?r.textContent!==i&&(t=["children",i]):typeof i=="number"&&r.textContent!==""+i&&(t=["children",""+i]):Za.hasOwnProperty(o)&&i!=null&&o==="onScroll"&&Ne("scroll",r));switch(n){case"input":pc(r),cy(r,s,!0);break;case"textarea":pc(r),dy(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=cu)}r=t,e.updateQueue=r,r!==null&&(e.flags|=4)}else{switch(o=i.nodeType===9?i:i.ownerDocument,t===cf.html&&(t=K_(n)),t===cf.html?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Or]=e,t[uu]=r,Z1(t,e,!1,!1),e.stateNode=t,o=hf(n,r),n){case"dialog":Ne("cancel",t),Ne("close",t),i=r;break;case"iframe":case"object":case"embed":Ne("load",t),i=r;break;case"video":case"audio":for(i=0;i<Sa.length;i++)Ne(Sa[i],t);i=r;break;case"source":Ne("error",t),i=r;break;case"img":case"image":case"link":Ne("error",t),Ne("load",t),i=r;break;case"details":Ne("toggle",t),i=r;break;case"input":ly(t,r),i=rf(t,r),Ne("invalid",t);break;case"option":i=af(t,r);break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Fe({},r,{value:void 0}),Ne("invalid",t);break;case"textarea":uy(t,r),i=lf(t,r),Ne("invalid",t);break;default:i=r}df(n,i);var l=i;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?Y_(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&X_(t,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&el(t,c):typeof c=="number"&&el(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Za.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Ne("scroll",t):c!=null&&Pp(t,s,c,o))}switch(n){case"input":pc(t),cy(t,r,!1);break;case"textarea":pc(t),dy(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Yr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?js(t,!!r.multiple,s,!1):r.defaultValue!=null&&js(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=cu)}x1(n,r)&&(e.flags|=4)}e.ref!==null&&(e.flags|=128)}return null;case 6:if(t&&e.stateNode!=null)tw(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(X(166));n=Vi(dl.current),Vi(An.current),wc(e)?(r=e.stateNode,n=e.memoizedProps,r[Or]=e,r.nodeValue!==n&&(e.flags|=4)):(r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Or]=e,e.stateNode=r)}return null;case 13:return Le(ze),r=e.memoizedState,(e.flags&64)!==0?(e.lanes=n,e):(r=r!==null,n=!1,t===null?e.memoizedProps.fallback!==void 0&&wc(e):n=t.memoizedState!==null,r&&!n&&(e.mode&2)!==0&&(t===null&&e.memoizedProps.unstable_avoidThisFallback!==!0||(ze.current&1)!==0?ht===0&&(ht=3):((ht===0||ht===3)&&(ht=4),kt===null||(Pl&134217727)===0&&(To&134217727)===0||Ks(kt,Tt))),(r||n)&&(e.flags|=4),null);case 4:return io(),Rf(e),t===null&&C1(e.stateNode.containerInfo),null;case 10:return tm(e),null;case 17:return Ft(e.type)&&du(),null;case 19:if(Le(ze),r=e.memoizedState,r===null)return null;if(s=(e.flags&64)!==0,o=r.rendering,o===null)if(s)ga(r,!1);else{if(ht!==0||t!==null&&(t.flags&64)!==0)for(t=e.child;t!==null;){if(o=yu(t),o!==null){for(e.flags|=64,ga(r,!1),s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),r.lastEffect===null&&(e.firstEffect=null),e.lastEffect=r.lastEffect,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return je(ze,ze.current&1|2),e.child}t=t.sibling}r.tail!==null&&St()>Ff&&(e.flags|=64,s=!0,ga(r,!1),e.lanes=33554432)}else{if(!s)if(t=yu(o),t!==null){if(e.flags|=64,s=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ga(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!Pn)return e=e.lastEffect=r.lastEffect,e!==null&&(e.nextEffect=null),null}else 2*St()-r.renderingStartTime>Ff&&n!==1073741824&&(e.flags|=64,s=!0,ga(r,!1),e.lanes=33554432);r.isBackwards?(o.sibling=e.child,e.child=o):(n=r.last,n!==null?n.sibling=o:e.child=o,r.last=o)}return r.tail!==null?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=e.lastEffect,r.renderingStartTime=St(),n.sibling=null,e=ze.current,je(ze,s?e&1|2:e&1),n):null;case 23:case 24:return pm(),t!==null&&t.memoizedState!==null!=(e.memoizedState!==null)&&r.mode!=="unstable-defer-without-hiding"&&(e.flags|=4),null}throw Error(X(156,e.tag))}function gC(t){switch(t.tag){case 1:Ft(t.type)&&du();var e=t.flags;return e&4096?(t.flags=e&-4097|64,t):null;case 3:if(io(),Le(Mt),Le(It),im(),e=t.flags,(e&64)!==0)throw Error(X(285));return t.flags=e&-4097|64,t;case 5:return rm(t),null;case 13:return Le(ze),e=t.flags,e&4096?(t.flags=e&-4097|64,t):null;case 19:return Le(ze),null;case 4:return io(),null;case 10:return tm(t),null;case 23:case 24:return pm(),null;default:return null}}function um(t,e){try{var n="",r=e;do n+=QT(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i}}function Nf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var yC=typeof WeakMap=="function"?WeakMap:Map;function nw(t,e,n){n=zr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Iu||(Iu=!0,Vf=r),Nf(t,e)},n}function rw(t,e,n){n=zr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return Nf(t,e),r(i)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){typeof r!="function"&&(xn===null?xn=new Set([this]):xn.add(this),Nf(t,e));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}var vC=typeof WeakSet=="function"?WeakSet:Set;function cv(t){var e=t.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(n){Hr(t,n)}else e.current=null}function _C(t,e){switch(e.tag){case 0:case 11:case 15:case 22:return;case 1:if(e.flags&256&&t!==null){var n=t.memoizedProps,r=t.memoizedState;t=e.stateNode,e=t.getSnapshotBeforeUpdate(e.elementType===e.type?n:fn(e.type,n),r),t.__reactInternalSnapshotBeforeUpdate=e}return;case 3:e.flags&256&&Yp(e.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(X(163))}function wC(t,e,n){switch(n.tag){case 0:case 11:case 15:case 22:if(e=n.updateQueue,e=e!==null?e.lastEffect:null,e!==null){t=e=e.next;do{if((t.tag&3)===3){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}if(e=n.updateQueue,e=e!==null?e.lastEffect:null,e!==null){t=e=e.next;do{var i=t;r=i.next,i=i.tag,(i&4)!==0&&(i&1)!==0&&(hw(n,t),xC(n,t)),t=r}while(t!==e)}return;case 1:t=n.stateNode,n.flags&4&&(e===null?t.componentDidMount():(r=n.elementType===n.type?e.memoizedProps:fn(n.type,e.memoizedProps),t.componentDidUpdate(r,e.memoizedState,t.__reactInternalSnapshotBeforeUpdate))),e=n.updateQueue,e!==null&&Wy(n,e,t);return;case 3:if(e=n.updateQueue,e!==null){if(t=null,n.child!==null)switch(n.child.tag){case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}Wy(n,e,t)}return;case 5:t=n.stateNode,e===null&&n.flags&4&&x1(n.type,n.memoizedProps)&&t.focus();return;case 6:return;case 4:return;case 12:return;case 13:n.memoizedState===null&&(n=n.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&a1(n))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(X(163))}function uv(t,e){for(var n=t;;){if(n.tag===5){var r=n.stateNode;if(e)r=r.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=i!=null&&i.hasOwnProperty("display")?i.display:null,r.style.display=Q_("display",i)}}else if(n.tag===6)n.stateNode.nodeValue=e?"":n.memoizedProps;else if((n.tag!==23&&n.tag!==24||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function dv(t,e){if(ji&&typeof ji.onCommitFiberUnmount=="function")try{ji.onCommitFiberUnmount(Jp,e)}catch{}switch(e.tag){case 0:case 11:case 14:case 15:case 22:if(t=e.updateQueue,t!==null&&(t=t.lastEffect,t!==null)){var n=t=t.next;do{var r=n,i=r.destroy;if(r=r.tag,i!==void 0)if((r&4)!==0)hw(e,n);else{r=e;try{i()}catch(s){Hr(r,s)}}n=n.next}while(n!==t)}break;case 1:if(cv(e),t=e.stateNode,typeof t.componentWillUnmount=="function")try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(s){Hr(e,s)}break;case 5:cv(e);break;case 4:iw(t,e)}}function hv(t){t.alternate=null,t.child=null,t.dependencies=null,t.firstEffect=null,t.lastEffect=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.return=null,t.updateQueue=null}function fv(t){return t.tag===5||t.tag===3||t.tag===4}function pv(t){e:{for(var e=t.return;e!==null;){if(fv(e))break e;e=e.return}throw Error(X(160))}var n=e;switch(e=n.stateNode,n.tag){case 5:var r=!1;break;case 3:e=e.containerInfo,r=!0;break;case 4:e=e.containerInfo,r=!0;break;default:throw Error(X(161))}n.flags&16&&(el(e,""),n.flags&=-17);e:t:for(n=t;;){for(;n.sibling===null;){if(n.return===null||fv(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2)){n=n.stateNode;break e}}r?Df(t,n,e):Of(t,n,e)}function Df(t,e,n){var r=t.tag,i=r===5||r===6;if(i)t=i?t.stateNode:t.stateNode.instance,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=cu));else if(r!==4&&(t=t.child,t!==null))for(Df(t,e,n),t=t.sibling;t!==null;)Df(t,e,n),t=t.sibling}function Of(t,e,n){var r=t.tag,i=r===5||r===6;if(i)t=i?t.stateNode:t.stateNode.instance,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Of(t,e,n),t=t.sibling;t!==null;)Of(t,e,n),t=t.sibling}function iw(t,e){for(var n=e,r=!1,i,s;;){if(!r){r=n.return;e:for(;;){if(r===null)throw Error(X(160));switch(i=r.stateNode,r.tag){case 5:s=!1;break e;case 3:i=i.containerInfo,s=!0;break e;case 4:i=i.containerInfo,s=!0;break e}r=r.return}r=!0}if(n.tag===5||n.tag===6){e:for(var o=t,l=n,c=l;;)if(dv(o,c),c.child!==null&&c.tag!==4)c.child.return=c,c=c.child;else{if(c===l)break e;for(;c.sibling===null;){if(c.return===null||c.return===l)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}s?(o=i,l=n.stateNode,o.nodeType===8?o.parentNode.removeChild(l):o.removeChild(l)):i.removeChild(n.stateNode)}else if(n.tag===4){if(n.child!==null){i=n.stateNode.containerInfo,s=!0,n.child.return=n,n=n.child;continue}}else if(dv(t,n),n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return,n.tag===4&&(r=!1)}n.sibling.return=n.return,n=n.sibling}}function kh(t,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var r=n=n.next;do(r.tag&3)===3&&(t=r.destroy,r.destroy=void 0,t!==void 0&&t()),r=r.next;while(r!==n)}return;case 1:return;case 5:if(n=e.stateNode,n!=null){r=e.memoizedProps;var i=t!==null?t.memoizedProps:r;t=e.type;var s=e.updateQueue;if(e.updateQueue=null,s!==null){for(n[uu]=r,t==="input"&&r.type==="radio"&&r.name!=null&&q_(n,r),hf(t,i),e=hf(t,r),i=0;i<s.length;i+=2){var o=s[i],l=s[i+1];o==="style"?Y_(n,l):o==="dangerouslySetInnerHTML"?X_(n,l):o==="children"?el(n,l):Pp(n,o,l,e)}switch(t){case"input":sf(n,r);break;case"textarea":G_(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,s=r.value,s!=null?js(n,!!r.multiple,s,!1):t!==!!r.multiple&&(r.defaultValue!=null?js(n,!!r.multiple,r.defaultValue,!0):js(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(e.stateNode===null)throw Error(X(162));e.stateNode.nodeValue=e.memoizedProps;return;case 3:n=e.stateNode,n.hydrate&&(n.hydrate=!1,a1(n.containerInfo));return;case 12:return;case 13:e.memoizedState!==null&&(fm=St(),uv(e.child,!0)),mv(e);return;case 19:mv(e);return;case 17:return;case 23:case 24:uv(e,e.memoizedState!==null);return}throw Error(X(163))}function mv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new vC),e.forEach(function(r){var i=RC.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function EC(t,e){return t!==null&&(t=t.memoizedState,t===null||t.dehydrated!==null)?(e=e.memoizedState,e!==null&&e.dehydrated===null):!1}var SC=Math.ceil,Tu=ns.ReactCurrentDispatcher,dm=ns.ReactCurrentOwner,de=0,kt=null,Je=null,Tt=0,Gi=0,Lf=ui(0),ht=0,cd=null,So=0,Pl=0,To=0,hm=0,Mf=null,fm=0,Ff=1/0;function Io(){Ff=St()+500}var ie=null,Iu=!1,Vf=null,xn=null,ei=!1,Ba=null,Ta=90,Uf=[],Bf=[],Jn=null,za=0,zf=null,zc=-1,Gn=0,jc=0,ja=null,$c=!1;function jt(){return(de&48)!==0?St():zc!==-1?zc:zc=St()}function $r(t){if(t=t.mode,(t&2)===0)return 1;if((t&4)===0)return ro()===99?1:2;if(Gn===0&&(Gn=So),cC.transition!==0){jc!==0&&(jc=Mf!==null?Mf.pendingLanes:0),t=Gn;var e=4186112&~jc;return e&=-e,e===0&&(t=4186112&~t,e=t&-t,e===0&&(e=8192)),e}return t=ro(),(de&4)!==0&&t===98?t=au(12,Gn):(t=hI(t),t=au(t,Gn)),t}function Wr(t,e,n){if(50<za)throw za=0,zf=null,Error(X(185));if(t=ud(t,e),t===null)return null;nd(t,e,n),t===kt&&(To|=e,ht===4&&Ks(t,Tt));var r=ro();e===1?(de&8)!==0&&(de&48)===0?jf(t):(rn(t,n),de===0&&(Io(),Un())):((de&4)===0||r!==98&&r!==99||(Jn===null?Jn=new Set([t]):Jn.add(t)),rn(t,n)),Mf=t}function ud(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}function rn(t,e){for(var n=t.callbackNode,r=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,o=t.pendingLanes;0<o;){var l=31-Jr(o),c=1<<l,d=s[l];if(d===-1){if((c&r)===0||(c&i)!==0){d=e,ks(c);var f=Pe;s[l]=10<=f?d+250:6<=f?d+5e3:-1}}else d<=e&&(t.expiredLanes|=c);o&=~c}if(r=il(t,t===kt?Tt:0),e=Pe,r===0)n!==null&&(n!==Sh&&Tf(n),t.callbackNode=null,t.callbackPriority=0);else{if(n!==null){if(t.callbackPriority===e)return;n!==Sh&&Tf(n)}e===15?(n=jf.bind(null,t),qn===null?(qn=[n],Bc=Zp(ad,M1)):qn.push(n),n=Sh):e===14?n=ll(99,jf.bind(null,t)):(n=fI(e),n=ll(n,sw.bind(null,t))),t.callbackPriority=e,t.callbackNode=n}}function sw(t){if(zc=-1,jc=Gn=0,(de&48)!==0)throw Error(X(327));var e=t.callbackNode;if(di()&&t.callbackNode!==e)return null;var n=il(t,t===kt?Tt:0);if(n===0)return null;var r=n,i=de;de|=16;var s=cw();(kt!==t||Tt!==r)&&(Io(),Xs(t,r));do try{CC();break}catch(l){lw(t,l)}while(1);if(em(),Tu.current=s,de=i,Je!==null?r=0:(kt=null,Tt=0,r=ht),(So&To)!==0)Xs(t,0);else if(r!==0){if(r===2&&(de|=64,t.hydrate&&(t.hydrate=!1,Yp(t.containerInfo)),n=p1(t),n!==0&&(r=Ia(t,n))),r===1)throw e=cd,Xs(t,0),Ks(t,n),rn(t,St()),e;switch(t.finishedWork=t.current.alternate,t.finishedLanes=n,r){case 0:case 1:throw Error(X(345));case 2:Ri(t);break;case 3:if(Ks(t,n),(n&62914560)===n&&(r=fm+500-St(),10<r)){if(il(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){jt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=My(Ri.bind(null,t),r);break}Ri(t);break;case 4:if(Ks(t,n),(n&4186112)===n)break;for(r=t.eventTimes,i=-1;0<n;){var o=31-Jr(n);s=1<<o,o=r[o],o>i&&(i=o),n&=~s}if(n=i,n=St()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*SC(n/1960))-n,10<n){t.timeoutHandle=My(Ri.bind(null,t),n);break}Ri(t);break;case 5:Ri(t);break;default:throw Error(X(329))}}return rn(t,St()),t.callbackNode===e?sw.bind(null,t):null}function Ks(t,e){for(e&=~hm,e&=~To,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Jr(e),r=1<<n;t[n]=-1,e&=~r}}function jf(t){if((de&48)!==0)throw Error(X(327));if(di(),t===kt&&(t.expiredLanes&Tt)!==0){var e=Tt,n=Ia(t,e);(So&To)!==0&&(e=il(t,e),n=Ia(t,e))}else e=il(t,0),n=Ia(t,e);if(t.tag!==0&&n===2&&(de|=64,t.hydrate&&(t.hydrate=!1,Yp(t.containerInfo)),e=p1(t),e!==0&&(n=Ia(t,e))),n===1)throw n=cd,Xs(t,0),Ks(t,e),rn(t,St()),n;return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ri(t),rn(t,St()),null}function TC(){if(Jn!==null){var t=Jn;Jn=null,t.forEach(function(e){e.expiredLanes|=24&e.pendingLanes,rn(e,St())})}Un()}function ow(t,e){var n=de;de|=1;try{return t(e)}finally{de=n,de===0&&(Io(),Un())}}function aw(t,e){var n=de;de&=-2,de|=8;try{return t(e)}finally{de=n,de===0&&(Io(),Un())}}function Sc(t,e){je(Lf,Gi),Gi|=e,So|=e}function pm(){Gi=Lf.current,Le(Lf)}function Xs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,rC(n)),Je!==null)for(n=Je.return;n!==null;){var r=n;switch(r.tag){case 1:r=r.type.childContextTypes,r!=null&&du();break;case 3:io(),Le(Mt),Le(It),im();break;case 5:rm(r);break;case 4:io();break;case 13:Le(ze);break;case 19:Le(ze);break;case 10:tm(r);break;case 23:case 24:pm()}n=n.return}kt=t,Je=ti(t.current,null),Tt=Gi=So=e,ht=0,cd=null,hm=To=Pl=0}function lw(t,e){do{var n=Je;try{if(em(),Va.current=Su,vu){for(var r=He.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}vu=!1}if(hl=0,ut=vt=He=null,Ua=!1,dm.current=null,n===null||n.return===null){ht=1,cd=e,Je=null;break}e:{var s=t,o=n.return,l=n,c=e;if(e=Tt,l.flags|=2048,l.firstEffect=l.lastEffect=null,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c;if((l.mode&2)===0){var f=l.alternate;f?(l.updateQueue=f.updateQueue,l.memoizedState=f.memoizedState,l.lanes=f.lanes):(l.updateQueue=null,l.memoizedState=null)}var v=(ze.current&1)!==0,m=o;do{var T;if(T=m.tag===13){var P=m.memoizedState;if(P!==null)T=P.dehydrated!==null;else{var R=m.memoizedProps;T=R.fallback===void 0?!1:R.unstable_avoidThisFallback!==!0?!0:!v}}if(T){var y=m.updateQueue;if(y===null){var E=new Set;E.add(d),m.updateQueue=E}else y.add(d);if((m.mode&2)===0){if(m.flags|=64,l.flags|=16384,l.flags&=-2981,l.tag===1)if(l.alternate===null)l.tag=17;else{var x=zr(-1,1);x.tag=2,jr(l,x)}l.lanes|=1;break e}c=void 0,l=e;var D=s.pingCache;if(D===null?(D=s.pingCache=new yC,c=new Set,D.set(d,c)):(c=D.get(d),c===void 0&&(c=new Set,D.set(d,c))),!c.has(l)){c.add(l);var O=PC.bind(null,s,d,l);d.then(O,O)}m.flags|=4096,m.lanes=e;break e}m=m.return}while(m!==null);c=Error((zs(l.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}ht!==5&&(ht=2),c=um(c,l),m=o;do{switch(m.tag){case 3:s=c,m.flags|=4096,e&=-e,m.lanes|=e;var z=nw(m,s,e);$y(m,z);break e;case 1:s=c;var V=m.type,k=m.stateNode;if((m.flags&64)===0&&(typeof V.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(xn===null||!xn.has(k)))){m.flags|=4096,e&=-e,m.lanes|=e;var _=rw(m,s,e);$y(m,_);break e}}m=m.return}while(m!==null)}dw(n)}catch(S){e=S,Je===n&&n!==null&&(Je=n=n.return);continue}break}while(1)}function cw(){var t=Tu.current;return Tu.current=Su,t===null?Su:t}function Ia(t,e){var n=de;de|=16;var r=cw();kt===t&&Tt===e||Xs(t,e);do try{IC();break}catch(i){lw(t,i)}while(1);if(em(),de=n,Tu.current=r,Je!==null)throw Error(X(261));return kt=null,Tt=0,ht}function IC(){for(;Je!==null;)uw(Je)}function CC(){for(;Je!==null&&!oC();)uw(Je)}function uw(t){var e=fw(t.alternate,t,Gi);t.memoizedProps=t.pendingProps,e===null?dw(t):Je=e,dm.current=null}function dw(t){var e=t;do{var n=e.alternate;if(t=e.return,(e.flags&2048)===0){if(n=mC(n,e,Gi),n!==null){Je=n;return}if(n=e,n.tag!==24&&n.tag!==23||n.memoizedState===null||(Gi&1073741824)!==0||(n.mode&4)===0){for(var r=0,i=n.child;i!==null;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}t!==null&&(t.flags&2048)===0&&(t.firstEffect===null&&(t.firstEffect=e.firstEffect),e.lastEffect!==null&&(t.lastEffect!==null&&(t.lastEffect.nextEffect=e.firstEffect),t.lastEffect=e.lastEffect),1<e.flags&&(t.lastEffect!==null?t.lastEffect.nextEffect=e:t.firstEffect=e,t.lastEffect=e))}else{if(n=gC(e),n!==null){n.flags&=2047,Je=n;return}t!==null&&(t.firstEffect=t.lastEffect=null,t.flags|=2048)}if(e=e.sibling,e!==null){Je=e;return}Je=e=t}while(e!==null);ht===0&&(ht=5)}function Ri(t){var e=ro();return qi(99,bC.bind(null,t,e)),null}function bC(t,e){do di();while(Ba!==null);if((de&48)!==0)throw Error(X(327));var n=t.finishedWork;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(X(177));t.callbackNode=null;var r=n.lanes|n.childLanes,i=r,s=t.pendingLanes&~i;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=i,t.mutableReadLanes&=i,t.entangledLanes&=i,i=t.entanglements;for(var o=t.eventTimes,l=t.expirationTimes;0<s;){var c=31-Jr(s),d=1<<c;i[c]=0,o[c]=-1,l[c]=-1,s&=~d}if(Jn!==null&&(r&24)===0&&Jn.has(t)&&Jn.delete(t),t===kt&&(Je=kt=null,Tt=0),1<n.flags?n.lastEffect!==null?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,r!==null){if(i=de,de|=32,dm.current=null,_h=Mc,o=Ay(),vf(o)){if("selectionStart"in o)l={start:o.selectionStart,end:o.selectionEnd};else e:if(l=(l=o.ownerDocument)&&l.defaultView||window,(d=l.getSelection&&l.getSelection())&&d.rangeCount!==0){l=d.anchorNode,s=d.anchorOffset,c=d.focusNode,d=d.focusOffset;try{l.nodeType,c.nodeType}catch{l=null;break e}var f=0,v=-1,m=-1,T=0,P=0,R=o,y=null;t:for(;;){for(var E;R!==l||s!==0&&R.nodeType!==3||(v=f+s),R!==c||d!==0&&R.nodeType!==3||(m=f+d),R.nodeType===3&&(f+=R.nodeValue.length),(E=R.firstChild)!==null;)y=R,R=E;for(;;){if(R===o)break t;if(y===l&&++T===s&&(v=f),y===c&&++P===d&&(m=f),(E=R.nextSibling)!==null)break;R=y,y=R.parentNode}R=E}l=v===-1||m===-1?null:{start:v,end:m}}else l=null;l=l||{start:0,end:0}}else l=null;wh={focusedElem:o,selectionRange:l},Mc=!1,ja=null,$c=!1,ie=r;do try{kC()}catch(S){if(ie===null)throw Error(X(330));Hr(ie,S),ie=ie.nextEffect}while(ie!==null);ja=null,ie=r;do try{for(o=t;ie!==null;){var x=ie.flags;if(x&16&&el(ie.stateNode,""),x&128){var D=ie.alternate;if(D!==null){var O=D.ref;O!==null&&(typeof O=="function"?O(null):O.current=null)}}switch(x&1038){case 2:pv(ie),ie.flags&=-3;break;case 6:pv(ie),ie.flags&=-3,kh(ie.alternate,ie);break;case 1024:ie.flags&=-1025;break;case 1028:ie.flags&=-1025,kh(ie.alternate,ie);break;case 4:kh(ie.alternate,ie);break;case 8:l=ie,iw(o,l);var z=l.alternate;hv(l),z!==null&&hv(z)}ie=ie.nextEffect}}catch(S){if(ie===null)throw Error(X(330));Hr(ie,S),ie=ie.nextEffect}while(ie!==null);if(O=wh,D=Ay(),x=O.focusedElem,o=O.selectionRange,D!==x&&x&&x.ownerDocument&&S1(x.ownerDocument.documentElement,x)){for(o!==null&&vf(x)&&(D=o.start,O=o.end,O===void 0&&(O=D),"selectionStart"in x?(x.selectionStart=D,x.selectionEnd=Math.min(O,x.value.length)):(O=(D=x.ownerDocument||document)&&D.defaultView||window,O.getSelection&&(O=O.getSelection(),l=x.textContent.length,z=Math.min(o.start,l),o=o.end===void 0?z:Math.min(o.end,l),!O.extend&&z>o&&(l=o,o=z,z=l),l=xy(x,z),s=xy(x,o),l&&s&&(O.rangeCount!==1||O.anchorNode!==l.node||O.anchorOffset!==l.offset||O.focusNode!==s.node||O.focusOffset!==s.offset)&&(D=D.createRange(),D.setStart(l.node,l.offset),O.removeAllRanges(),z>o?(O.addRange(D),O.extend(s.node,s.offset)):(D.setEnd(s.node,s.offset),O.addRange(D)))))),D=[],O=x;O=O.parentNode;)O.nodeType===1&&D.push({element:O,left:O.scrollLeft,top:O.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<D.length;x++)O=D[x],O.element.scrollLeft=O.left,O.element.scrollTop=O.top}Mc=!!_h,wh=_h=null,t.current=n,ie=r;do try{for(x=t;ie!==null;){var V=ie.flags;if(V&36&&wC(x,ie.alternate,ie),V&128){D=void 0;var k=ie.ref;if(k!==null){var _=ie.stateNode;switch(ie.tag){case 5:D=_;break;default:D=_}typeof k=="function"?k(D):k.current=D}}ie=ie.nextEffect}}catch(S){if(ie===null)throw Error(X(330));Hr(ie,S),ie=ie.nextEffect}while(ie!==null);ie=null,lC(),de=i}else t.current=n;if(ei)ei=!1,Ba=t,Ta=e;else for(ie=r;ie!==null;)e=ie.nextEffect,ie.nextEffect=null,ie.flags&8&&(V=ie,V.sibling=null,V.stateNode=null),ie=e;if(r=t.pendingLanes,r===0&&(xn=null),r===1?t===zf?za++:(za=0,zf=t):za=0,n=n.stateNode,ji&&typeof ji.onCommitFiberRoot=="function")try{ji.onCommitFiberRoot(Jp,n,void 0,(n.current.flags&64)===64)}catch{}if(rn(t,St()),Iu)throw Iu=!1,t=Vf,Vf=null,t;return(de&8)!==0||Un(),null}function kC(){for(;ie!==null;){var t=ie.alternate;$c||ja===null||((ie.flags&8)!==0?py(ie,ja)&&($c=!0):ie.tag===13&&EC(t,ie)&&py(ie,ja)&&($c=!0));var e=ie.flags;(e&256)!==0&&_C(t,ie),(e&512)===0||ei||(ei=!0,ll(97,function(){return di(),null})),ie=ie.nextEffect}}function di(){if(Ta!==90){var t=97<Ta?97:Ta;return Ta=90,qi(t,AC)}return!1}function xC(t,e){Uf.push(e,t),ei||(ei=!0,ll(97,function(){return di(),null}))}function hw(t,e){Bf.push(e,t),ei||(ei=!0,ll(97,function(){return di(),null}))}function AC(){if(Ba===null)return!1;var t=Ba;if(Ba=null,(de&48)!==0)throw Error(X(331));var e=de;de|=32;var n=Bf;Bf=[];for(var r=0;r<n.length;r+=2){var i=n[r],s=n[r+1],o=i.destroy;if(i.destroy=void 0,typeof o=="function")try{o()}catch(c){if(s===null)throw Error(X(330));Hr(s,c)}}for(n=Uf,Uf=[],r=0;r<n.length;r+=2){i=n[r],s=n[r+1];try{var l=i.create;i.destroy=l()}catch(c){if(s===null)throw Error(X(330));Hr(s,c)}}for(l=t.current.firstEffect;l!==null;)t=l.nextEffect,l.nextEffect=null,l.flags&8&&(l.sibling=null,l.stateNode=null),l=t;return de=e,Un(),!0}function gv(t,e,n){e=um(n,e),e=nw(t,e,1),jr(t,e),e=jt(),t=ud(t,1),t!==null&&(nd(t,1,e),rn(t,e))}function Hr(t,e){if(t.tag===3)gv(t,t,e);else for(var n=t.return;n!==null;){if(n.tag===3){gv(n,t,e);break}else if(n.tag===1){var r=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(xn===null||!xn.has(r))){t=um(e,t);var i=rw(n,t,1);if(jr(n,i),i=jt(),n=ud(n,1),n!==null)nd(n,1,i),rn(n,i);else if(typeof r.componentDidCatch=="function"&&(xn===null||!xn.has(r)))try{r.componentDidCatch(e,t)}catch{}break}}n=n.return}}function PC(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=jt(),t.pingedLanes|=t.suspendedLanes&n,kt===t&&(Tt&n)===n&&(ht===4||ht===3&&(Tt&62914560)===Tt&&500>St()-fm?Xs(t,0):hm|=n),rn(t,e)}function RC(t,e){var n=t.stateNode;n!==null&&n.delete(e),e=0,e===0&&(e=t.mode,(e&2)===0?e=1:(e&4)===0?e=ro()===99?1:2:(Gn===0&&(Gn=So),e=xs(62914560&~Gn),e===0&&(e=4194304))),n=jt(),t=ud(t,e),t!==null&&(nd(t,e,n),rn(t,n))}var fw;fw=function(t,e,n){var r=e.lanes;if(t!==null)if(t.memoizedProps!==e.pendingProps||Mt.current)pn=!0;else if((n&r)!==0)pn=(t.flags&16384)!==0;else{switch(pn=!1,e.tag){case 3:nv(e),Ih();break;case 5:Gy(e);break;case 1:Ft(e.type)&&Uc(e);break;case 4:bf(e,e.stateNode.containerInfo);break;case 10:r=e.memoizedProps.value;var i=e.type._context;je(hu,i._currentValue),i._currentValue=r;break;case 13:if(e.memoizedState!==null)return(n&e.child.childLanes)!==0?rv(t,e,n):(je(ze,ze.current&1),e=Xn(t,e,n),e!==null?e.sibling:null);je(ze,ze.current&1);break;case 19:if(r=(n&e.childLanes)!==0,(t.flags&64)!==0){if(r)return lv(t,e,n);e.flags|=64}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),je(ze,ze.current),r)break;return null;case 23:case 24:return e.lanes=0,Ch(t,e,n)}return Xn(t,e,n)}else pn=!1;switch(e.lanes=0,e.tag){case 2:if(r=e.type,t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,i=no(e,It.current),qs(e,n),i=om(null,e,r,t,i,n),e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ft(r)){var s=!0;Uc(e)}else s=!1;e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,nm(e);var o=r.getDerivedStateFromProps;typeof o=="function"&&mu(e,r,o,t),i.updater=ld,e.stateNode=i,i._reactInternals=e,Cf(e,r,t,n),e=Pf(null,e,r,!0,s,n)}else e.tag=0,Nt(null,e,i,n),e=e.child;return e;case 16:i=e.elementType;e:{switch(t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=DC(i),t=fn(i,t),s){case 0:e=Af(null,e,i,t,n);break e;case 1:e=tv(null,e,i,t,n);break e;case 11:e=Zy(null,e,i,t,n);break e;case 14:e=ev(null,e,i,fn(i.type,t),r,n);break e}throw Error(X(306,i,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:fn(r,i),Af(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:fn(r,i),tv(t,e,r,i,n);case 3:if(nv(e),r=e.updateQueue,t===null||r===null)throw Error(X(282));if(r=e.pendingProps,i=e.memoizedState,i=i!==null?i.element:null,V1(t,e),cl(e,r,null,n),r=e.memoizedState.element,r===i)Ih(),e=Xn(t,e,n);else{if(i=e.stateNode,(s=i.hydrate)&&(Lr=Hs(e.stateNode.containerInfo.firstChild),Kn=e,s=Pn=!0),s){if(t=i.mutableSourceEagerHydrationData,t!=null)for(i=0;i<t.length;i+=2)s=t[i],s._workInProgressVersionPrimary=t[i+1],Gs.push(s);for(n=j1(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|1024,n=n.sibling}else Nt(t,e,r,n),Ih();e=e.child}return e;case 5:return Gy(e),t===null&&kf(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Ef(r,i)?o=null:s!==null&&Ef(r,s)&&(e.flags|=16),J1(t,e),Nt(t,e,o,n),e.child;case 6:return t===null&&kf(e),null;case 13:return rv(t,e,n);case 4:return bf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=gu(e,null,r,n):Nt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:fn(r,i),Zy(t,e,r,i,n);case 7:return Nt(t,e,e.pendingProps,n),e.child;case 8:return Nt(t,e,e.pendingProps.children,n),e.child;case 12:return Nt(t,e,e.pendingProps.children,n),e.child;case 10:e:{r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value;var l=e.type._context;if(je(hu,l._currentValue),l._currentValue=s,o!==null)if(l=o.value,s=Yt(l,s)?0:(typeof r._calculateChangedBits=="function"?r._calculateChangedBits(l,s):1073741823)|0,s===0){if(o.children===i.children&&!Mt.current){e=Xn(t,e,n);break e}}else for(l=e.child,l!==null&&(l.return=e);l!==null;){var c=l.dependencies;if(c!==null){o=l.child;for(var d=c.firstContext;d!==null;){if(d.context===r&&(d.observedBits&s)!==0){l.tag===1&&(d=zr(-1,n&-n),d.tag=2,jr(l,d)),l.lanes|=n,d=l.alternate,d!==null&&(d.lanes|=n),F1(l.return,n),c.lanes|=n;break}d=d.next}}else o=l.tag===10&&l.type===e.type?null:l.child;if(o!==null)o.return=l;else for(o=l;o!==null;){if(o===e){o=null;break}if(l=o.sibling,l!==null){l.return=o.return,o=l;break}o=o.return}l=o}Nt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,s=e.pendingProps,r=s.children,qs(e,n),i=nn(i,s.unstable_observedBits),r=r(i),e.flags|=1,Nt(t,e,r,n),e.child;case 14:return i=e.type,s=fn(i,e.pendingProps),s=fn(i.type,s),ev(t,e,i,s,r,n);case 15:return Y1(t,e,e.type,e.pendingProps,r,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:fn(r,i),t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,Ft(r)?(t=!0,Uc(e)):t=!1,qs(e,n),B1(e,r,i),Cf(e,r,i,n),Pf(null,e,r,!0,t,n);case 19:return lv(t,e,n);case 23:return Ch(t,e,n);case 24:return Ch(t,e,n)}throw Error(X(156,e.tag))};function NC(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Jt(t,e,n,r){return new NC(t,e,n,r)}function mm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function DC(t){if(typeof t=="function")return mm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Zu)return 11;if(t===ed)return 14}return 2}function ti(t,e){var n=t.alternate;return n===null?(n=Jt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Wc(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")mm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case xr:return Qs(n.children,i,s,e);case $_:o=8,i|=16;break;case Rp:o=8,i|=1;break;case Ra:return t=Jt(12,n,e,i|8),t.elementType=Ra,t.type=Ra,t.lanes=s,t;case Na:return t=Jt(13,n,e,i),t.type=Na,t.elementType=Na,t.lanes=s,t;case ru:return t=Jt(19,n,e,i),t.elementType=ru,t.lanes=s,t;case Fp:return gm(n,i,s,e);case nf:return t=Jt(24,n,e,i),t.elementType=nf,t.lanes=s,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Np:o=10;break e;case Dp:o=9;break e;case Zu:o=11;break e;case ed:o=14;break e;case Op:o=16,r=null;break e;case Lp:o=22;break e}throw Error(X(130,t==null?t:typeof t,""))}return e=Jt(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Qs(t,e,n,r){return t=Jt(7,t,r,e),t.lanes=n,t}function gm(t,e,n,r){return t=Jt(23,t,r,e),t.elementType=Fp,t.lanes=n,t}function xh(t,e,n){return t=Jt(6,t,null,e),t.lanes=n,t}function Ah(t,e,n){return e=Jt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function OC(t,e,n){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=hh(0),this.expirationTimes=hh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hh(0),this.mutableSourceEagerHydrationData=null}function LC(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Li,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Cu(t,e,n,r){var i=e.current,s=jt(),o=$r(i);e:if(n){n=n._reactInternals;t:{if(rs(n)!==n||n.tag!==1)throw Error(X(170));var l=n;do{switch(l.tag){case 3:l=l.stateNode.context;break t;case 1:if(Ft(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break t}}l=l.return}while(l!==null);throw Error(X(171))}if(n.tag===1){var c=n.type;if(Ft(c)){n=P1(n,c,l);break e}}n=l}else n=Zr;return e.context===null?e.context=n:e.pendingContext=n,e=zr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),jr(i,e),Wr(i,o,s),o}function Ph(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function yv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ym(t,e){yv(t,e),(t=t.alternate)&&yv(t,e)}function MC(){return null}function vm(t,e,n){var r=n!=null&&n.hydrationOptions!=null&&n.hydrationOptions.mutableSources||null;if(n=new OC(t,e,n!=null&&n.hydrate===!0),e=Jt(3,null,null,e===2?7:e===1?3:0),n.current=e,e.stateNode=n,nm(e),t[Eo]=n.current,C1(t.nodeType===8?t.parentNode:t),r)for(t=0;t<r.length;t++){e=r[t];var i=e._getVersion;i=i(e._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[e,i]:n.mutableSourceEagerHydrationData.push(e,i)}this._internalRoot=n}vm.prototype.render=function(t){Cu(t,this._internalRoot,null,null)};vm.prototype.unmount=function(){var t=this._internalRoot,e=t.containerInfo;Cu(null,t,null,function(){e[Eo]=null})};function Rl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function FC(t,e){if(e||(e=t?t.nodeType===9?t.documentElement:t.firstChild:null,e=!(!e||e.nodeType!==1||!e.hasAttribute("data-reactroot"))),!e)for(var n;n=t.lastChild;)t.removeChild(n);return new vm(t,0,e?{hydrate:!0}:void 0)}function dd(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s._internalRoot;if(typeof i=="function"){var l=i;i=function(){var d=Ph(o);l.call(d)}}Cu(e,o,t,i)}else{if(s=n._reactRootContainer=FC(n,r),o=s._internalRoot,typeof i=="function"){var c=i;i=function(){var d=Ph(o);c.call(d)}}aw(function(){Cu(e,o,t,i)})}return Ph(o)}i1=function(t){if(t.tag===13){var e=jt();Wr(t,4,e),ym(t,4)}};jp=function(t){if(t.tag===13){var e=jt();Wr(t,67108864,e),ym(t,67108864)}};s1=function(t){if(t.tag===13){var e=jt(),n=$r(t);Wr(t,n,e),ym(t,n)}};o1=function(t,e){return e()};ff=function(t,e,n){switch(e){case"input":if(sf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=od(r);if(!i)throw Error(X(90));H_(r),sf(r,i)}}}break;case"textarea":G_(t,n);break;case"select":e=n.value,e!=null&&js(t,!!n.multiple,e,!1)}};Up=ow;e1=function(t,e,n,r,i){var s=de;de|=4;try{return qi(98,t.bind(null,e,n,r,i))}finally{de=s,de===0&&(Io(),Un())}};Bp=function(){(de&49)===0&&(TC(),di())};t1=function(t,e){var n=de;de|=2;try{return t(e)}finally{de=n,de===0&&(Io(),Un())}};function pw(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Rl(e))throw Error(X(200));return LC(t,e,null,n)}var VC={Events:[xl,Fs,od,J_,Z_,di,{current:!1}]},ya={findFiberByHostInstance:Fi,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},UC={bundleType:ya.bundleType,version:ya.version,rendererPackageName:ya.rendererPackageName,rendererConfig:ya.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ns.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=r1(t),t===null?null:t.stateNode},findFiberByHostInstance:ya.findFiberByHostInstance||MC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var Tc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tc.isDisabled&&Tc.supportsFiber)try{Jp=Tc.inject(UC),ji=Tc}catch{}}on.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=VC;on.createPortal=pw;on.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(X(188)):Error(X(268,Object.keys(t)));return t=r1(e),t=t===null?null:t.stateNode,t};on.flushSync=function(t,e){var n=de;if((n&48)!==0)return t(e);de|=1;try{if(t)return qi(99,t.bind(null,e))}finally{de=n,Un()}};on.hydrate=function(t,e,n){if(!Rl(e))throw Error(X(200));return dd(null,t,e,!0,n)};on.render=function(t,e,n){if(!Rl(e))throw Error(X(200));return dd(null,t,e,!1,n)};on.unmountComponentAtNode=function(t){if(!Rl(t))throw Error(X(40));return t._reactRootContainer?(aw(function(){dd(null,null,t,!1,function(){t._reactRootContainer=null,t[Eo]=null})}),!0):!1};on.unstable_batchedUpdates=ow;on.unstable_createPortal=function(t,e){return pw(t,e,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};on.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Rl(n))throw Error(X(200));if(t==null||t._reactInternals===void 0)throw Error(X(38));return dd(t,e,n,!1,r)};on.version="17.0.2";function mw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(mw)}catch(t){console.error(t)}}mw(),U_.exports=on;var BC=U_.exports;function $f(t,e){return $f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},$f(t,e)}function Fn(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,$f(t,e)}var gw={exports:{}},zC="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",jC=zC,$C=jC;function yw(){}function vw(){}vw.resetWarningCache=yw;var WC=function(){function t(r,i,s,o,l,c){if(c!==$C){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:vw,resetWarningCache:yw};return n.PropTypes=n,n};gw.exports=WC();var vv=gw.exports;function xt(){return xt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xt.apply(null,arguments)}function Ic(t){return t.charAt(0)==="/"}function Rh(t,e){for(var n=e,r=n+1,i=t.length;r<i;n+=1,r+=1)t[n]=t[r];t.pop()}function HC(t,e){e===void 0&&(e="");var n=t&&t.split("/")||[],r=e&&e.split("/")||[],i=t&&Ic(t),s=e&&Ic(e),o=i||s;if(t&&Ic(t)?r=n:n.length&&(r.pop(),r=r.concat(n)),!r.length)return"/";var l;if(r.length){var c=r[r.length-1];l=c==="."||c===".."||c===""}else l=!1;for(var d=0,f=r.length;f>=0;f--){var v=r[f];v==="."?Rh(r,f):v===".."?(Rh(r,f),d++):d&&(Rh(r,f),d--)}if(!o)for(;d--;d)r.unshift("..");o&&r[0]!==""&&(!r[0]||!Ic(r[0]))&&r.unshift("");var m=r.join("/");return l&&m.substr(-1)!=="/"&&(m+="/"),m}var qC=!0,Nh="Invariant failed";function ss(t,e){if(!t){if(qC)throw new Error(Nh);var n=typeof e=="function"?e():e,r=n?"".concat(Nh,": ").concat(n):Nh;throw new Error(r)}}function $a(t){return t.charAt(0)==="/"?t:"/"+t}function _v(t){return t.charAt(0)==="/"?t.substr(1):t}function GC(t,e){return t.toLowerCase().indexOf(e.toLowerCase())===0&&"/?#".indexOf(t.charAt(e.length))!==-1}function _w(t,e){return GC(t,e)?t.substr(e.length):t}function ww(t){return t.charAt(t.length-1)==="/"?t.slice(0,-1):t}function KC(t){var e=t||"/",n="",r="",i=e.indexOf("#");i!==-1&&(r=e.substr(i),e=e.substr(0,i));var s=e.indexOf("?");return s!==-1&&(n=e.substr(s),e=e.substr(0,s)),{pathname:e,search:n==="?"?"":n,hash:r==="#"?"":r}}function Dt(t){var e=t.pathname,n=t.search,r=t.hash,i=e||"/";return n&&n!=="?"&&(i+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(i+=r.charAt(0)==="#"?r:"#"+r),i}function Bt(t,e,n,r){var i;typeof t=="string"?(i=KC(t),i.state=e):(i=xt({},t),i.pathname===void 0&&(i.pathname=""),i.search?i.search.charAt(0)!=="?"&&(i.search="?"+i.search):i.search="",i.hash?i.hash.charAt(0)!=="#"&&(i.hash="#"+i.hash):i.hash="",e!==void 0&&i.state===void 0&&(i.state=e));try{i.pathname=decodeURI(i.pathname)}catch(s){throw s instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):s}return n&&(i.key=n),r?i.pathname?i.pathname.charAt(0)!=="/"&&(i.pathname=HC(i.pathname,r.pathname)):i.pathname=r.pathname:i.pathname||(i.pathname="/"),i}function _m(){var t=null;function e(o){return t=o,function(){t===o&&(t=null)}}function n(o,l,c,d){if(t!=null){var f=typeof t=="function"?t(o,l):t;typeof f=="string"?typeof c=="function"?c(f,d):d(!0):d(f!==!1)}else d(!0)}var r=[];function i(o){var l=!0;function c(){l&&o.apply(void 0,arguments)}return r.push(c),function(){l=!1,r=r.filter(function(d){return d!==c})}}function s(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];r.forEach(function(d){return d.apply(void 0,l)})}return{setPrompt:e,confirmTransitionTo:n,appendListener:i,notifyListeners:s}}var Ew=!!(typeof window!="undefined"&&window.document&&window.document.createElement);function Sw(t,e){e(window.confirm(t))}function XC(){var t=window.navigator.userAgent;return(t.indexOf("Android 2.")!==-1||t.indexOf("Android 4.0")!==-1)&&t.indexOf("Mobile Safari")!==-1&&t.indexOf("Chrome")===-1&&t.indexOf("Windows Phone")===-1?!1:window.history&&"pushState"in window.history}function QC(){return window.navigator.userAgent.indexOf("Trident")===-1}function YC(){return window.navigator.userAgent.indexOf("Firefox")===-1}function JC(t){return t.state===void 0&&navigator.userAgent.indexOf("CriOS")===-1}var wv="popstate",Ev="hashchange";function Sv(){try{return window.history.state||{}}catch{return{}}}function ZC(t){t===void 0&&(t={}),Ew||ss(!1);var e=window.history,n=XC(),r=!QC(),i=t,s=i.forceRefresh,o=s===void 0?!1:s,l=i.getUserConfirmation,c=l===void 0?Sw:l,d=i.keyLength,f=d===void 0?6:d,v=t.basename?ww($a(t.basename)):"";function m($){var H=$||{},M=H.key,B=H.state,Y=window.location,ne=Y.pathname,ue=Y.search,ge=Y.hash,Ee=ne+ue+ge;return v&&(Ee=_w(Ee,v)),Bt(Ee,B,M)}function T(){return Math.random().toString(36).substr(2,f)}var P=_m();function R($){xt(te,$),te.length=e.length,P.notifyListeners(te.location,te.action)}function y($){JC($)||D(m($.state))}function E(){D(m(Sv()))}var x=!1;function D($){if(x)x=!1,R();else{var H="POP";P.confirmTransitionTo($,H,c,function(M){M?R({action:H,location:$}):O($)})}}function O($){var H=te.location,M=V.indexOf(H.key);M===-1&&(M=0);var B=V.indexOf($.key);B===-1&&(B=0);var Y=M-B;Y&&(x=!0,I(Y))}var z=m(Sv()),V=[z.key];function k($){return v+Dt($)}function _($,H){var M="PUSH",B=Bt($,H,T(),te.location);P.confirmTransitionTo(B,M,c,function(Y){if(!!Y){var ne=k(B),ue=B.key,ge=B.state;if(n)if(e.pushState({key:ue,state:ge},null,ne),o)window.location.href=ne;else{var Ee=V.indexOf(te.location.key),Ae=V.slice(0,Ee+1);Ae.push(B.key),V=Ae,R({action:M,location:B})}else window.location.href=ne}})}function S($,H){var M="REPLACE",B=Bt($,H,T(),te.location);P.confirmTransitionTo(B,M,c,function(Y){if(!!Y){var ne=k(B),ue=B.key,ge=B.state;if(n)if(e.replaceState({key:ue,state:ge},null,ne),o)window.location.replace(ne);else{var Ee=V.indexOf(te.location.key);Ee!==-1&&(V[Ee]=B.key),R({action:M,location:B})}else window.location.replace(ne)}})}function I($){e.go($)}function b(){I(-1)}function N(){I(1)}var w=0;function Q($){w+=$,w===1&&$===1?(window.addEventListener(wv,y),r&&window.addEventListener(Ev,E)):w===0&&(window.removeEventListener(wv,y),r&&window.removeEventListener(Ev,E))}var J=!1;function se($){$===void 0&&($=!1);var H=P.setPrompt($);return J||(Q(1),J=!0),function(){return J&&(J=!1,Q(-1)),H()}}function q($){var H=P.appendListener($);return Q(1),function(){Q(-1),H()}}var te={length:e.length,action:"POP",location:z,createHref:k,push:_,replace:S,go:I,goBack:b,goForward:N,block:se,listen:q};return te}var Tv="hashchange",eb={hashbang:{encodePath:function(e){return e.charAt(0)==="!"?e:"!/"+_v(e)},decodePath:function(e){return e.charAt(0)==="!"?e.substr(1):e}},noslash:{encodePath:_v,decodePath:$a},slash:{encodePath:$a,decodePath:$a}};function Tw(t){var e=t.indexOf("#");return e===-1?t:t.slice(0,e)}function va(){var t=window.location.href,e=t.indexOf("#");return e===-1?"":t.substring(e+1)}function tb(t){window.location.hash=t}function Dh(t){window.location.replace(Tw(window.location.href)+"#"+t)}function nb(t){t===void 0&&(t={}),Ew||ss(!1);var e=window.history;YC();var n=t,r=n.getUserConfirmation,i=r===void 0?Sw:r,s=n.hashType,o=s===void 0?"slash":s,l=t.basename?ww($a(t.basename)):"",c=eb[o],d=c.encodePath,f=c.decodePath;function v(){var H=f(va());return l&&(H=_w(H,l)),Bt(H)}var m=_m();function T(H){xt($,H),$.length=e.length,m.notifyListeners($.location,$.action)}var P=!1,R=null;function y(H,M){return H.pathname===M.pathname&&H.search===M.search&&H.hash===M.hash}function E(){var H=va(),M=d(H);if(H!==M)Dh(M);else{var B=v(),Y=$.location;if(!P&&y(Y,B)||R===Dt(B))return;R=null,x(B)}}function x(H){if(P)P=!1,T();else{var M="POP";m.confirmTransitionTo(H,M,i,function(B){B?T({action:M,location:H}):D(H)})}}function D(H){var M=$.location,B=k.lastIndexOf(Dt(M));B===-1&&(B=0);var Y=k.lastIndexOf(Dt(H));Y===-1&&(Y=0);var ne=B-Y;ne&&(P=!0,b(ne))}var O=va(),z=d(O);O!==z&&Dh(z);var V=v(),k=[Dt(V)];function _(H){var M=document.querySelector("base"),B="";return M&&M.getAttribute("href")&&(B=Tw(window.location.href)),B+"#"+d(l+Dt(H))}function S(H,M){var B="PUSH",Y=Bt(H,void 0,void 0,$.location);m.confirmTransitionTo(Y,B,i,function(ne){if(!!ne){var ue=Dt(Y),ge=d(l+ue),Ee=va()!==ge;if(Ee){R=ue,tb(ge);var Ae=k.lastIndexOf(Dt($.location)),ot=k.slice(0,Ae+1);ot.push(ue),k=ot,T({action:B,location:Y})}else T()}})}function I(H,M){var B="REPLACE",Y=Bt(H,void 0,void 0,$.location);m.confirmTransitionTo(Y,B,i,function(ne){if(!!ne){var ue=Dt(Y),ge=d(l+ue),Ee=va()!==ge;Ee&&(R=ue,Dh(ge));var Ae=k.indexOf(Dt($.location));Ae!==-1&&(k[Ae]=ue),T({action:B,location:Y})}})}function b(H){e.go(H)}function N(){b(-1)}function w(){b(1)}var Q=0;function J(H){Q+=H,Q===1&&H===1?window.addEventListener(Tv,E):Q===0&&window.removeEventListener(Tv,E)}var se=!1;function q(H){H===void 0&&(H=!1);var M=m.setPrompt(H);return se||(J(1),se=!0),function(){return se&&(se=!1,J(-1)),M()}}function te(H){var M=m.appendListener(H);return J(1),function(){J(-1),M()}}var $={length:e.length,action:"POP",location:V,createHref:_,push:S,replace:I,go:b,goBack:N,goForward:w,block:q,listen:te};return $}function Iv(t,e,n){return Math.min(Math.max(t,e),n)}function rb(t){t===void 0&&(t={});var e=t,n=e.getUserConfirmation,r=e.initialEntries,i=r===void 0?["/"]:r,s=e.initialIndex,o=s===void 0?0:s,l=e.keyLength,c=l===void 0?6:l,d=_m();function f(_){xt(k,_),k.length=k.entries.length,d.notifyListeners(k.location,k.action)}function v(){return Math.random().toString(36).substr(2,c)}var m=Iv(o,0,i.length-1),T=i.map(function(_){return typeof _=="string"?Bt(_,void 0,v()):Bt(_,void 0,_.key||v())}),P=Dt;function R(_,S){var I="PUSH",b=Bt(_,S,v(),k.location);d.confirmTransitionTo(b,I,n,function(N){if(!!N){var w=k.index,Q=w+1,J=k.entries.slice(0);J.length>Q?J.splice(Q,J.length-Q,b):J.push(b),f({action:I,location:b,index:Q,entries:J})}})}function y(_,S){var I="REPLACE",b=Bt(_,S,v(),k.location);d.confirmTransitionTo(b,I,n,function(N){!N||(k.entries[k.index]=b,f({action:I,location:b}))})}function E(_){var S=Iv(k.index+_,0,k.entries.length-1),I="POP",b=k.entries[S];d.confirmTransitionTo(b,I,n,function(N){N?f({action:I,location:b,index:S}):f()})}function x(){E(-1)}function D(){E(1)}function O(_){var S=k.index+_;return S>=0&&S<k.entries.length}function z(_){return _===void 0&&(_=!1),d.setPrompt(_)}function V(_){return d.appendListener(_)}var k={length:T.length,action:"POP",location:T[m],index:m,entries:T,createHref:P,push:R,replace:y,go:E,goBack:x,goForward:D,canGo:O,block:z,listen:V};return k}var Co={exports:{}},ib=Array.isArray||function(t){return Object.prototype.toString.call(t)=="[object Array]"},bu=ib;Co.exports=bw;Co.exports.parse=wm;Co.exports.compile=ab;Co.exports.tokensToFunction=Iw;Co.exports.tokensToRegExp=Cw;var sb=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function wm(t,e){for(var n=[],r=0,i=0,s="",o=e&&e.delimiter||"/",l;(l=sb.exec(t))!=null;){var c=l[0],d=l[1],f=l.index;if(s+=t.slice(i,f),i=f+c.length,d){s+=d[1];continue}var v=t[i],m=l[2],T=l[3],P=l[4],R=l[5],y=l[6],E=l[7];s&&(n.push(s),s="");var x=m!=null&&v!=null&&v!==m,D=y==="+"||y==="*",O=y==="?"||y==="*",z=m||o,V=P||R,k=m||(typeof n[n.length-1]=="string"?n[n.length-1]:"");n.push({name:T||r++,prefix:m||"",delimiter:z,optional:O,repeat:D,partial:x,asterisk:!!E,pattern:V?ub(V):E?".*":ob(z,k)})}return i<t.length&&(s+=t.substr(i)),s&&n.push(s),n}function ob(t,e){return!e||e.indexOf(t)>-1?"[^"+Bi(t)+"]+?":Bi(e)+"|(?:(?!"+Bi(e)+")[^"+Bi(t)+"])+?"}function ab(t,e){return Iw(wm(t,e),e)}function lb(t){return encodeURI(t).replace(/[\/?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function cb(t){return encodeURI(t).replace(/[?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function Iw(t,e){for(var n=new Array(t.length),r=0;r<t.length;r++)typeof t[r]=="object"&&(n[r]=new RegExp("^(?:"+t[r].pattern+")$",Sm(e)));return function(i,s){for(var o="",l=i||{},c=s||{},d=c.pretty?lb:encodeURIComponent,f=0;f<t.length;f++){var v=t[f];if(typeof v=="string"){o+=v;continue}var m=l[v.name],T;if(m==null)if(v.optional){v.partial&&(o+=v.prefix);continue}else throw new TypeError('Expected "'+v.name+'" to be defined');if(bu(m)){if(!v.repeat)throw new TypeError('Expected "'+v.name+'" to not repeat, but received `'+JSON.stringify(m)+"`");if(m.length===0){if(v.optional)continue;throw new TypeError('Expected "'+v.name+'" to not be empty')}for(var P=0;P<m.length;P++){if(T=d(m[P]),!n[f].test(T))throw new TypeError('Expected all "'+v.name+'" to match "'+v.pattern+'", but received `'+JSON.stringify(T)+"`");o+=(P===0?v.prefix:v.delimiter)+T}continue}if(T=v.asterisk?cb(m):d(m),!n[f].test(T))throw new TypeError('Expected "'+v.name+'" to match "'+v.pattern+'", but received "'+T+'"');o+=v.prefix+T}return o}}function Bi(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function ub(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function Em(t,e){return t.keys=e,t}function Sm(t){return t&&t.sensitive?"":"i"}function db(t,e){var n=t.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)e.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return Em(t,e)}function hb(t,e,n){for(var r=[],i=0;i<t.length;i++)r.push(bw(t[i],e,n).source);var s=new RegExp("(?:"+r.join("|")+")",Sm(n));return Em(s,e)}function fb(t,e,n){return Cw(wm(t,n),e,n)}function Cw(t,e,n){bu(e)||(n=e||n,e=[]),n=n||{};for(var r=n.strict,i=n.end!==!1,s="",o=0;o<t.length;o++){var l=t[o];if(typeof l=="string")s+=Bi(l);else{var c=Bi(l.prefix),d="(?:"+l.pattern+")";e.push(l),l.repeat&&(d+="(?:"+c+d+")*"),l.optional?l.partial?d=c+"("+d+")?":d="(?:"+c+"("+d+"))?":d=c+"("+d+")",s+=d}}var f=Bi(n.delimiter||"/"),v=s.slice(-f.length)===f;return r||(s=(v?s.slice(0,-f.length):s)+"(?:"+f+"(?=$))?"),i?s+="$":s+=r&&v?"":"(?="+f+"|$)",Em(new RegExp("^"+s,Sm(n)),e)}function bw(t,e,n){return bu(e)||(n=e||n,e=[]),n=n||{},t instanceof RegExp?db(t,e):bu(t)?hb(t,e,n):fb(t,e,n)}var pb=Co.exports,kw={exports:{}},Ce={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var st=typeof Symbol=="function"&&Symbol.for,Tm=st?Symbol.for("react.element"):60103,Im=st?Symbol.for("react.portal"):60106,hd=st?Symbol.for("react.fragment"):60107,fd=st?Symbol.for("react.strict_mode"):60108,pd=st?Symbol.for("react.profiler"):60114,md=st?Symbol.for("react.provider"):60109,gd=st?Symbol.for("react.context"):60110,Cm=st?Symbol.for("react.async_mode"):60111,yd=st?Symbol.for("react.concurrent_mode"):60111,vd=st?Symbol.for("react.forward_ref"):60112,_d=st?Symbol.for("react.suspense"):60113,mb=st?Symbol.for("react.suspense_list"):60120,wd=st?Symbol.for("react.memo"):60115,Ed=st?Symbol.for("react.lazy"):60116,gb=st?Symbol.for("react.block"):60121,yb=st?Symbol.for("react.fundamental"):60117,vb=st?Symbol.for("react.responder"):60118,_b=st?Symbol.for("react.scope"):60119;function qt(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Tm:switch(t=t.type,t){case Cm:case yd:case hd:case pd:case fd:case _d:return t;default:switch(t=t&&t.$$typeof,t){case gd:case vd:case Ed:case wd:case md:return t;default:return e}}case Im:return e}}}function xw(t){return qt(t)===yd}Ce.AsyncMode=Cm;Ce.ConcurrentMode=yd;Ce.ContextConsumer=gd;Ce.ContextProvider=md;Ce.Element=Tm;Ce.ForwardRef=vd;Ce.Fragment=hd;Ce.Lazy=Ed;Ce.Memo=wd;Ce.Portal=Im;Ce.Profiler=pd;Ce.StrictMode=fd;Ce.Suspense=_d;Ce.isAsyncMode=function(t){return xw(t)||qt(t)===Cm};Ce.isConcurrentMode=xw;Ce.isContextConsumer=function(t){return qt(t)===gd};Ce.isContextProvider=function(t){return qt(t)===md};Ce.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Tm};Ce.isForwardRef=function(t){return qt(t)===vd};Ce.isFragment=function(t){return qt(t)===hd};Ce.isLazy=function(t){return qt(t)===Ed};Ce.isMemo=function(t){return qt(t)===wd};Ce.isPortal=function(t){return qt(t)===Im};Ce.isProfiler=function(t){return qt(t)===pd};Ce.isStrictMode=function(t){return qt(t)===fd};Ce.isSuspense=function(t){return qt(t)===_d};Ce.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===hd||t===yd||t===pd||t===fd||t===_d||t===mb||typeof t=="object"&&t!==null&&(t.$$typeof===Ed||t.$$typeof===wd||t.$$typeof===md||t.$$typeof===gd||t.$$typeof===vd||t.$$typeof===yb||t.$$typeof===vb||t.$$typeof===_b||t.$$typeof===gb)};Ce.typeOf=qt;kw.exports=Ce;function Sd(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Aw=kw.exports,wb={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Eb={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Pw={};Pw[Aw.ForwardRef]=wb;Pw[Aw.Memo]=Eb;var Oh=1073741823,Cv=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:{};function Sb(){var t="__global_unique_id__";return Cv[t]=(Cv[t]||0)+1}function Tb(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Ib(t){var e=[];return{on:function(r){e.push(r)},off:function(r){e=e.filter(function(i){return i!==r})},get:function(){return t},set:function(r,i){t=r,e.forEach(function(s){return s(t,i)})}}}function Cb(t){return Array.isArray(t)?t[0]:t}function bb(t,e){var n,r,i="__create-react-context-"+Sb()+"__",s=function(l){Fn(c,l);function c(){for(var f,v=arguments.length,m=new Array(v),T=0;T<v;T++)m[T]=arguments[T];return f=l.call.apply(l,[this].concat(m))||this,f.emitter=Ib(f.props.value),f}var d=c.prototype;return d.getChildContext=function(){var v;return v={},v[i]=this.emitter,v},d.componentWillReceiveProps=function(v){if(this.props.value!==v.value){var m=this.props.value,T=v.value,P;Tb(m,T)?P=0:(P=typeof e=="function"?e(m,T):Oh,P|=0,P!==0&&this.emitter.set(v.value,P))}},d.render=function(){return this.props.children},c}(we.Component);s.childContextTypes=(n={},n[i]=vv.object.isRequired,n);var o=function(l){Fn(c,l);function c(){for(var f,v=arguments.length,m=new Array(v),T=0;T<v;T++)m[T]=arguments[T];return f=l.call.apply(l,[this].concat(m))||this,f.observedBits=void 0,f.state={value:f.getValue()},f.onUpdate=function(P,R){var y=f.observedBits|0;(y&R)!==0&&f.setState({value:f.getValue()})},f}var d=c.prototype;return d.componentWillReceiveProps=function(v){var m=v.observedBits;this.observedBits=m==null?Oh:m},d.componentDidMount=function(){this.context[i]&&this.context[i].on(this.onUpdate);var v=this.props.observedBits;this.observedBits=v==null?Oh:v},d.componentWillUnmount=function(){this.context[i]&&this.context[i].off(this.onUpdate)},d.getValue=function(){return this.context[i]?this.context[i].get():t},d.render=function(){return Cb(this.props.children)(this.state.value)},c}(we.Component);return o.contextTypes=(r={},r[i]=vv.object,r),{Provider:s,Consumer:o}}var kb=we.createContext||bb,Rw=function(e){var n=kb();return n.displayName=e,n},Nw=Rw("Router-History"),Ki=Rw("Router"),Td=function(t){Fn(e,t),e.computeRootMatch=function(i){return{path:"/",url:"/",params:{},isExact:i==="/"}};function e(r){var i;return i=t.call(this,r)||this,i.state={location:r.history.location},i._isMounted=!1,i._pendingLocation=null,r.staticContext||(i.unlisten=r.history.listen(function(s){i._pendingLocation=s})),i}var n=e.prototype;return n.componentDidMount=function(){var i=this;this._isMounted=!0,this.unlisten&&this.unlisten(),this.props.staticContext||(this.unlisten=this.props.history.listen(function(s){i._isMounted&&i.setState({location:s})})),this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},n.render=function(){return we.createElement(Ki.Provider,{value:{history:this.props.history,location:this.state.location,match:e.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},we.createElement(Nw.Provider,{children:this.props.children||null,value:this.props.history}))},e}(we.Component);we.Component;we.Component;var bv={},xb=1e4,kv=0;function Ab(t,e){var n=""+e.end+e.strict+e.sensitive,r=bv[n]||(bv[n]={});if(r[t])return r[t];var i=[],s=pb(t,i,e),o={regexp:s,keys:i};return kv<xb&&(r[t]=o,kv++),o}function bm(t,e){e===void 0&&(e={}),(typeof e=="string"||Array.isArray(e))&&(e={path:e});var n=e,r=n.path,i=n.exact,s=i===void 0?!1:i,o=n.strict,l=o===void 0?!1:o,c=n.sensitive,d=c===void 0?!1:c,f=[].concat(r);return f.reduce(function(v,m){if(!m&&m!=="")return null;if(v)return v;var T=Ab(m,{end:s,strict:l,sensitive:d}),P=T.regexp,R=T.keys,y=P.exec(t);if(!y)return null;var E=y[0],x=y.slice(1),D=t===E;return s&&!D?null:{path:m,url:m==="/"&&E===""?"/":E,isExact:D,params:R.reduce(function(O,z,V){return O[z.name]=x[V],O},{})}},null)}function Pb(t){return we.Children.count(t)===0}var hn=function(t){Fn(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.render=function(){var i=this;return we.createElement(Ki.Consumer,null,function(s){s||ss(!1);var o=i.props.location||s.location,l=i.props.computedMatch?i.props.computedMatch:i.props.path?bm(o.pathname,i.props):s.match,c=xt({},s,{location:o,match:l}),d=i.props,f=d.children,v=d.component,m=d.render;return Array.isArray(f)&&Pb(f)&&(f=null),we.createElement(Ki.Provider,{value:c},c.match?f?typeof f=="function"?f(c):f:v?we.createElement(v,c):m?m(c):null:typeof f=="function"?f(c):null)})},e}(we.Component);function km(t){return t.charAt(0)==="/"?t:"/"+t}function Rb(t,e){return t?xt({},e,{pathname:km(t)+e.pathname}):e}function Nb(t,e){if(!t)return e;var n=km(t);return e.pathname.indexOf(n)!==0?e:xt({},e,{pathname:e.pathname.substr(n.length)})}function xv(t){return typeof t=="string"?t:Dt(t)}function Lh(t){return function(){ss(!1)}}function Av(){}we.Component;var Db=function(t){Fn(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.render=function(){var i=this;return we.createElement(Ki.Consumer,null,function(s){s||ss(!1);var o=i.props.location||s.location,l,c;return we.Children.forEach(i.props.children,function(d){if(c==null&&we.isValidElement(d)){l=d;var f=d.props.path||d.props.from;c=f?bm(o.pathname,xt({},d.props,{path:f})):s.match}}),c?we.cloneElement(l,{location:o,computedMatch:c}):null})},e}(we.Component),Dw=we.useContext;function Ow(){return Dw(Nw)}function Ob(){var t=Dw(Ki).match;return t?t.params:{}}var Lb=function(t){Fn(e,t);function e(){for(var r,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=t.call.apply(t,[this].concat(s))||this,r.history=ZC(r.props),r}var n=e.prototype;return n.render=function(){return we.createElement(Td,{history:this.history,children:this.props.children})},e}(we.Component);we.Component;var Wf=function(e,n){return typeof e=="function"?e(n):e},Hf=function(e,n){return typeof e=="string"?Bt(e,null,null,n):e},xm=function(e){return e},so=we.forwardRef;typeof so=="undefined"&&(so=xm);function Mb(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}var Fb=so(function(t,e){var n=t.innerRef,r=t.navigate,i=t.onClick,s=Sd(t,["innerRef","navigate","onClick"]),o=s.target,l=xt({},s,{onClick:function(d){try{i&&i(d)}catch(f){throw d.preventDefault(),f}!d.defaultPrevented&&d.button===0&&(!o||o==="_self")&&!Mb(d)&&(d.preventDefault(),r())}});return xm!==so?l.ref=e||n:l.ref=n,we.createElement("a",l)}),Hn=so(function(t,e){var n=t.component,r=n===void 0?Fb:n,i=t.replace,s=t.to,o=t.innerRef,l=Sd(t,["component","replace","to","innerRef"]);return we.createElement(Ki.Consumer,null,function(c){c||ss(!1);var d=c.history,f=Hf(Wf(s,c.location),c.location),v=f?d.createHref(f):"",m=xt({},l,{href:v,navigate:function(){var P=Wf(s,c.location),R=Dt(c.location)===Dt(Hf(P)),y=i||R?d.replace:d.push;y(P)}});return xm!==so?m.ref=e||o:m.innerRef=o,we.createElement(r,m)})}),Lw=function(e){return e},ku=we.forwardRef;typeof ku=="undefined"&&(ku=Lw);function Vb(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.filter(function(r){return r}).join(" ")}ku(function(t,e){var n=t["aria-current"],r=n===void 0?"page":n,i=t.activeClassName,s=i===void 0?"active":i,o=t.activeStyle,l=t.className,c=t.exact,d=t.isActive,f=t.location,v=t.sensitive,m=t.strict,T=t.style,P=t.to,R=t.innerRef,y=Sd(t,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return we.createElement(Ki.Consumer,null,function(E){E||ss(!1);var x=f||E.location,D=Hf(Wf(P,x),x),O=D.pathname,z=O&&O.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),V=z?bm(x.pathname,{path:z,exact:c,sensitive:v,strict:m}):null,k=!!(d?d(V,x):V),_=typeof l=="function"?l(k):l,S=typeof T=="function"?T(k):T;k&&(_=Vb(_,s),S=xt({},S,o));var I=xt({"aria-current":k&&r||null,className:_,style:S,to:D},y);return Lw!==ku?I.ref=e||R:I.innerRef=R,we.createElement(Hn,I)})});const Ub=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mw=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Bb=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Fw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,c=i+2<t.length,d=c?t[i+2]:0,f=s>>2,v=(s&3)<<4|l>>4;let m=(l&15)<<2|d>>6,T=d&63;c||(T=64,o||(m=64)),r.push(n[f],n[v],n[m],n[T])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Mw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Bb(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const v=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||d==null||v==null)throw new zb;const m=s<<2|l>>4;if(r.push(m),d!==64){const T=l<<4&240|d>>2;if(r.push(T),v!==64){const P=d<<6&192|v;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class zb extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const jb=function(t){const e=Mw(t);return Fw.encodeByteArray(e,!0)},xu=function(t){return jb(t).replace(/\./g,"")},Vw=function(t){try{return Fw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $b(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wb=()=>$b().__FIREBASE_DEFAULTS__,Hb=()=>{if(typeof process=="undefined"||typeof process.env=="undefined")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},qb=()=>{if(typeof document=="undefined")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Vw(t[1]);return e&&JSON.parse(e)},Id=()=>{try{return Ub()||Wb()||Hb()||qb()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Uw=t=>{var e,n;return(n=(e=Id())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},Gb=t=>{const e=Uw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Bw=()=>{var t;return(t=Id())==null?void 0:t.config},zw=t=>{var e;return(e=Id())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bo(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function jw(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xb(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t},l="";return[xu(JSON.stringify(n)),xu(JSON.stringify(o)),l].join(".")}const Wa={};function Qb(){const t={prod:[],emulator:[]};for(const e of Object.keys(Wa))Wa[e]?t.emulator.push(e):t.prod.push(e);return t}function Yb(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Pv=!1;function $w(t,e){if(typeof window=="undefined"||typeof document=="undefined"||!bo(window.location.host)||Wa[t]===e||Wa[t]||Pv)return;Wa[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",s=Qb().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,T){m.setAttribute("width","24"),m.setAttribute("id",T),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function d(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{Pv=!0,o()},m}function f(m,T){m.setAttribute("id",T),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function v(){const m=Yb(r),T=n("text"),P=document.getElementById(T)||document.createElement("span"),R=n("learnmore"),y=document.getElementById(R)||document.createElement("a"),E=n("preprendIcon"),x=document.getElementById(E)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const D=m.element;l(D),f(y,R);const O=d();c(x,E),D.append(x,P,y,O),document.body.appendChild(D)}s?(P.innerText="Preview backend disconnected.",x.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(x.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Jb(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ct())}function Zb(){var e;const t=(e=Id())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ek(){return typeof navigator!="undefined"&&navigator.userAgent==="Cloudflare-Workers"}function tk(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function nk(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function rk(){const t=Ct();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function ik(){return!Zb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function sk(){try{return typeof indexedDB=="object"}catch{return!1}}function ok(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ak="FirebaseError";class cr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=ak,Object.setPrototypeOf(this,cr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Nl.prototype.create)}}class Nl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?lk(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new cr(i,l,r)}}function lk(t,e){return t.replace(ck,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const ck=/\{\$([^}]+)}/g;function uk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Xi(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Rv(s)&&Rv(o)){if(!Xi(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Rv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ca(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function ba(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function dk(t,e){const n=new hk(t,e);return n.subscribe.bind(n)}class hk{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");fk(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Mh),i.error===void 0&&(i.error=Mh),i.complete===void 0&&(i.complete=Mh);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console!="undefined"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fk(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Mh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function et(t){return t&&t._delegate?t._delegate:t}class Qi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ni="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Kb;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var i;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(i=e==null?void 0:e.optional)!=null?i:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(gk(e))try{this.getOrInitializeService({instanceIdentifier:Ni})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ni){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ni){return this.instances.has(e)}getOptions(e=Ni){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){var o;const r=this.normalizeInstanceIdentifier(n),i=(o=this.onInitCallbacks.get(r))!=null?o:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(!!r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:mk(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ni){return this.component?this.component.multipleInstances?e:Ni:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function mk(t){return t===Ni?void 0:t}function gk(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new pk(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ye;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ye||(ye={}));const vk={debug:ye.DEBUG,verbose:ye.VERBOSE,info:ye.INFO,warn:ye.WARN,error:ye.ERROR,silent:ye.SILENT},_k=ye.INFO,wk={[ye.DEBUG]:"log",[ye.VERBOSE]:"log",[ye.INFO]:"info",[ye.WARN]:"warn",[ye.ERROR]:"error"},Ek=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=wk[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Am{constructor(e){this.name=e,this._logLevel=_k,this._logHandler=Ek,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?vk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ye.DEBUG,...e),this._logHandler(this,ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ye.VERBOSE,...e),this._logHandler(this,ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ye.INFO,...e),this._logHandler(this,ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ye.WARN,...e),this._logHandler(this,ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ye.ERROR,...e),this._logHandler(this,ye.ERROR,...e)}}const Sk=(t,e)=>e.some(n=>t instanceof n);let Nv,Dv;function Tk(){return Nv||(Nv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ik(){return Dv||(Dv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ww=new WeakMap,qf=new WeakMap,Hw=new WeakMap,Fh=new WeakMap,Pm=new WeakMap;function Ck(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(qr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Ww.set(n,t)}).catch(()=>{}),Pm.set(e,t),e}function bk(t){if(qf.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});qf.set(t,e)}let Gf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return qf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Hw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return qr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function kk(t){Gf=t(Gf)}function xk(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Vh(this),e,...n);return Hw.set(r,e.sort?e.sort():[e]),qr(r)}:Ik().includes(t)?function(...e){return t.apply(Vh(this),e),qr(Ww.get(this))}:function(...e){return qr(t.apply(Vh(this),e))}}function Ak(t){return typeof t=="function"?xk(t):(t instanceof IDBTransaction&&bk(t),Sk(t,Tk())?new Proxy(t,Gf):t)}function qr(t){if(t instanceof IDBRequest)return Ck(t);if(Fh.has(t))return Fh.get(t);const e=Ak(t);return e!==t&&(Fh.set(t,e),Pm.set(e,t)),e}const Vh=t=>Pm.get(t);function Pk(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=qr(o);return r&&o.addEventListener("upgradeneeded",c=>{r(qr(o.result),c.oldVersion,c.newVersion,qr(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const Rk=["get","getKey","getAll","getAllKeys","count"],Nk=["put","add","delete","clear"],Uh=new Map;function Ov(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Uh.get(e))return Uh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Nk.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Rk.includes(n)))return;const s=async function(o,...l){const c=this.transaction(o,i?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),i&&c.done]))[0]};return Uh.set(e,s),s}kk(t=>({...t,get:(e,n,r)=>Ov(e,n)||t.get(e,n,r),has:(e,n)=>!!Ov(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Ok(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Ok(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Kf="@firebase/app",Lv="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ir=new Am("@firebase/app"),Lk="@firebase/app-compat",Mk="@firebase/analytics-compat",Fk="@firebase/analytics",Vk="@firebase/app-check-compat",Uk="@firebase/app-check",Bk="@firebase/auth",zk="@firebase/auth-compat",jk="@firebase/database",$k="@firebase/data-connect",Wk="@firebase/database-compat",Hk="@firebase/functions",qk="@firebase/functions-compat",Gk="@firebase/installations",Kk="@firebase/installations-compat",Xk="@firebase/messaging",Qk="@firebase/messaging-compat",Yk="@firebase/performance",Jk="@firebase/performance-compat",Zk="@firebase/remote-config",ex="@firebase/remote-config-compat",tx="@firebase/storage",nx="@firebase/storage-compat",rx="@firebase/firestore",ix="@firebase/ai",sx="@firebase/firestore-compat",ox="firebase",ax="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xf="[DEFAULT]",lx={[Kf]:"fire-core",[Lk]:"fire-core-compat",[Fk]:"fire-analytics",[Mk]:"fire-analytics-compat",[Uk]:"fire-app-check",[Vk]:"fire-app-check-compat",[Bk]:"fire-auth",[zk]:"fire-auth-compat",[jk]:"fire-rtdb",[$k]:"fire-data-connect",[Wk]:"fire-rtdb-compat",[Hk]:"fire-fn",[qk]:"fire-fn-compat",[Gk]:"fire-iid",[Kk]:"fire-iid-compat",[Xk]:"fire-fcm",[Qk]:"fire-fcm-compat",[Yk]:"fire-perf",[Jk]:"fire-perf-compat",[Zk]:"fire-rc",[ex]:"fire-rc-compat",[tx]:"fire-gcs",[nx]:"fire-gcs-compat",[rx]:"fire-fst",[sx]:"fire-fst-compat",[ix]:"fire-vertex","fire-js":"fire-js",[ox]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Au=new Map,cx=new Map,Qf=new Map;function Mv(t,e){try{t.container.addComponent(e)}catch(n){ir.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function oo(t){const e=t.name;if(Qf.has(e))return ir.debug(`There were multiple attempts to register component ${e}.`),!1;Qf.set(e,t);for(const n of Au.values())Mv(n,t);for(const n of cx.values())Mv(n,t);return!0}function Rm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Zt(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ux={["no-app"]:"No Firebase App '{$appName}' has been created - call initializeApp() first",["bad-app-name"]:"Illegal App name: '{$appName}'",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["server-app-deleted"]:"Firebase Server App has been deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.",["finalization-registry-not-supported"]:"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.",["invalid-server-app-environment"]:"FirebaseServerApp is not for use in browser environments."},Gr=new Nl("app","Firebase",ux);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Qi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Gr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ko=ax;function qw(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Xf,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Gr.create("bad-app-name",{appName:String(i)});if(n||(n=Bw()),!n)throw Gr.create("no-options");const s=Au.get(i);if(s){if(Xi(n,s.options)&&Xi(r,s.config))return s;throw Gr.create("duplicate-app",{appName:i})}const o=new yk(i);for(const c of Qf.values())o.addComponent(c);const l=new dx(n,r,o);return Au.set(i,l),l}function Gw(t=Xf){const e=Au.get(t);if(!e&&t===Xf&&Bw())return qw();if(!e)throw Gr.create("no-app",{appName:t});return e}function Kr(t,e,n){var o;let r=(o=lx[t])!=null?o:t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const l=[`Unable to register library "${r}" with version "${e}":`];i&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&l.push("and"),s&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ir.warn(l.join(" "));return}oo(new Qi(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hx="firebase-heartbeat-database",fx=1,fl="firebase-heartbeat-store";let Bh=null;function Kw(){return Bh||(Bh=Pk(hx,fx,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(fl)}catch(n){console.warn(n)}}}}).catch(t=>{throw Gr.create("idb-open",{originalErrorMessage:t.message})})),Bh}async function px(t){try{const n=(await Kw()).transaction(fl),r=await n.objectStore(fl).get(Xw(t));return await n.done,r}catch(e){if(e instanceof cr)ir.warn(e.message);else{const n=Gr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ir.warn(n.message)}}}async function Fv(t,e){try{const r=(await Kw()).transaction(fl,"readwrite");await r.objectStore(fl).put(e,Xw(t)),await r.done}catch(n){if(n instanceof cr)ir.warn(n.message);else{const r=Gr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ir.warn(r.message)}}}function Xw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx=1024,gx=30;class yx{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new _x(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Vv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>gx){const o=wx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ir.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Vv(),{heartbeatsToSend:r,unsentEntries:i}=vx(this._heartbeatsCache.heartbeats),s=xu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return ir.warn(n),""}}}function Vv(){return new Date().toISOString().substring(0,10)}function vx(t,e=mx){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Uv(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Uv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class _x{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return sk()?ok().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await px(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return Fv(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!=null?r:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return Fv(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!=null?r:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Uv(t){return xu(JSON.stringify({version:2,heartbeats:t})).length}function wx(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ex(t){oo(new Qi("platform-logger",e=>new Dk(e),"PRIVATE")),oo(new Qi("heartbeat",e=>new yx(e),"PRIVATE")),Kr(Kf,Lv,t),Kr(Kf,Lv,"esm2020"),Kr("fire-js","")}Ex("");var Bv=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Xr,Qw;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,_){function S(){}S.prototype=_.prototype,k.F=_.prototype,k.prototype=new S,k.prototype.constructor=k,k.D=function(I,b,N){for(var w=Array(arguments.length-2),Q=2;Q<arguments.length;Q++)w[Q-2]=arguments[Q];return _.prototype[b].apply(I,w)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(k,_,S){S||(S=0);const I=Array(16);if(typeof _=="string")for(var b=0;b<16;++b)I[b]=_.charCodeAt(S++)|_.charCodeAt(S++)<<8|_.charCodeAt(S++)<<16|_.charCodeAt(S++)<<24;else for(b=0;b<16;++b)I[b]=_[S++]|_[S++]<<8|_[S++]<<16|_[S++]<<24;_=k.g[0],S=k.g[1],b=k.g[2];let N=k.g[3],w;w=_+(N^S&(b^N))+I[0]+3614090360&4294967295,_=S+(w<<7&4294967295|w>>>25),w=N+(b^_&(S^b))+I[1]+3905402710&4294967295,N=_+(w<<12&4294967295|w>>>20),w=b+(S^N&(_^S))+I[2]+606105819&4294967295,b=N+(w<<17&4294967295|w>>>15),w=S+(_^b&(N^_))+I[3]+3250441966&4294967295,S=b+(w<<22&4294967295|w>>>10),w=_+(N^S&(b^N))+I[4]+4118548399&4294967295,_=S+(w<<7&4294967295|w>>>25),w=N+(b^_&(S^b))+I[5]+1200080426&4294967295,N=_+(w<<12&4294967295|w>>>20),w=b+(S^N&(_^S))+I[6]+2821735955&4294967295,b=N+(w<<17&4294967295|w>>>15),w=S+(_^b&(N^_))+I[7]+4249261313&4294967295,S=b+(w<<22&4294967295|w>>>10),w=_+(N^S&(b^N))+I[8]+1770035416&4294967295,_=S+(w<<7&4294967295|w>>>25),w=N+(b^_&(S^b))+I[9]+2336552879&4294967295,N=_+(w<<12&4294967295|w>>>20),w=b+(S^N&(_^S))+I[10]+4294925233&4294967295,b=N+(w<<17&4294967295|w>>>15),w=S+(_^b&(N^_))+I[11]+2304563134&4294967295,S=b+(w<<22&4294967295|w>>>10),w=_+(N^S&(b^N))+I[12]+1804603682&4294967295,_=S+(w<<7&4294967295|w>>>25),w=N+(b^_&(S^b))+I[13]+4254626195&4294967295,N=_+(w<<12&4294967295|w>>>20),w=b+(S^N&(_^S))+I[14]+2792965006&4294967295,b=N+(w<<17&4294967295|w>>>15),w=S+(_^b&(N^_))+I[15]+1236535329&4294967295,S=b+(w<<22&4294967295|w>>>10),w=_+(b^N&(S^b))+I[1]+4129170786&4294967295,_=S+(w<<5&4294967295|w>>>27),w=N+(S^b&(_^S))+I[6]+3225465664&4294967295,N=_+(w<<9&4294967295|w>>>23),w=b+(_^S&(N^_))+I[11]+643717713&4294967295,b=N+(w<<14&4294967295|w>>>18),w=S+(N^_&(b^N))+I[0]+3921069994&4294967295,S=b+(w<<20&4294967295|w>>>12),w=_+(b^N&(S^b))+I[5]+3593408605&4294967295,_=S+(w<<5&4294967295|w>>>27),w=N+(S^b&(_^S))+I[10]+38016083&4294967295,N=_+(w<<9&4294967295|w>>>23),w=b+(_^S&(N^_))+I[15]+3634488961&4294967295,b=N+(w<<14&4294967295|w>>>18),w=S+(N^_&(b^N))+I[4]+3889429448&4294967295,S=b+(w<<20&4294967295|w>>>12),w=_+(b^N&(S^b))+I[9]+568446438&4294967295,_=S+(w<<5&4294967295|w>>>27),w=N+(S^b&(_^S))+I[14]+3275163606&4294967295,N=_+(w<<9&4294967295|w>>>23),w=b+(_^S&(N^_))+I[3]+4107603335&4294967295,b=N+(w<<14&4294967295|w>>>18),w=S+(N^_&(b^N))+I[8]+1163531501&4294967295,S=b+(w<<20&4294967295|w>>>12),w=_+(b^N&(S^b))+I[13]+2850285829&4294967295,_=S+(w<<5&4294967295|w>>>27),w=N+(S^b&(_^S))+I[2]+4243563512&4294967295,N=_+(w<<9&4294967295|w>>>23),w=b+(_^S&(N^_))+I[7]+1735328473&4294967295,b=N+(w<<14&4294967295|w>>>18),w=S+(N^_&(b^N))+I[12]+2368359562&4294967295,S=b+(w<<20&4294967295|w>>>12),w=_+(S^b^N)+I[5]+4294588738&4294967295,_=S+(w<<4&4294967295|w>>>28),w=N+(_^S^b)+I[8]+2272392833&4294967295,N=_+(w<<11&4294967295|w>>>21),w=b+(N^_^S)+I[11]+1839030562&4294967295,b=N+(w<<16&4294967295|w>>>16),w=S+(b^N^_)+I[14]+4259657740&4294967295,S=b+(w<<23&4294967295|w>>>9),w=_+(S^b^N)+I[1]+2763975236&4294967295,_=S+(w<<4&4294967295|w>>>28),w=N+(_^S^b)+I[4]+1272893353&4294967295,N=_+(w<<11&4294967295|w>>>21),w=b+(N^_^S)+I[7]+4139469664&4294967295,b=N+(w<<16&4294967295|w>>>16),w=S+(b^N^_)+I[10]+3200236656&4294967295,S=b+(w<<23&4294967295|w>>>9),w=_+(S^b^N)+I[13]+681279174&4294967295,_=S+(w<<4&4294967295|w>>>28),w=N+(_^S^b)+I[0]+3936430074&4294967295,N=_+(w<<11&4294967295|w>>>21),w=b+(N^_^S)+I[3]+3572445317&4294967295,b=N+(w<<16&4294967295|w>>>16),w=S+(b^N^_)+I[6]+76029189&4294967295,S=b+(w<<23&4294967295|w>>>9),w=_+(S^b^N)+I[9]+3654602809&4294967295,_=S+(w<<4&4294967295|w>>>28),w=N+(_^S^b)+I[12]+3873151461&4294967295,N=_+(w<<11&4294967295|w>>>21),w=b+(N^_^S)+I[15]+530742520&4294967295,b=N+(w<<16&4294967295|w>>>16),w=S+(b^N^_)+I[2]+3299628645&4294967295,S=b+(w<<23&4294967295|w>>>9),w=_+(b^(S|~N))+I[0]+4096336452&4294967295,_=S+(w<<6&4294967295|w>>>26),w=N+(S^(_|~b))+I[7]+1126891415&4294967295,N=_+(w<<10&4294967295|w>>>22),w=b+(_^(N|~S))+I[14]+2878612391&4294967295,b=N+(w<<15&4294967295|w>>>17),w=S+(N^(b|~_))+I[5]+4237533241&4294967295,S=b+(w<<21&4294967295|w>>>11),w=_+(b^(S|~N))+I[12]+1700485571&4294967295,_=S+(w<<6&4294967295|w>>>26),w=N+(S^(_|~b))+I[3]+2399980690&4294967295,N=_+(w<<10&4294967295|w>>>22),w=b+(_^(N|~S))+I[10]+4293915773&4294967295,b=N+(w<<15&4294967295|w>>>17),w=S+(N^(b|~_))+I[1]+2240044497&4294967295,S=b+(w<<21&4294967295|w>>>11),w=_+(b^(S|~N))+I[8]+1873313359&4294967295,_=S+(w<<6&4294967295|w>>>26),w=N+(S^(_|~b))+I[15]+4264355552&4294967295,N=_+(w<<10&4294967295|w>>>22),w=b+(_^(N|~S))+I[6]+2734768916&4294967295,b=N+(w<<15&4294967295|w>>>17),w=S+(N^(b|~_))+I[13]+1309151649&4294967295,S=b+(w<<21&4294967295|w>>>11),w=_+(b^(S|~N))+I[4]+4149444226&4294967295,_=S+(w<<6&4294967295|w>>>26),w=N+(S^(_|~b))+I[11]+3174756917&4294967295,N=_+(w<<10&4294967295|w>>>22),w=b+(_^(N|~S))+I[2]+718787259&4294967295,b=N+(w<<15&4294967295|w>>>17),w=S+(N^(b|~_))+I[9]+3951481745&4294967295,k.g[0]=k.g[0]+_&4294967295,k.g[1]=k.g[1]+(b+(w<<21&4294967295|w>>>11))&4294967295,k.g[2]=k.g[2]+b&4294967295,k.g[3]=k.g[3]+N&4294967295}r.prototype.v=function(k,_){_===void 0&&(_=k.length);const S=_-this.blockSize,I=this.C;let b=this.h,N=0;for(;N<_;){if(b==0)for(;N<=S;)i(this,k,N),N+=this.blockSize;if(typeof k=="string"){for(;N<_;)if(I[b++]=k.charCodeAt(N++),b==this.blockSize){i(this,I),b=0;break}}else for(;N<_;)if(I[b++]=k[N++],b==this.blockSize){i(this,I),b=0;break}}this.h=b,this.o+=_},r.prototype.A=function(){var k=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);k[0]=128;for(var _=1;_<k.length-8;++_)k[_]=0;_=this.o*8;for(var S=k.length-8;S<k.length;++S)k[S]=_&255,_/=256;for(this.v(k),k=Array(16),_=0,S=0;S<4;++S)for(let I=0;I<32;I+=8)k[_++]=this.g[S]>>>I&255;return k};function s(k,_){var S=l;return Object.prototype.hasOwnProperty.call(S,k)?S[k]:S[k]=_(k)}function o(k,_){this.h=_;const S=[];let I=!0;for(let b=k.length-1;b>=0;b--){const N=k[b]|0;I&&N==_||(S[b]=N,I=!1)}this.g=S}var l={};function c(k){return-128<=k&&k<128?s(k,function(_){return new o([_|0],_<0?-1:0)}):new o([k|0],k<0?-1:0)}function d(k){if(isNaN(k)||!isFinite(k))return v;if(k<0)return y(d(-k));const _=[];let S=1;for(let I=0;k>=S;I++)_[I]=k/S|0,S*=4294967296;return new o(_,0)}function f(k,_){if(k.length==0)throw Error("number format error: empty string");if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(k.charAt(0)=="-")return y(f(k.substring(1),_));if(k.indexOf("-")>=0)throw Error('number format error: interior "-" character');const S=d(Math.pow(_,8));let I=v;for(let N=0;N<k.length;N+=8){var b=Math.min(8,k.length-N);const w=parseInt(k.substring(N,N+b),_);b<8?(b=d(Math.pow(_,b)),I=I.j(b).add(d(w))):(I=I.j(S),I=I.add(d(w)))}return I}var v=c(0),m=c(1),T=c(16777216);t=o.prototype,t.m=function(){if(R(this))return-y(this).m();let k=0,_=1;for(let S=0;S<this.g.length;S++){const I=this.i(S);k+=(I>=0?I:4294967296+I)*_,_*=4294967296}return k},t.toString=function(k){if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(P(this))return"0";if(R(this))return"-"+y(this).toString(k);const _=d(Math.pow(k,6));var S=this;let I="";for(;;){const b=O(S,_).g;S=E(S,b.j(_));let N=((S.g.length>0?S.g[0]:S.h)>>>0).toString(k);if(S=b,P(S))return N+I;for(;N.length<6;)N="0"+N;I=N+I}},t.i=function(k){return k<0?0:k<this.g.length?this.g[k]:this.h};function P(k){if(k.h!=0)return!1;for(let _=0;_<k.g.length;_++)if(k.g[_]!=0)return!1;return!0}function R(k){return k.h==-1}t.l=function(k){return k=E(this,k),R(k)?-1:P(k)?0:1};function y(k){const _=k.g.length,S=[];for(let I=0;I<_;I++)S[I]=~k.g[I];return new o(S,~k.h).add(m)}t.abs=function(){return R(this)?y(this):this},t.add=function(k){const _=Math.max(this.g.length,k.g.length),S=[];let I=0;for(let b=0;b<=_;b++){let N=I+(this.i(b)&65535)+(k.i(b)&65535),w=(N>>>16)+(this.i(b)>>>16)+(k.i(b)>>>16);I=w>>>16,N&=65535,w&=65535,S[b]=w<<16|N}return new o(S,S[S.length-1]&-2147483648?-1:0)};function E(k,_){return k.add(y(_))}t.j=function(k){if(P(this)||P(k))return v;if(R(this))return R(k)?y(this).j(y(k)):y(y(this).j(k));if(R(k))return y(this.j(y(k)));if(this.l(T)<0&&k.l(T)<0)return d(this.m()*k.m());const _=this.g.length+k.g.length,S=[];for(var I=0;I<2*_;I++)S[I]=0;for(I=0;I<this.g.length;I++)for(let b=0;b<k.g.length;b++){const N=this.i(I)>>>16,w=this.i(I)&65535,Q=k.i(b)>>>16,J=k.i(b)&65535;S[2*I+2*b]+=w*J,x(S,2*I+2*b),S[2*I+2*b+1]+=N*J,x(S,2*I+2*b+1),S[2*I+2*b+1]+=w*Q,x(S,2*I+2*b+1),S[2*I+2*b+2]+=N*Q,x(S,2*I+2*b+2)}for(k=0;k<_;k++)S[k]=S[2*k+1]<<16|S[2*k];for(k=_;k<2*_;k++)S[k]=0;return new o(S,0)};function x(k,_){for(;(k[_]&65535)!=k[_];)k[_+1]+=k[_]>>>16,k[_]&=65535,_++}function D(k,_){this.g=k,this.h=_}function O(k,_){if(P(_))throw Error("division by zero");if(P(k))return new D(v,v);if(R(k))return _=O(y(k),_),new D(y(_.g),y(_.h));if(R(_))return _=O(k,y(_)),new D(y(_.g),_.h);if(k.g.length>30){if(R(k)||R(_))throw Error("slowDivide_ only works with positive integers.");for(var S=m,I=_;I.l(k)<=0;)S=z(S),I=z(I);var b=V(S,1),N=V(I,1);for(I=V(I,2),S=V(S,2);!P(I);){var w=N.add(I);w.l(k)<=0&&(b=b.add(S),N=w),I=V(I,1),S=V(S,1)}return _=E(k,b.j(_)),new D(b,_)}for(b=v;k.l(_)>=0;){for(S=Math.max(1,Math.floor(k.m()/_.m())),I=Math.ceil(Math.log(S)/Math.LN2),I=I<=48?1:Math.pow(2,I-48),N=d(S),w=N.j(_);R(w)||w.l(k)>0;)S-=I,N=d(S),w=N.j(_);P(N)&&(N=m),b=b.add(N),k=E(k,w)}return new D(b,k)}t.B=function(k){return O(this,k).h},t.and=function(k){const _=Math.max(this.g.length,k.g.length),S=[];for(let I=0;I<_;I++)S[I]=this.i(I)&k.i(I);return new o(S,this.h&k.h)},t.or=function(k){const _=Math.max(this.g.length,k.g.length),S=[];for(let I=0;I<_;I++)S[I]=this.i(I)|k.i(I);return new o(S,this.h|k.h)},t.xor=function(k){const _=Math.max(this.g.length,k.g.length),S=[];for(let I=0;I<_;I++)S[I]=this.i(I)^k.i(I);return new o(S,this.h^k.h)};function z(k){const _=k.g.length+1,S=[];for(let I=0;I<_;I++)S[I]=k.i(I)<<1|k.i(I-1)>>>31;return new o(S,k.h)}function V(k,_){const S=_>>5;_%=32;const I=k.g.length-S,b=[];for(let N=0;N<I;N++)b[N]=_>0?k.i(N+S)>>>_|k.i(N+S+1)<<32-_:k.i(N+S);return new o(b,k.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Qw=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,Xr=o}).apply(typeof Bv!="undefined"?Bv:typeof self!="undefined"?self:typeof window!="undefined"?window:{});var Cc=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Yw,ka,Jw,Hc,Yf,Zw,eE,tE;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Cc=="object"&&Cc];for(var h=0;h<a.length;++h){var p=a[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function i(a,h){if(h)e:{var p=r;a=a.split(".");for(var C=0;C<a.length-1;C++){var F=a[C];if(!(F in p))break e;p=p[F]}a=a[a.length-1],C=p[a],h=h(C),h!=C&&h!=null&&e(p,a,{configurable:!0,writable:!0,value:h})}}i("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(a){return a||function(h){var p=[],C;for(C in h)Object.prototype.hasOwnProperty.call(h,C)&&p.push([C,h[C]]);return p}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},o=this||self;function l(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function c(a,h,p){return a.call.apply(a.bind,arguments)}function d(a,h,p){return d=c,d.apply(null,arguments)}function f(a,h){var p=Array.prototype.slice.call(arguments,1);return function(){var C=p.slice();return C.push.apply(C,arguments),a.apply(this,C)}}function v(a,h){function p(){}p.prototype=h.prototype,a.Z=h.prototype,a.prototype=new p,a.prototype.constructor=a,a.Ob=function(C,F,U){for(var Z=Array(arguments.length-2),me=2;me<arguments.length;me++)Z[me-2]=arguments[me];return h.prototype[F].apply(C,Z)}}var m=typeof AsyncContext!="undefined"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function T(a){const h=a.length;if(h>0){const p=Array(h);for(let C=0;C<h;C++)p[C]=a[C];return p}return[]}function P(a,h){for(let C=1;C<arguments.length;C++){const F=arguments[C];var p=typeof F;if(p=p!="object"?p:F?Array.isArray(F)?"array":p:"null",p=="array"||p=="object"&&typeof F.length=="number"){p=a.length||0;const U=F.length||0;a.length=p+U;for(let Z=0;Z<U;Z++)a[p+Z]=F[Z]}else a.push(F)}}class R{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return this.h>0?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function y(a){o.setTimeout(()=>{throw a},0)}function E(){var a=k;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class x{constructor(){this.h=this.g=null}add(h,p){const C=D.get();C.set(h,p),this.h?this.h.next=C:this.g=C,this.h=C}}var D=new R(()=>new O,a=>a.reset());class O{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let z,V=!1,k=new x,_=()=>{const a=Promise.resolve(void 0);z=()=>{a.then(S)}};function S(){for(var a;a=E();){try{a.h.call(a.g)}catch(p){y(p)}var h=D;h.j(a),h.h<100&&(h.h++,a.next=h.g,h.g=a)}V=!1}function I(){this.u=this.u,this.C=this.C}I.prototype.u=!1,I.prototype.dispose=function(){this.u||(this.u=!0,this.N())},I.prototype[Symbol.dispose]=function(){this.dispose()},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function b(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}b.prototype.h=function(){this.defaultPrevented=!0};var N=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const p=()=>{};o.addEventListener("test",p,h),o.removeEventListener("test",p,h)}catch{}return a}();function w(a){return/^[\s\xa0]*$/.test(a)}function Q(a,h){b.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,h)}v(Q,b),Q.prototype.init=function(a,h){const p=this.type=a.type,C=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget,h||(p=="mouseover"?h=a.fromElement:p=="mouseout"&&(h=a.toElement)),this.relatedTarget=h,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&Q.Z.h.call(this)},Q.prototype.h=function(){Q.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var J="closure_listenable_"+(Math.random()*1e6|0),se=0;function q(a,h,p,C,F){this.listener=a,this.proxy=null,this.src=h,this.type=p,this.capture=!!C,this.ha=F,this.key=++se,this.da=this.fa=!1}function te(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function $(a,h,p){for(const C in a)h.call(p,a[C],C,a)}function H(a,h){for(const p in a)h.call(void 0,a[p],p,a)}function M(a){const h={};for(const p in a)h[p]=a[p];return h}const B="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Y(a,h){let p,C;for(let F=1;F<arguments.length;F++){C=arguments[F];for(p in C)a[p]=C[p];for(let U=0;U<B.length;U++)p=B[U],Object.prototype.hasOwnProperty.call(C,p)&&(a[p]=C[p])}}function ne(a){this.src=a,this.g={},this.h=0}ne.prototype.add=function(a,h,p,C,F){const U=a.toString();a=this.g[U],a||(a=this.g[U]=[],this.h++);const Z=ge(a,h,C,F);return Z>-1?(h=a[Z],p||(h.fa=!1)):(h=new q(h,this.src,U,!!C,F),h.fa=p,a.push(h)),h};function ue(a,h){const p=h.type;if(p in a.g){var C=a.g[p],F=Array.prototype.indexOf.call(C,h,void 0),U;(U=F>=0)&&Array.prototype.splice.call(C,F,1),U&&(te(h),a.g[p].length==0&&(delete a.g[p],a.h--))}}function ge(a,h,p,C){for(let F=0;F<a.length;++F){const U=a[F];if(!U.da&&U.listener==h&&U.capture==!!p&&U.ha==C)return F}return-1}var Ee="closure_lm_"+(Math.random()*1e6|0),Ae={};function ot(a,h,p,C,F){if(C&&C.once)return ur(a,h,p,C,F);if(Array.isArray(h)){for(let U=0;U<h.length;U++)ot(a,h[U],p,C,F);return null}return p=ds(p),a&&a[J]?a.J(h,p,l(C)?!!C.capture:!!C,F):Fo(a,h,p,!1,C,F)}function Fo(a,h,p,C,F,U){if(!h)throw Error("Invalid event type");const Z=l(F)?!!F.capture:!!F;let me=vi(a);if(me||(a[Ee]=me=new ne(a)),p=me.add(h,p,C,Z,U),p.proxy)return p;if(C=us(),p.proxy=C,C.src=a,C.listener=p,a.addEventListener)N||(F=Z),F===void 0&&(F=!1),a.addEventListener(h.toString(),C,F);else if(a.attachEvent)a.attachEvent(yi(h.toString()),C);else if(a.addListener&&a.removeListener)a.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return p}function us(){function a(p){return h.call(a.src,a.listener,p)}const h=Zd;return a}function ur(a,h,p,C,F){if(Array.isArray(h)){for(let U=0;U<h.length;U++)ur(a,h[U],p,C,F);return null}return p=ds(p),a&&a[J]?a.K(h,p,l(C)?!!C.capture:!!C,F):Fo(a,h,p,!0,C,F)}function dr(a,h,p,C,F){if(Array.isArray(h))for(var U=0;U<h.length;U++)dr(a,h[U],p,C,F);else C=l(C)?!!C.capture:!!C,p=ds(p),a&&a[J]?(a=a.i,U=String(h).toString(),U in a.g&&(h=a.g[U],p=ge(h,p,C,F),p>-1&&(te(h[p]),Array.prototype.splice.call(h,p,1),h.length==0&&(delete a.g[U],a.h--)))):a&&(a=vi(a))&&(h=a.g[h.toString()],a=-1,h&&(a=ge(h,p,C,F)),(p=a>-1?h[a]:null)&&be(p))}function be(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[J])ue(h.i,a);else{var p=a.type,C=a.proxy;h.removeEventListener?h.removeEventListener(p,C,a.capture):h.detachEvent?h.detachEvent(yi(p),C):h.addListener&&h.removeListener&&h.removeListener(C),(p=vi(h))?(ue(p,a),p.h==0&&(p.src=null,h[Ee]=null)):te(a)}}}function yi(a){return a in Ae?Ae[a]:Ae[a]="on"+a}function Zd(a,h){if(a.da)a=!0;else{h=new Q(h,this);const p=a.listener,C=a.ha||a.src;a.fa&&be(a),a=p.call(C,h)}return a}function vi(a){return a=a[Ee],a instanceof ne?a:null}var Bn="__closure_events_fn_"+(Math.random()*1e9>>>0);function ds(a){return typeof a=="function"?a:(a[Bn]||(a[Bn]=function(h){return a.handleEvent(h)}),a[Bn])}function qe(){I.call(this),this.i=new ne(this),this.M=this,this.G=null}v(qe,I),qe.prototype[J]=!0,qe.prototype.removeEventListener=function(a,h,p,C){dr(this,a,h,p,C)};function Qe(a,h){var p,C=a.G;if(C)for(p=[];C;C=C.G)p.push(C);if(a=a.M,C=h.type||h,typeof h=="string")h=new b(h,a);else if(h instanceof b)h.target=h.target||a;else{var F=h;h=new b(C,a),Y(h,F)}F=!0;let U,Z;if(p)for(Z=p.length-1;Z>=0;Z--)U=h.g=p[Z],F=hr(U,C,!0,h)&&F;if(U=h.g=a,F=hr(U,C,!0,h)&&F,F=hr(U,C,!1,h)&&F,p)for(Z=0;Z<p.length;Z++)U=h.g=p[Z],F=hr(U,C,!1,h)&&F}qe.prototype.N=function(){if(qe.Z.N.call(this),this.i){var a=this.i;for(const h in a.g){const p=a.g[h];for(let C=0;C<p.length;C++)te(p[C]);delete a.g[h],a.h--}}this.G=null},qe.prototype.J=function(a,h,p,C){return this.i.add(String(a),h,!1,p,C)},qe.prototype.K=function(a,h,p,C){return this.i.add(String(a),h,!0,p,C)};function hr(a,h,p,C){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();let F=!0;for(let U=0;U<h.length;++U){const Z=h[U];if(Z&&!Z.da&&Z.capture==p){const me=Z.listener,Ye=Z.ha||Z.src;Z.fa&&ue(a.i,Z),F=me.call(Ye,C)!==!1&&F}}return F&&!C.defaultPrevented}function Vo(a,h){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=d(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(h)>2147483647?-1:o.setTimeout(a,h||0)}function Uo(a){a.g=Vo(()=>{a.g=null,a.i&&(a.i=!1,Uo(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class zn extends I{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Uo(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function jn(a){I.call(this),this.h=a,this.g={}}v(jn,I);var Bo=[];function hs(a){$(a.g,function(h,p){this.g.hasOwnProperty(p)&&be(h)},a),a.g={}}jn.prototype.N=function(){jn.Z.N.call(this),hs(this)},jn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fs=o.JSON.stringify,ps=o.JSON.parse,Yl=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function zo(){}function jo(){}var fr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function an(){b.call(this,"d")}v(an,b);function pr(){b.call(this,"c")}v(pr,b);var Pt={},ms=null;function gs(){return ms=ms||new qe}Pt.Ia="serverreachability";function $o(a){b.call(this,Pt.Ia,a)}v($o,b);function wn(a){const h=gs();Qe(h,new $o(h))}Pt.STAT_EVENT="statevent";function mr(a,h){b.call(this,Pt.STAT_EVENT,a),this.stat=h}v(mr,b);function at(a){const h=gs();Qe(h,new mr(h,a))}Pt.Ja="timingevent";function Ve(a,h){b.call(this,Pt.Ja,a),this.size=h}v(Ve,b);function lt(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},h)}function ys(){this.g=!0}ys.prototype.ua=function(){this.g=!1};function eh(a,h,p,C,F,U){a.info(function(){if(a.g)if(U){var Z="",me=U.split("&");for(let xe=0;xe<me.length;xe++){var Ye=me[xe].split("=");if(Ye.length>1){const tt=Ye[0];Ye=Ye[1];const Sn=tt.split("_");Z=Sn.length>=2&&Sn[1]=="type"?Z+(tt+"="+Ye+"&"):Z+(tt+"=redacted&")}}}else Z=null;else Z=U;return"XMLHTTP REQ ("+C+") [attempt "+F+"]: "+h+`
`+p+`
`+Z})}function Wo(a,h,p,C,F,U,Z){a.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+F+"]: "+h+`
`+p+`
`+U+" "+Z})}function ln(a,h,p,C){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+gr(a,p)+(C?" "+C:"")})}function ct(a,h){a.info(function(){return"TIMEOUT: "+h})}ys.prototype.info=function(){};function gr(a,h){if(!a.g)return h;if(!h)return null;try{const U=JSON.parse(h);if(U){for(a=0;a<U.length;a++)if(Array.isArray(U[a])){var p=U[a];if(!(p.length<2)){var C=p[1];if(Array.isArray(C)&&!(C.length<1)){var F=C[0];if(F!="noop"&&F!="stop"&&F!="close")for(let Z=1;Z<C.length;Z++)C[Z]=""}}}}return fs(U)}catch{return h}}var _i={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},yr={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},vs;function Ho(){}v(Ho,zo),Ho.prototype.g=function(){return new XMLHttpRequest},vs=new Ho;function vr(a){return encodeURIComponent(String(a))}function Jl(a){var h=1;a=a.split(":");const p=[];for(;h>0&&a.length;)p.push(a.shift()),h--;return a.length&&p.push(a.join(":")),p}function cn(a,h,p,C){this.j=a,this.i=h,this.l=p,this.S=C||1,this.V=new jn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new qo}function qo(){this.i=null,this.g="",this.h=!1}var Go={},_r={};function Gt(a,h,p){a.M=1,a.A=Es(Xt(h)),a.u=p,a.R=!0,Zl(a,null)}function Zl(a,h){a.F=Date.now(),_s(a),a.B=Xt(a.A);var p=a.B,C=a.S;Array.isArray(C)||(C=[String(C)]),Dg(p.i,"t",C),a.C=0,p=a.j.L,a.h=new qo,a.g=Yg(a.j,p?h:null,!a.u),a.P>0&&(a.O=new zn(d(a.Y,a,a.g),a.P)),h=a.V,p=a.g,C=a.ba;var F="readystatechange";Array.isArray(F)||(F&&(Bo[0]=F.toString()),F=Bo);for(let U=0;U<F.length;U++){const Z=ot(p,F[U],C||h.handleEvent,!1,h.h||h);if(!Z)break;h.g[Z.key]=Z}h=a.J?M(a.J):{},a.u?(a.v||(a.v="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,h)):(a.v="GET",a.g.ea(a.B,a.v,null,h)),wn(),eh(a.i,a.v,a.B,a.l,a.S,a.u)}cn.prototype.ba=function(a){a=a.target;const h=this.O;h&&Sr(a)==3?h.j():this.Y(a)},cn.prototype.Y=function(a){try{if(a==this.g)e:{const me=Sr(this.g),Ye=this.g.ya(),xe=this.g.ca();if(!(me<3)&&(me!=3||this.g&&(this.h.h||this.g.la()||Bg(this.g)))){this.K||me!=4||Ye==7||(Ye==8||xe<=0?wn(3):wn(2)),Qo(this);var h=this.g.ca();this.X=h;var p=Ko(this);if(this.o=h==200,Wo(this.i,this.v,this.B,this.l,this.S,me,h),this.o){if(this.U&&!this.L){t:{if(this.g){var C,F=this.g;if((C=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(C)){var U=C;break t}}U=null}if(a=U)ln(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Yo(this,a);else{this.o=!1,this.m=3,at(12),$n(this),wr(this);break e}}if(this.R){a=!0;let tt;for(;!this.K&&this.C<p.length;)if(tt=ec(this,p),tt==_r){me==4&&(this.m=4,at(14),a=!1),ln(this.i,this.l,null,"[Incomplete Response]");break}else if(tt==Go){this.m=4,at(15),ln(this.i,this.l,p,"[Invalid Chunk]"),a=!1;break}else ln(this.i,this.l,tt,null),Yo(this,tt);if(Kt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),me!=4||p.length!=0||this.h.h||(this.m=1,at(16),a=!1),this.o=this.o&&a,!a)ln(this.i,this.l,p,"[Invalid Chunked Response]"),$n(this),wr(this);else if(p.length>0&&!this.W){this.W=!0;var Z=this.j;Z.g==this&&Z.aa&&!Z.P&&(Z.j.info("Great, no buffering proxy detected. Bytes received: "+p.length),sh(Z),Z.P=!0,at(11))}}else ln(this.i,this.l,p,null),Yo(this,p);me==4&&$n(this),this.o&&!this.K&&(me==4?Gg(this.j,this):(this.o=!1,_s(this)))}else OT(this.g),h==400&&p.indexOf("Unknown SID")>0?(this.m=3,at(12)):(this.m=0,at(13)),$n(this),wr(this)}}}catch{}finally{}};function Ko(a){if(!Kt(a))return a.g.la();const h=Bg(a.g);if(h==="")return"";let p="";const C=h.length,F=Sr(a.g)==4;if(!a.h.i){if(typeof TextDecoder=="undefined")return $n(a),wr(a),"";a.h.i=new o.TextDecoder}for(let U=0;U<C;U++)a.h.h=!0,p+=a.h.i.decode(h[U],{stream:!(F&&U==C-1)});return h.length=0,a.h.g+=p,a.C=0,a.h.g}function Kt(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function ec(a,h){var p=a.C,C=h.indexOf(`
`,p);return C==-1?_r:(p=Number(h.substring(p,C)),isNaN(p)?Go:(C+=1,C+p>h.length?_r:(h=h.slice(C,C+p),a.C=C+p,h)))}cn.prototype.cancel=function(){this.K=!0,$n(this)};function _s(a){a.T=Date.now()+a.H,Xo(a,a.H)}function Xo(a,h){if(a.D!=null)throw Error("WatchDog timer not null");a.D=lt(d(a.aa,a),h)}function Qo(a){a.D&&(o.clearTimeout(a.D),a.D=null)}cn.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(ct(this.i,this.B),this.M!=2&&(wn(),at(17)),$n(this),this.m=2,wr(this)):Xo(this,this.T-a)};function wr(a){a.j.I==0||a.K||Gg(a.j,a)}function $n(a){Qo(a);var h=a.O;h&&typeof h.dispose=="function"&&h.dispose(),a.O=null,hs(a.V),a.g&&(h=a.g,a.g=null,h.abort(),h.dispose())}function Yo(a,h){try{var p=a.j;if(p.I!=0&&(p.g==a||Jo(p.h,a))){if(!a.L&&Jo(p.h,a)&&p.I==3){try{var C=p.Ba.g.parse(h)}catch{C=null}if(Array.isArray(C)&&C.length==3){var F=C;if(F[0]==0){e:if(!p.v){if(p.g)if(p.g.F+3e3<a.F)cc(p),ac(p);else break e;ih(p),at(18)}}else p.xa=F[1],0<p.xa-p.K&&F[2]<37500&&p.F&&p.A==0&&!p.C&&(p.C=lt(d(p.Va,p),6e3));rc(p.h)<=1&&p.ta&&(p.ta=void 0)}else bi(p,11)}else if((a.L||p.g==a)&&cc(p),!w(h))for(F=p.Ba.g.parse(h),h=0;h<F.length;h++){let xe=F[h];const tt=xe[0];if(!(tt<=p.K))if(p.K=tt,xe=xe[1],p.I==2)if(xe[0]=="c"){p.M=xe[1],p.ba=xe[2];const Sn=xe[3];Sn!=null&&(p.ka=Sn,p.j.info("VER="+p.ka));const ki=xe[4];ki!=null&&(p.za=ki,p.j.info("SVER="+p.za));const Tr=xe[5];Tr!=null&&typeof Tr=="number"&&Tr>0&&(C=1.5*Tr,p.O=C,p.j.info("backChannelRequestTimeoutMs_="+C)),C=p;const Ir=a.g;if(Ir){const dc=Ir.g?Ir.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(dc){var U=C.h;U.g||dc.indexOf("spdy")==-1&&dc.indexOf("quic")==-1&&dc.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(Zo(U,U.h),U.h=null))}if(C.G){const oh=Ir.g?Ir.g.getResponseHeader("X-HTTP-Session-Id"):null;oh&&(C.wa=oh,ke(C.J,C.G,oh))}}p.I=3,p.l&&p.l.ra(),p.aa&&(p.T=Date.now()-a.F,p.j.info("Handshake RTT: "+p.T+"ms")),C=p;var Z=a;if(C.na=Qg(C,C.L?C.ba:null,C.W),Z.L){Wn(C.h,Z);var me=Z,Ye=C.O;Ye&&(me.H=Ye),me.D&&(Qo(me),_s(me)),C.g=Z}else Hg(C);p.i.length>0&&lc(p)}else xe[0]!="stop"&&xe[0]!="close"||bi(p,7);else p.I==3&&(xe[0]=="stop"||xe[0]=="close"?xe[0]=="stop"?bi(p,7):rh(p):xe[0]!="noop"&&p.l&&p.l.qa(xe),p.A=0)}}wn(4)}catch{}}var wi=class{constructor(a,h){this.g=a,this.map=h}};function tc(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function nc(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function rc(a){return a.h?1:a.g?a.g.size:0}function Jo(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function Zo(a,h){a.g?a.g.add(h):a.h=h}function Wn(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}tc.prototype.cancel=function(){if(this.i=ws(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function ws(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const p of a.g.values())h=h.concat(p.G);return h}return T(a.i)}var ic=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ei(a,h){if(a){a=a.split("&");for(let p=0;p<a.length;p++){const C=a[p].indexOf("=");let F,U=null;C>=0?(F=a[p].substring(0,C),U=a[p].substring(C+1)):F=a[p],h(F,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function un(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let h;a instanceof un?(this.l=a.l,Si(this,a.j),this.o=a.o,this.g=a.g,Ti(this,a.u),this.h=a.h,ea(this,Og(a.i)),this.m=a.m):a&&(h=String(a).match(ic))?(this.l=!1,Si(this,h[1]||"",!0),this.o=Ii(h[2]||""),this.g=Ii(h[3]||"",!0),Ti(this,h[4]),this.h=Ii(h[5]||"",!0),ea(this,h[6]||"",!0),this.m=Ii(h[7]||"")):(this.l=!1,this.i=new ta(null,this.l))}un.prototype.toString=function(){const a=[];var h=this.j;h&&a.push(A(h,oe,!0),":");var p=this.g;return(p||h=="file")&&(a.push("//"),(h=this.o)&&a.push(A(h,oe,!0),"@"),a.push(vr(p).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.u,p!=null&&a.push(":",String(p))),(p=this.h)&&(this.g&&p.charAt(0)!="/"&&a.push("/"),a.push(A(p,p.charAt(0)=="/"?K:pe,!0))),(p=this.i.toString())&&a.push("?",p),(p=this.m)&&a.push("#",A(p,Ss)),a.join("")},un.prototype.resolve=function(a){const h=Xt(this);let p=!!a.j;p?Si(h,a.j):p=!!a.o,p?h.o=a.o:p=!!a.g,p?h.g=a.g:p=a.u!=null;var C=a.h;if(p)Ti(h,a.u);else if(p=!!a.h){if(C.charAt(0)!="/")if(this.g&&!this.h)C="/"+C;else{var F=h.h.lastIndexOf("/");F!=-1&&(C=h.h.slice(0,F+1)+C)}if(F=C,F==".."||F==".")C="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){C=F.lastIndexOf("/",0)==0,F=F.split("/");const U=[];for(let Z=0;Z<F.length;){const me=F[Z++];me=="."?C&&Z==F.length&&U.push(""):me==".."?((U.length>1||U.length==1&&U[0]!="")&&U.pop(),C&&Z==F.length&&U.push("")):(U.push(me),C=!0)}C=U.join("/")}else C=F}return p?h.h=C:p=a.i.toString()!=="",p?ea(h,Og(a.i)):p=!!a.m,p&&(h.m=a.m),h};function Xt(a){return new un(a)}function Si(a,h,p){a.j=p?Ii(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function Ti(a,h){if(h){if(h=Number(h),isNaN(h)||h<0)throw Error("Bad port number "+h);a.u=h}else a.u=null}function ea(a,h,p){h instanceof ta?(a.i=h,xT(a.i,a.l)):(p||(h=A(h,En)),a.i=new ta(h,a.l))}function ke(a,h,p){a.i.set(h,p)}function Es(a){return ke(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function Ii(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function A(a,h,p){return typeof a=="string"?(a=encodeURI(a).replace(h,G),p&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function G(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var oe=/[#\/\?@]/g,pe=/[#\?:]/g,K=/[#\?]/g,En=/[#\?@]/g,Ss=/#/g;function ta(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function Ci(a){a.g||(a.g=new Map,a.h=0,a.i&&Ei(a.i,function(h,p){a.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=ta.prototype,t.add=function(a,h){Ci(this),this.i=null,a=Ts(this,a);let p=this.g.get(a);return p||this.g.set(a,p=[]),p.push(h),this.h+=1,this};function Pg(a,h){Ci(a),h=Ts(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function Rg(a,h){return Ci(a),h=Ts(a,h),a.g.has(h)}t.forEach=function(a,h){Ci(this),this.g.forEach(function(p,C){p.forEach(function(F){a.call(h,F,C,this)},this)},this)};function Ng(a,h){Ci(a);let p=[];if(typeof h=="string")Rg(a,h)&&(p=p.concat(a.g.get(Ts(a,h))));else for(a=Array.from(a.g.values()),h=0;h<a.length;h++)p=p.concat(a[h]);return p}t.set=function(a,h){return Ci(this),this.i=null,a=Ts(this,a),Rg(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=Ng(this,a),a.length>0?String(a[0]):h):h};function Dg(a,h,p){Pg(a,h),p.length>0&&(a.i=null,a.g.set(Ts(a,h),T(p)),a.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(let C=0;C<h.length;C++){var p=h[C];const F=vr(p);p=Ng(this,p);for(let U=0;U<p.length;U++){let Z=F;p[U]!==""&&(Z+="="+vr(p[U])),a.push(Z)}}return this.i=a.join("&")};function Og(a){const h=new ta;return h.i=a.i,a.g&&(h.g=new Map(a.g),h.h=a.h),h}function Ts(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function xT(a,h){h&&!a.j&&(Ci(a),a.i=null,a.g.forEach(function(p,C){const F=C.toLowerCase();C!=F&&(Pg(this,C),Dg(this,F,p))},a)),a.j=h}function AT(a,h){const p=new ys;if(o.Image){const C=new Image;C.onload=f(Er,p,"TestLoadImage: loaded",!0,h,C),C.onerror=f(Er,p,"TestLoadImage: error",!1,h,C),C.onabort=f(Er,p,"TestLoadImage: abort",!1,h,C),C.ontimeout=f(Er,p,"TestLoadImage: timeout",!1,h,C),o.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=a}else h(!1)}function PT(a,h){const p=new ys,C=new AbortController,F=setTimeout(()=>{C.abort(),Er(p,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:C.signal}).then(U=>{clearTimeout(F),U.ok?Er(p,"TestPingServer: ok",!0,h):Er(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(F),Er(p,"TestPingServer: error",!1,h)})}function Er(a,h,p,C,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),C(p)}catch{}}function RT(){this.g=new Yl}function th(a){this.i=a.Sb||null,this.h=a.ab||!1}v(th,zo),th.prototype.g=function(){return new sc(this.i,this.h)};function sc(a,h){qe.call(this),this.H=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(sc,qe),t=sc.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=h,this.readyState=1,ra(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const h={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(h.body=a),(this.H||o).fetch(new Request(this.D,h)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,na(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,ra(this)),this.g&&(this.readyState=3,ra(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream!="undefined"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Lg(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function Lg(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.B.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?na(this):ra(this),this.readyState==3&&Lg(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,na(this))},t.Na=function(a){this.g&&(this.response=a,na(this))},t.ga=function(){this.g&&na(this)};function na(a){a.readyState=4,a.l=null,a.j=null,a.B=null,ra(a)}t.setRequestHeader=function(a,h){this.A.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,a.push(p[0]+": "+p[1]),p=h.next();return a.join(`\r
`)};function ra(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(sc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Mg(a){let h="";return $(a,function(p,C){h+=C,h+=":",h+=p,h+=`\r
`}),h}function nh(a,h,p){e:{for(C in p){var C=!1;break e}C=!0}C||(p=Mg(p),typeof a=="string"?p!=null&&vr(p):ke(a,h,p))}function Be(a){qe.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(Be,qe);var NT=/^https?$/i,DT=["POST","PUT"];t=Be.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,h,p,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():vs.g(),this.g.onreadystatechange=m(d(this.Ca,this));try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(U){Fg(this,U);return}if(a=p||"",p=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var F in C)p.set(F,C[F]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const U of C.keys())p.set(U,C.get(U));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(p.keys()).find(U=>U.toLowerCase()=="content-type"),F=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(DT,h,void 0)>=0)||C||F||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,Z]of p)this.g.setRequestHeader(U,Z);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(U){Fg(this,U)}};function Fg(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.o=5,Vg(a),oc(a)}function Vg(a){a.A||(a.A=!0,Qe(a,"complete"),Qe(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,Qe(this,"complete"),Qe(this,"abort"),oc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),oc(this,!0)),Be.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Ug(this):this.Xa())},t.Xa=function(){Ug(this)};function Ug(a){if(a.h&&typeof s!="undefined"){if(a.v&&Sr(a)==4)setTimeout(a.Ca.bind(a),0);else if(Qe(a,"readystatechange"),Sr(a)==4){a.h=!1;try{const U=a.ca();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var C;if(C=U===0){let Z=String(a.D).match(ic)[1]||null;!Z&&o.self&&o.self.location&&(Z=o.self.location.protocol.slice(0,-1)),C=!NT.test(Z?Z.toLowerCase():"")}p=C}if(p)Qe(a,"complete"),Qe(a,"success");else{a.o=6;try{var F=Sr(a)>2?a.g.statusText:""}catch{F=""}a.l=F+" ["+a.ca()+"]",Vg(a)}}finally{oc(a)}}}}function oc(a,h){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const p=a.g;a.g=null,h||Qe(a,"ready");try{p.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Sr(a){return a.g?a.g.readyState:0}t.ca=function(){try{return Sr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),ps(h)}};function Bg(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function OT(a){const h={};a=(a.g&&Sr(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<a.length;C++){if(w(a[C]))continue;var p=Jl(a[C]);const F=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const U=h[F]||[];h[F]=U,U.push(p)}H(h,function(C){return C.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ia(a,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[a]||h}function zg(a){this.za=0,this.i=[],this.j=new ys,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ia("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ia("baseRetryDelayMs",5e3,a),this.Za=ia("retryDelaySeedMs",1e4,a),this.Ta=ia("forwardChannelMaxRetries",2,a),this.va=ia("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new tc(a&&a.concurrentRequestLimit),this.Ba=new RT,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=zg.prototype,t.ka=8,t.I=1,t.connect=function(a,h,p,C){at(0),this.W=a,this.H=h||{},p&&C!==void 0&&(this.H.OSID=p,this.H.OAID=C),this.F=this.X,this.J=Qg(this,null,this.W),lc(this)};function rh(a){if(jg(a),a.I==3){var h=a.V++,p=Xt(a.J);if(ke(p,"SID",a.M),ke(p,"RID",h),ke(p,"TYPE","terminate"),sa(a,p),h=new cn(a,a.j,h),h.M=2,h.A=Es(Xt(p)),p=!1,o.navigator&&o.navigator.sendBeacon)try{p=o.navigator.sendBeacon(h.A.toString(),"")}catch{}!p&&o.Image&&(new Image().src=h.A,p=!0),p||(h.g=Yg(h.j,null),h.g.ea(h.A)),h.F=Date.now(),_s(h)}Xg(a)}function ac(a){a.g&&(sh(a),a.g.cancel(),a.g=null)}function jg(a){ac(a),a.v&&(o.clearTimeout(a.v),a.v=null),cc(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function lc(a){if(!nc(a.h)&&!a.m){a.m=!0;var h=a.Ea;z||_(),V||(z(),V=!0),k.add(h,a),a.D=0}}function LT(a,h){return rc(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=h.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=lt(d(a.Ea,a,h),Kg(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const F=new cn(this,this.j,a);let U=this.o;if(this.U&&(U?(U=M(U),Y(U,this.U)):U=this.U),this.u!==null||this.R||(F.J=U,U=null),this.S)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var C=this.i[p];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(h+=C,h>4096){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=Wg(this,F,h),p=Xt(this.J),ke(p,"RID",a),ke(p,"CVER",22),this.G&&ke(p,"X-HTTP-Session-Id",this.G),sa(this,p),U&&(this.R?h="headers="+vr(Mg(U))+"&"+h:this.u&&nh(p,this.u,U)),Zo(this.h,F),this.Ra&&ke(p,"TYPE","init"),this.S?(ke(p,"$req",h),ke(p,"SID","null"),F.U=!0,Gt(F,p,null)):Gt(F,p,h),this.I=2}}else this.I==3&&(a?$g(this,a):this.i.length==0||nc(this.h)||$g(this))};function $g(a,h){var p;h?p=h.l:p=a.V++;const C=Xt(a.J);ke(C,"SID",a.M),ke(C,"RID",p),ke(C,"AID",a.K),sa(a,C),a.u&&a.o&&nh(C,a.u,a.o),p=new cn(a,a.j,p,a.D+1),a.u===null&&(p.J=a.o),h&&(a.i=h.G.concat(a.i)),h=Wg(a,p,1e3),p.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),Zo(a.h,p),Gt(p,C,h)}function sa(a,h){a.H&&$(a.H,function(p,C){ke(h,C,p)}),a.l&&$({},function(p,C){ke(h,C,p)})}function Wg(a,h,p){p=Math.min(a.i.length,p);const C=a.l?d(a.l.Ka,a.l,a):null;e:{var F=a.i;let me=-1;for(;;){const Ye=["count="+p];me==-1?p>0?(me=F[0].g,Ye.push("ofs="+me)):me=0:Ye.push("ofs="+me);let xe=!0;for(let tt=0;tt<p;tt++){var U=F[tt].g;const Sn=F[tt].map;if(U-=me,U<0)me=Math.max(0,F[tt].g-100),xe=!1;else try{U="req"+U+"_"||"";try{var Z=Sn instanceof Map?Sn:Object.entries(Sn);for(const[ki,Tr]of Z){let Ir=Tr;l(Tr)&&(Ir=fs(Tr)),Ye.push(U+ki+"="+encodeURIComponent(Ir))}}catch(ki){throw Ye.push(U+"type="+encodeURIComponent("_badmap")),ki}}catch{C&&C(Sn)}}if(xe){Z=Ye.join("&");break e}}Z=void 0}return a=a.i.splice(0,p),h.G=a,Z}function Hg(a){if(!a.g&&!a.v){a.Y=1;var h=a.Da;z||_(),V||(z(),V=!0),k.add(h,a),a.A=0}}function ih(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=lt(d(a.Da,a),Kg(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,qg(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=lt(d(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,at(10),ac(this),qg(this))};function sh(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function qg(a){a.g=new cn(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var h=Xt(a.na);ke(h,"RID","rpc"),ke(h,"SID",a.M),ke(h,"AID",a.K),ke(h,"CI",a.F?"0":"1"),!a.F&&a.ia&&ke(h,"TO",a.ia),ke(h,"TYPE","xmlhttp"),sa(a,h),a.u&&a.o&&nh(h,a.u,a.o),a.O&&(a.g.H=a.O);var p=a.g;a=a.ba,p.M=1,p.A=Es(Xt(h)),p.u=null,p.R=!0,Zl(p,a)}t.Va=function(){this.C!=null&&(this.C=null,ac(this),ih(this),at(19))};function cc(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function Gg(a,h){var p=null;if(a.g==h){cc(a),sh(a),a.g=null;var C=2}else if(Jo(a.h,h))p=h.G,Wn(a.h,h),C=1;else return;if(a.I!=0){if(h.o)if(C==1){p=h.u?h.u.length:0,h=Date.now()-h.F;var F=a.D;C=gs(),Qe(C,new Ve(C,p)),lc(a)}else Hg(a);else if(F=h.m,F==3||F==0&&h.X>0||!(C==1&&LT(a,h)||C==2&&ih(a)))switch(p&&p.length>0&&(h=a.h,h.i=h.i.concat(p)),F){case 1:bi(a,5);break;case 4:bi(a,10);break;case 3:bi(a,6);break;default:bi(a,2)}}}function Kg(a,h){let p=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(p*=2),p*h}function bi(a,h){if(a.j.info("Error code "+h),h==2){var p=d(a.bb,a),C=a.Ua;const F=!C;C=new un(C||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Si(C,"https"),Es(C),F?AT(C.toString(),p):PT(C.toString(),p)}else at(2);a.I=0,a.l&&a.l.pa(h),Xg(a),jg(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),at(2)):(this.j.info("Failed to ping google.com"),at(1))};function Xg(a){if(a.I=0,a.ja=[],a.l){const h=ws(a.h);(h.length!=0||a.i.length!=0)&&(P(a.ja,h),P(a.ja,a.i),a.h.i.length=0,T(a.i),a.i.length=0),a.l.oa()}}function Qg(a,h,p){var C=p instanceof un?Xt(p):new un(p);if(C.g!="")h&&(C.g=h+"."+C.g),Ti(C,C.u);else{var F=o.location;C=F.protocol,h=h?h+"."+F.hostname:F.hostname,F=+F.port;const U=new un(null);C&&Si(U,C),h&&(U.g=h),F&&Ti(U,F),p&&(U.h=p),C=U}return p=a.G,h=a.wa,p&&h&&ke(C,p,h),ke(C,"VER",a.ka),sa(a,C),C}function Yg(a,h,p){if(h&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Aa&&!a.ma?new Be(new th({ab:p})):new Be(a.ma),h.Fa(a.L),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Jg(){}t=Jg.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function uc(){}uc.prototype.g=function(a,h){return new Ut(a,h)};function Ut(a,h){qe.call(this),this.g=new zg(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.sa&&(a?a["X-WebChannel-Client-Profile"]=h.sa:a={"X-WebChannel-Client-Profile":h.sa}),this.g.U=a,(a=h&&h.Qb)&&!w(a)&&(this.g.u=a),this.A=h&&h.supportsCrossDomainXhr||!1,this.v=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!w(h)&&(this.g.G=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new Is(this)}v(Ut,qe),Ut.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ut.prototype.close=function(){rh(this.g)},Ut.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var p={};p.__data__=a,a=p}else this.v&&(p={},p.__data__=fs(a),a=p);h.i.push(new wi(h.Ya++,a)),h.I==3&&lc(h)},Ut.prototype.N=function(){this.g.l=null,delete this.j,rh(this.g),delete this.g,Ut.Z.N.call(this)};function Zg(a){an.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const p in h){a=p;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}v(Zg,an);function ey(){pr.call(this),this.status=1}v(ey,pr);function Is(a){this.g=a}v(Is,Jg),Is.prototype.ra=function(){Qe(this.g,"a")},Is.prototype.qa=function(a){Qe(this.g,new Zg(a))},Is.prototype.pa=function(a){Qe(this.g,new ey)},Is.prototype.oa=function(){Qe(this.g,"b")},uc.prototype.createWebChannel=uc.prototype.g,Ut.prototype.send=Ut.prototype.o,Ut.prototype.open=Ut.prototype.m,Ut.prototype.close=Ut.prototype.close,tE=function(){return new uc},eE=function(){return gs()},Zw=Pt,Yf={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},_i.NO_ERROR=0,_i.TIMEOUT=8,_i.HTTP_ERROR=6,Hc=_i,yr.COMPLETE="complete",Jw=yr,jo.EventType=fr,fr.OPEN="a",fr.CLOSE="b",fr.ERROR="c",fr.MESSAGE="d",qe.prototype.listen=qe.prototype.J,ka=jo,Be.prototype.listenOnce=Be.prototype.K,Be.prototype.getLastError=Be.prototype.Ha,Be.prototype.getLastErrorCode=Be.prototype.ya,Be.prototype.getStatus=Be.prototype.ca,Be.prototype.getResponseJson=Be.prototype.La,Be.prototype.getResponseText=Be.prototype.la,Be.prototype.send=Be.prototype.ea,Be.prototype.setWithCredentials=Be.prototype.Fa,Yw=Be}).apply(typeof Cc!="undefined"?Cc:typeof self!="undefined"?self:typeof window!="undefined"?window:{});const zv="@firebase/firestore",jv="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}_t.UNAUTHENTICATED=new _t(null),_t.GOOGLE_CREDENTIALS=new _t("google-credentials-uid"),_t.FIRST_PARTY=new _t("first-party-uid"),_t.MOCK_USER=new _t("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xo="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yi=new Am("@firebase/firestore");function As(){return Yi.logLevel}function re(t,...e){if(Yi.logLevel<=ye.DEBUG){const n=e.map(Nm);Yi.debug(`Firestore (${xo}): ${t}`,...n)}}function sr(t,...e){if(Yi.logLevel<=ye.ERROR){const n=e.map(Nm);Yi.error(`Firestore (${xo}): ${t}`,...n)}}function ao(t,...e){if(Yi.logLevel<=ye.WARN){const n=e.map(Nm);Yi.warn(`Firestore (${xo}): ${t}`,...n)}}function Nm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ce(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,nE(t,r,n)}function nE(t,e,n){let r=`FIRESTORE (${xo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw sr(r),new Error(r)}function Ie(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||nE(e,i,r)}function fe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ee extends cr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Sx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(_t.UNAUTHENTICATED))}shutdown(){}}class Tx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Ix{constructor(e){this.t=e,this.currentUser=_t.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ie(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let s=new Zn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Zn,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},l=c=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Zn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ie(typeof r.accessToken=="string",31837,{l:r}),new rE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ie(e===null||typeof e=="string",2055,{h:e}),new _t(e)}}class Cx{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=_t.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class bx{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new Cx(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(_t.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class $v{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class kx{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Zt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ie(this.o===void 0,3512);const r=s=>{s.error!=null&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,re("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new $v(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ie(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new $v(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xx(t){const e=typeof self!="undefined"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=xx(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function ve(t,e){return t<e?-1:t>e?1:0}function Jf(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return zh(i)===zh(s)?ve(i,s):zh(i)?1:-1}return ve(t.length,e.length)}const Ax=55296,Px=57343;function zh(t){const e=t.charCodeAt(0);return e>=Ax&&e<=Px}function lo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wv="__name__";class In{constructor(e,n,r){n===void 0?n=0:n>e.length&&ce(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ce(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return In.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof In?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=In.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return ve(e.length,n.length)}static compareSegments(e,n){const r=In.isNumericId(e),i=In.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?In.extractNumericId(e).compare(In.extractNumericId(n)):Jf(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Xr.fromString(e.substring(4,e.length-2))}}class Re extends In{construct(e,n,r){return new Re(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ee(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Re(n)}static emptyPath(){return new Re([])}}const Rx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ft extends In{construct(e,n,r){return new ft(e,n,r)}static isValidIdentifier(e){return Rx.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ft.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Wv}static keyField(){return new ft([Wv])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ee(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new ee(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ee(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(s(),i++)}if(s(),o)throw new ee(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ft(n)}static emptyPath(){return new ft([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.path=e}static fromPath(e){return new ae(Re.fromString(e))}static fromName(e){return new ae(Re.fromString(e).popFirst(5))}static empty(){return new ae(Re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Re.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Re.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ae(new Re(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iE(t,e,n){if(!n)throw new ee(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Nx(t,e,n,r){if(e===!0&&r===!0)throw new ee(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Hv(t){if(!ae.isDocumentKey(t))throw new ee(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function qv(t){if(ae.isDocumentKey(t))throw new ee(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function sE(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Cd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ce(12329,{type:typeof t})}function $t(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ee(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Cd(t);throw new ee(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xe(t,e){const n={typeString:t};return e&&(n.value=e),n}function Ol(t,e){if(!sE(t))throw new ee(j.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new ee(j.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv=-62135596800,Kv=1e6;class Oe{static now(){return Oe.fromMillis(Date.now())}static fromDate(e){return Oe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Kv);return new Oe(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ee(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ee(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Gv)throw new ee(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ee(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Kv}_compareTo(e){return this.seconds===e.seconds?ve(this.nanoseconds,e.nanoseconds):ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Oe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ol(e,Oe._jsonSchema))return new Oe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Gv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Oe._jsonSchemaVersion="firestore/timestamp/1.0",Oe._jsonSchema={type:Xe("string",Oe._jsonSchemaVersion),seconds:Xe("number"),nanoseconds:Xe("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{static fromTimestamp(e){return new he(e)}static min(){return new he(new Oe(0,0))}static max(){return new he(new Oe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pl=-1;function Dx(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=he.fromTimestamp(r===1e9?new Oe(n+1,0):new Oe(n,r));return new ni(i,ae.empty(),e)}function Ox(t){return new ni(t.readTime,t.key,pl)}class ni{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ni(he.min(),ae.empty(),pl)}static max(){return new ni(he.max(),ae.empty(),pl)}}function Lx(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ae.comparator(t.documentKey,e.documentKey),n!==0?n:ve(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Fx{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ao(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==Mx)throw t;re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ce(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new W((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof W?n:W.resolve(n)}catch(n){return W.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):W.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):W.reject(n)}static resolve(e){return new W((n,r)=>{n(e)})}static reject(e){return new W((n,r)=>{r(e)})}static waitFor(e){return new W((n,r)=>{let i=0,s=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=W.resolve(!1);for(const r of e)n=n.next(i=>i?W.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new W((r,i)=>{const s=e.length,o=new Array(s);let l=0;for(let c=0;c<s;c++){const d=c;n(e[d]).next(f=>{o[d]=f,++l,l===s&&r(o)},f=>i(f))}})}static doWhile(e,n){return new W((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function Vx(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Po(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}bd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Om=-1;function kd(t){return t==null}function Pu(t){return t===0&&1/t==-1/0}function Ux(t){return typeof t=="number"&&Number.isInteger(t)&&!Pu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oE="";function Bx(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Xv(e)),e=zx(t.get(n),e);return Xv(e)}function zx(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case oE:n+="";break;default:n+=s}}return n}function Xv(t){return t+oE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function hi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function aE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e,n){this.comparator=e,this.root=n||dt.EMPTY}insert(e,n){return new Ue(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,dt.BLACK,null,null))}remove(e){return new Ue(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new bc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new bc(this.root,e,this.comparator,!1)}getReverseIterator(){return new bc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new bc(this.root,e,this.comparator,!0)}}class bc{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class dt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r!=null?r:dt.RED,this.left=i!=null?i:dt.EMPTY,this.right=s!=null?s:dt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new dt(e!=null?e:this.key,n!=null?n:this.value,r!=null?r:this.color,i!=null?i:this.left,s!=null?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return dt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return dt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,dt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,dt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ce(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ce(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ce(27949);return e+(this.isRed()?0:1)}}dt.EMPTY=null,dt.RED=!0,dt.BLACK=!1;dt.EMPTY=new class{constructor(){this.size=0}get key(){throw ce(57766)}get value(){throw ce(16141)}get color(){throw ce(16727)}get left(){throw ce(29726)}get right(){throw ce(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new dt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e){this.comparator=e,this.data=new Ue(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Yv(this.data.getIterator())}getIteratorFrom(e){return new Yv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ze)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ze(this.comparator);return n.data=e,n}}class Yv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.fields=e,e.sort(ft.comparator)}static empty(){return new zt([])}unionWith(e){let n=new Ze(ft.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new zt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return lo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException!="undefined"&&s instanceof DOMException?new lE("Invalid base64 string: "+s):s}}(e);return new gt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new gt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}gt.EMPTY_BYTE_STRING=new gt("");const jx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ri(t){if(Ie(!!t,39018),typeof t=="string"){let e=0;const n=jx.exec(t);if(Ie(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:We(t.seconds),nanos:We(t.nanos)}}function We(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ii(t){return typeof t=="string"?gt.fromBase64String(t):gt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE="server_timestamp",uE="__type__",dE="__previous_value__",hE="__local_write_time__";function Lm(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[uE])==null?void 0:r.stringValue)===cE}function xd(t){const e=t.mapValue.fields[dE];return Lm(e)?xd(e):e}function ml(t){const e=ri(t.mapValue.fields[hE].timestampValue);return new Oe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(e,n,r,i,s,o,l,c,d,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=f}}const Ru="(default)";class gl{constructor(e,n){this.projectId=e,this.database=n||Ru}static empty(){return new gl("","")}get isDefaultDatabase(){return this.database===Ru}isEqual(e){return e instanceof gl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fE="__type__",pE="__max__",kc={mapValue:{fields:{__type__:{stringValue:pE}}}},mE="__vector__",Nu="value";function si(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Lm(t)?4:Hx(t)?9007199254740991:Wx(t)?10:11:ce(28295,{value:t})}function Vn(t,e){if(t===e)return!0;const n=si(t);if(n!==si(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ml(t).isEqual(ml(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=ri(i.timestampValue),l=ri(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return ii(i.bytesValue).isEqual(ii(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return We(i.geoPointValue.latitude)===We(s.geoPointValue.latitude)&&We(i.geoPointValue.longitude)===We(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return We(i.integerValue)===We(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=We(i.doubleValue),l=We(s.doubleValue);return o===l?Pu(o)===Pu(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return lo(t.arrayValue.values||[],e.arrayValue.values||[],Vn);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},l=s.mapValue.fields||{};if(Qv(o)!==Qv(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Vn(o[c],l[c])))return!1;return!0}(t,e);default:return ce(52216,{left:t})}}function yl(t,e){return(t.values||[]).find(n=>Vn(n,e))!==void 0}function co(t,e){if(t===e)return 0;const n=si(t),r=si(e);if(n!==r)return ve(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ve(t.booleanValue,e.booleanValue);case 2:return function(s,o){const l=We(s.integerValue||s.doubleValue),c=We(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return Jv(t.timestampValue,e.timestampValue);case 4:return Jv(ml(t),ml(e));case 5:return Jf(t.stringValue,e.stringValue);case 6:return function(s,o){const l=ii(s),c=ii(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),c=o.split("/");for(let d=0;d<l.length&&d<c.length;d++){const f=ve(l[d],c[d]);if(f!==0)return f}return ve(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const l=ve(We(s.latitude),We(o.latitude));return l!==0?l:ve(We(s.longitude),We(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Zv(t.arrayValue,e.arrayValue);case 10:return function(s,o){var m,T,P,R;const l=s.fields||{},c=o.fields||{},d=(m=l[Nu])==null?void 0:m.arrayValue,f=(T=c[Nu])==null?void 0:T.arrayValue,v=ve(((P=d==null?void 0:d.values)==null?void 0:P.length)||0,((R=f==null?void 0:f.values)==null?void 0:R.length)||0);return v!==0?v:Zv(d,f)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===kc.mapValue&&o===kc.mapValue)return 0;if(s===kc.mapValue)return 1;if(o===kc.mapValue)return-1;const l=s.fields||{},c=Object.keys(l),d=o.fields||{},f=Object.keys(d);c.sort(),f.sort();for(let v=0;v<c.length&&v<f.length;++v){const m=Jf(c[v],f[v]);if(m!==0)return m;const T=co(l[c[v]],d[f[v]]);if(T!==0)return T}return ve(c.length,f.length)}(t.mapValue,e.mapValue);default:throw ce(23264,{he:n})}}function Jv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ve(t,e);const n=ri(t),r=ri(e),i=ve(n.seconds,r.seconds);return i!==0?i:ve(n.nanos,r.nanos)}function Zv(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=co(n[i],r[i]);if(s)return s}return ve(n.length,r.length)}function uo(t){return Zf(t)}function Zf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ri(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ii(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ae.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Zf(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Zf(n.fields[o])}`;return i+"}"}(t.mapValue):ce(61005,{value:t})}function qc(t){switch(si(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=xd(t);return e?16+qc(e):16;case 5:return 2*t.stringValue.length;case 6:return ii(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+qc(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return hi(r.fields,(s,o)=>{i+=s.length+qc(o)}),i}(t.mapValue);default:throw ce(13486,{value:t})}}function e0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ep(t){return!!t&&"integerValue"in t}function Mm(t){return!!t&&"arrayValue"in t}function t0(t){return!!t&&"nullValue"in t}function n0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Gc(t){return!!t&&"mapValue"in t}function Wx(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[fE])==null?void 0:r.stringValue)===mE}function Ha(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return hi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ha(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ha(t.arrayValue.values[n]);return e}return{...t}}function Hx(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===pE}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.value=e}static empty(){return new Lt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Gc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ha(n)}setAll(e){let n=ft.emptyPath(),r={},i=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=l.popLast()}o?r[l.lastSegment()]=Ha(o):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Gc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Vn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Gc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){hi(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Lt(Ha(this.value))}}function gE(t){const e=[];return hi(t.fields,(n,r)=>{const i=new ft([n]);if(Gc(r)){const s=gE(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new zt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e,n,r,i,s,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new wt(e,0,he.min(),he.min(),he.min(),Lt.empty(),0)}static newFoundDocument(e,n,r,i){return new wt(e,1,n,he.min(),r,i,0)}static newNoDocument(e,n){return new wt(e,2,n,he.min(),he.min(),Lt.empty(),0)}static newUnknownDocument(e,n){return new wt(e,3,n,he.min(),he.min(),Lt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(he.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Lt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Lt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=he.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof wt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(e,n){this.position=e,this.inclusive=n}}function r0(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=ae.comparator(ae.fromName(o.referenceValue),n.key):r=co(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function i0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Vn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(e,n="asc"){this.field=e,this.dir=n}}function qx(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE{}class Ke extends yE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Kx(e,n,r):n==="array-contains"?new Yx(e,r):n==="in"?new Jx(e,r):n==="not-in"?new Zx(e,r):n==="array-contains-any"?new eA(e,r):new Ke(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Xx(e,r):new Qx(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(co(n,this.value)):n!==null&&si(this.value)===si(n)&&this.matchesComparison(co(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ce(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class vn extends yE{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new vn(e,n)}matches(e){return vE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function vE(t){return t.op==="and"}function _E(t){return Gx(t)&&vE(t)}function Gx(t){for(const e of t.filters)if(e instanceof vn)return!1;return!0}function tp(t){if(t instanceof Ke)return t.field.canonicalString()+t.op.toString()+uo(t.value);if(_E(t))return t.filters.map(e=>tp(e)).join(",");{const e=t.filters.map(n=>tp(n)).join(",");return`${t.op}(${e})`}}function wE(t,e){return t instanceof Ke?function(r,i){return i instanceof Ke&&r.op===i.op&&r.field.isEqual(i.field)&&Vn(r.value,i.value)}(t,e):t instanceof vn?function(r,i){return i instanceof vn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,l)=>s&&wE(o,i.filters[l]),!0):!1}(t,e):void ce(19439)}function EE(t){return t instanceof Ke?function(n){return`${n.field.canonicalString()} ${n.op} ${uo(n.value)}`}(t):t instanceof vn?function(n){return n.op.toString()+" {"+n.getFilters().map(EE).join(" ,")+"}"}(t):"Filter"}class Kx extends Ke{constructor(e,n,r){super(e,n,r),this.key=ae.fromName(r.referenceValue)}matches(e){const n=ae.comparator(e.key,this.key);return this.matchesComparison(n)}}class Xx extends Ke{constructor(e,n){super(e,"in",n),this.keys=SE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Qx extends Ke{constructor(e,n){super(e,"not-in",n),this.keys=SE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function SE(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>ae.fromName(r.referenceValue))}class Yx extends Ke{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Mm(n)&&yl(n.arrayValue,this.value)}}class Jx extends Ke{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&yl(this.value.arrayValue,n)}}class Zx extends Ke{constructor(e,n){super(e,"not-in",n)}matches(e){if(yl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!yl(this.value.arrayValue,n)}}class eA extends Ke{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Mm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>yl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e,n=null,r=[],i=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=l,this.Te=null}}function s0(t,e=null,n=[],r=[],i=null,s=null,o=null){return new tA(t,e,n,r,i,s,o)}function Fm(t){const e=fe(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>tp(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),kd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>uo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>uo(r)).join(",")),e.Te=n}return e.Te}function Vm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!qx(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!wE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!i0(t.startAt,e.startAt)&&i0(t.endAt,e.endAt)}function np(t){return ae.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e,n=null,r=[],i=[],s=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function nA(t,e,n,r,i,s,o,l){return new Ro(t,e,n,r,i,s,o,l)}function Ad(t){return new Ro(t)}function o0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function TE(t){return t.collectionGroup!==null}function qa(t){const e=fe(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Ze(ft.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new vl(s,r))}),n.has(ft.keyField().canonicalString())||e.Ie.push(new vl(ft.keyField(),r))}return e.Ie}function Rn(t){const e=fe(t);return e.Ee||(e.Ee=rA(e,qa(t))),e.Ee}function rA(t,e){if(t.limitType==="F")return s0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new vl(i.field,s)});const n=t.endAt?new Du(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Du(t.startAt.position,t.startAt.inclusive):null;return s0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function rp(t,e){const n=t.filters.concat([e]);return new Ro(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function ip(t,e,n){return new Ro(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Pd(t,e){return Vm(Rn(t),Rn(e))&&t.limitType===e.limitType}function IE(t){return`${Fm(Rn(t))}|lt:${t.limitType}`}function Ps(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>EE(i)).join(", ")}]`),kd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>uo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>uo(i)).join(",")),`Target(${r})`}(Rn(t))}; limitType=${t.limitType})`}function Rd(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ae.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of qa(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,l,c){const d=r0(o,l,c);return o.inclusive?d<=0:d<0}(r.startAt,qa(r),i)||r.endAt&&!function(o,l,c){const d=r0(o,l,c);return o.inclusive?d>=0:d>0}(r.endAt,qa(r),i))}(t,e)}function iA(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function CE(t){return(e,n)=>{let r=!1;for(const i of qa(t)){const s=sA(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function sA(t,e,n){const r=t.field.isKeyField()?ae.comparator(e.key,n.key):function(s,o,l){const c=o.data.field(s),d=l.data.field(s);return c!==null&&d!==null?co(c,d):ce(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ce(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){hi(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return aE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA=new Ue(ae.comparator);function or(){return oA}const bE=new Ue(ae.comparator);function xa(...t){let e=bE;for(const n of t)e=e.insert(n.key,n);return e}function kE(t){let e=bE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function zi(){return Ga()}function xE(){return Ga()}function Ga(){return new os(t=>t.toString(),(t,e)=>t.isEqual(e))}const aA=new Ue(ae.comparator),lA=new Ze(ae.comparator);function _e(...t){let e=lA;for(const n of t)e=e.add(n);return e}const cA=new Ze(ve);function uA(){return cA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Um(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Pu(e)?"-0":e}}function AE(t){return{integerValue:""+t}}function dA(t,e){return Ux(e)?AE(e):Um(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(){this._=void 0}}function hA(t,e,n){return t instanceof Ou?function(i,s){const o={fields:{[uE]:{stringValue:cE},[hE]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Lm(s)&&(s=xd(s)),s&&(o.fields[dE]=s),{mapValue:o}}(n,e):t instanceof _l?RE(t,e):t instanceof wl?NE(t,e):function(i,s){const o=PE(i,s),l=a0(o)+a0(i.Ae);return ep(o)&&ep(i.Ae)?AE(l):Um(i.serializer,l)}(t,e)}function fA(t,e,n){return t instanceof _l?RE(t,e):t instanceof wl?NE(t,e):n}function PE(t,e){return t instanceof Lu?function(r){return ep(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Ou extends Nd{}class _l extends Nd{constructor(e){super(),this.elements=e}}function RE(t,e){const n=DE(e);for(const r of t.elements)n.some(i=>Vn(i,r))||n.push(r);return{arrayValue:{values:n}}}class wl extends Nd{constructor(e){super(),this.elements=e}}function NE(t,e){let n=DE(e);for(const r of t.elements)n=n.filter(i=>!Vn(i,r));return{arrayValue:{values:n}}}class Lu extends Nd{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function a0(t){return We(t.integerValue||t.doubleValue)}function DE(t){return Mm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function pA(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof _l&&i instanceof _l||r instanceof wl&&i instanceof wl?lo(r.elements,i.elements,Vn):r instanceof Lu&&i instanceof Lu?Vn(r.Ae,i.Ae):r instanceof Ou&&i instanceof Ou}(t.transform,e.transform)}class mA{constructor(e,n){this.version=e,this.transformResults=n}}class yn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new yn}static exists(e){return new yn(void 0,e)}static updateTime(e){return new yn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Kc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Dd{}function OE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Bm(t.key,yn.none()):new Ll(t.key,t.data,yn.none());{const n=t.data,r=Lt.empty();let i=new Ze(ft.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new fi(t.key,r,new zt(i.toArray()),yn.none())}}function gA(t,e,n){t instanceof Ll?function(i,s,o){const l=i.value.clone(),c=c0(i.fieldTransforms,s,o.transformResults);l.setAll(c),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof fi?function(i,s,o){if(!Kc(i.precondition,s))return void s.convertToUnknownDocument(o.version);const l=c0(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(LE(i)),c.setAll(l),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ka(t,e,n,r){return t instanceof Ll?function(s,o,l,c){if(!Kc(s.precondition,o))return l;const d=s.value.clone(),f=u0(s.fieldTransforms,c,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof fi?function(s,o,l,c){if(!Kc(s.precondition,o))return l;const d=u0(s.fieldTransforms,c,o),f=o.data;return f.setAll(LE(s)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(v=>v.field))}(t,e,n,r):function(s,o,l){return Kc(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function yA(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=PE(r.transform,i||null);s!=null&&(n===null&&(n=Lt.empty()),n.set(r.field,s))}return n||null}function l0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&lo(r,i,(s,o)=>pA(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ll extends Dd{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class fi extends Dd{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function LE(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function c0(t,e,n){const r=new Map;Ie(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,l=e.data.field(s.field);r.set(s.field,fA(o,l,n[i]))}return r}function u0(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,hA(s,o,e))}return r}class Bm extends Dd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class vA extends Dd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&gA(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ka(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ka(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=xE();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=n.has(i.key)?null:l;const c=OE(o,l);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(he.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),_e())}isEqual(e){return this.batchId===e.batchId&&lo(this.mutations,e.mutations,(n,r)=>l0(n,r))&&lo(this.baseMutations,e.baseMutations,(n,r)=>l0(n,r))}}class zm{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ie(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return aA}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new zm(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ge,Se;function SA(t){switch(t){case j.OK:return ce(64938);case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0;default:return ce(15467,{code:t})}}function ME(t){if(t===void 0)return sr("GRPC error has no .code"),j.UNKNOWN;switch(t){case Ge.OK:return j.OK;case Ge.CANCELLED:return j.CANCELLED;case Ge.UNKNOWN:return j.UNKNOWN;case Ge.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case Ge.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case Ge.INTERNAL:return j.INTERNAL;case Ge.UNAVAILABLE:return j.UNAVAILABLE;case Ge.UNAUTHENTICATED:return j.UNAUTHENTICATED;case Ge.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case Ge.NOT_FOUND:return j.NOT_FOUND;case Ge.ALREADY_EXISTS:return j.ALREADY_EXISTS;case Ge.PERMISSION_DENIED:return j.PERMISSION_DENIED;case Ge.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case Ge.ABORTED:return j.ABORTED;case Ge.OUT_OF_RANGE:return j.OUT_OF_RANGE;case Ge.UNIMPLEMENTED:return j.UNIMPLEMENTED;case Ge.DATA_LOSS:return j.DATA_LOSS;default:return ce(39323,{code:t})}}(Se=Ge||(Ge={}))[Se.OK=0]="OK",Se[Se.CANCELLED=1]="CANCELLED",Se[Se.UNKNOWN=2]="UNKNOWN",Se[Se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Se[Se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Se[Se.NOT_FOUND=5]="NOT_FOUND",Se[Se.ALREADY_EXISTS=6]="ALREADY_EXISTS",Se[Se.PERMISSION_DENIED=7]="PERMISSION_DENIED",Se[Se.UNAUTHENTICATED=16]="UNAUTHENTICATED",Se[Se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Se[Se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Se[Se.ABORTED=10]="ABORTED",Se[Se.OUT_OF_RANGE=11]="OUT_OF_RANGE",Se[Se.UNIMPLEMENTED=12]="UNIMPLEMENTED",Se[Se.INTERNAL=13]="INTERNAL",Se[Se.UNAVAILABLE=14]="UNAVAILABLE",Se[Se.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jh=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TA(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA=new Xr([4294967295,4294967295],0);function d0(t){const e=TA().encode(t),n=new Qw;return n.update(e),new Uint8Array(n.digest())}function h0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Xr([n,r],0),new Xr([i,s],0)]}class jm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Aa(`Invalid padding: ${n}`);if(r<0)throw new Aa(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Aa(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Aa(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Xr.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Xr.fromNumber(r)));return i.compare(IA)===1&&(i=new Xr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=d0(e),[r,i]=h0(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new jm(s,i,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=d0(e),[r,i]=h0(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Aa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Ml.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Od(he.min(),i,new Ue(ve),or(),_e())}}class Ml{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ml(r,n,_e(),_e(),_e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class FE{constructor(e,n){this.targetId=e,this.Ce=n}}class VE{constructor(e,n,r=gt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class f0{constructor(){this.ve=0,this.Fe=p0(),this.Me=gt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=_e(),n=_e(),r=_e();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ce(38017,{changeType:s})}}),new Ml(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=p0()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ie(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class CA{constructor(e){this.Ge=e,this.ze=new Map,this.je=or(),this.Je=xc(),this.He=xc(),this.Ye=new Ue(ve)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ce(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(np(s))if(r===0){const o=new ae(s.path);this.et(n,o,wt.newNoDocument(o,he.min()))}else Ie(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const l=this.ut(e),c=l?this.ct(l,e,o):1;if(c!==0){this.it(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}jh==null||jh.lt(function(f,v,m,T,P){var E,x,D,O,z,V;const R={localCacheCount:f,existenceFilterCount:v.count,databaseId:m.database,projectId:m.projectId},y=v.unchangedNames;return y&&(R.bloomFilter={applied:P===0,hashCount:(E=y==null?void 0:y.hashCount)!=null?E:0,bitmapLength:(O=(D=(x=y==null?void 0:y.bits)==null?void 0:x.bitmap)==null?void 0:D.length)!=null?O:0,padding:(V=(z=y==null?void 0:y.bits)==null?void 0:z.padding)!=null?V:0,mightContain:k=>{var _;return(_=T==null?void 0:T.mightContain(k))!=null?_:!1}}),R}(o,e.Ce,this.Ge.ht(),l,c))}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,l;try{o=ii(r).toUint8Array()}catch(c){if(c instanceof lE)return ao("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new jm(o,i,s)}catch(c){return ao(c instanceof Aa?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.et(n,s,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((s,o)=>{const l=this.ot(o);if(l){if(s.current&&np(l.target)){const c=new ae(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,wt.newNoDocument(c,e))}s.Be&&(n.set(o,s.ke()),s.qe())}});let r=_e();this.He.forEach((s,o)=>{let l=!0;o.forEachWhile(c=>{const d=this.ot(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));const i=new Od(e,n,this.Ye,this.je,r);return this.je=or(),this.Je=xc(),this.He=xc(),this.Ye=new Ue(ve),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new f0,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ze(ve),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ze(ve),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||re("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new f0),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function xc(){return new Ue(ae.comparator)}function p0(){return new Ue(ae.comparator)}const bA=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),kA=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),xA=(()=>({and:"AND",or:"OR"}))();class AA{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function sp(t,e){return t.useProto3Json||kd(e)?e:{value:e}}function Mu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function UE(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function PA(t,e){return Mu(t,e.toTimestamp())}function Nn(t){return Ie(!!t,49232),he.fromTimestamp(function(n){const r=ri(n);return new Oe(r.seconds,r.nanos)}(t))}function $m(t,e){return op(t,e).canonicalString()}function op(t,e){const n=function(i){return new Re(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function BE(t){const e=Re.fromString(t);return Ie(HE(e),10190,{key:e.toString()}),e}function ap(t,e){return $m(t.databaseId,e.path)}function $h(t,e){const n=BE(e);if(n.get(1)!==t.databaseId.projectId)throw new ee(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ee(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ae(jE(n))}function zE(t,e){return $m(t.databaseId,e)}function RA(t){const e=BE(t);return e.length===4?Re.emptyPath():jE(e)}function lp(t){return new Re(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function jE(t){return Ie(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function m0(t,e,n){return{name:ap(t,e),fields:n.value.mapValue.fields}}function NA(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ce(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(d,f){return d.useProto3Json?(Ie(f===void 0||typeof f=="string",58123),gt.fromBase64String(f||"")):(Ie(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),gt.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const f=d.code===void 0?j.UNKNOWN:ME(d.code);return new ee(f,d.message||"")}(o);n=new VE(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=$h(t,r.document.name),s=Nn(r.document.updateTime),o=r.document.createTime?Nn(r.document.createTime):he.min(),l=new Lt({mapValue:{fields:r.document.fields}}),c=wt.newFoundDocument(i,s,o,l),d=r.targetIds||[],f=r.removedTargetIds||[];n=new Xc(d,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=$h(t,r.document),s=r.readTime?Nn(r.readTime):he.min(),o=wt.newNoDocument(i,s),l=r.removedTargetIds||[];n=new Xc([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=$h(t,r.document),s=r.removedTargetIds||[];n=new Xc([],s,i,null)}else{if(!("filter"in e))return ce(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new EA(i,s),l=r.targetId;n=new FE(l,o)}}return n}function DA(t,e){let n;if(e instanceof Ll)n={update:m0(t,e.key,e.value)};else if(e instanceof Bm)n={delete:ap(t,e.key)};else if(e instanceof fi)n={update:m0(t,e.key,e.data),updateMask:jA(e.fieldMask)};else{if(!(e instanceof vA))return ce(16599,{Vt:e.type});n={verify:ap(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const l=o.transform;if(l instanceof Ou)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof _l)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof wl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Lu)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw ce(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:PA(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ce(27497)}(t,e.precondition)),n}function OA(t,e){return t&&t.length>0?(Ie(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?Nn(i.updateTime):Nn(s);return o.isEqual(he.min())&&(o=Nn(s)),new mA(o,i.transformResults||[])}(n,e))):[]}function LA(t,e){return{documents:[zE(t,e.path)]}}function MA(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=zE(t,i);const s=function(d){if(d.length!==0)return WE(vn.create(d,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(d){if(d.length!==0)return d.map(f=>function(m){return{field:Rs(m.field),direction:UA(m.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=sp(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:i}}function FA(t){let e=RA(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ie(r===1,65062);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];n.where&&(s=function(v){const m=$E(v);return m instanceof vn&&_E(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(v){return v.map(m=>function(P){return new vl(Ns(P.field),function(y){switch(y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(v){let m;return m=typeof v=="object"?v.value:v,kd(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(v){const m=!!v.before,T=v.values||[];return new Du(T,m)}(n.startAt));let d=null;return n.endAt&&(d=function(v){const m=!v.before,T=v.values||[];return new Du(T,m)}(n.endAt)),nA(e,i,o,s,l,"F",c,d)}function VA(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ce(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function $E(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ns(n.unaryFilter.field);return Ke.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ns(n.unaryFilter.field);return Ke.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ns(n.unaryFilter.field);return Ke.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ns(n.unaryFilter.field);return Ke.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ce(61313);default:return ce(60726)}}(t):t.fieldFilter!==void 0?function(n){return Ke.create(Ns(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ce(58110);default:return ce(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return vn.create(n.compositeFilter.filters.map(r=>$E(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ce(1026)}}(n.compositeFilter.op))}(t):ce(30097,{filter:t})}function UA(t){return bA[t]}function BA(t){return kA[t]}function zA(t){return xA[t]}function Rs(t){return{fieldPath:t.canonicalString()}}function Ns(t){return ft.fromServerFormat(t.fieldPath)}function WE(t){return t instanceof Ke?function(n){if(n.op==="=="){if(n0(n.value))return{unaryFilter:{field:Rs(n.field),op:"IS_NAN"}};if(t0(n.value))return{unaryFilter:{field:Rs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(n0(n.value))return{unaryFilter:{field:Rs(n.field),op:"IS_NOT_NAN"}};if(t0(n.value))return{unaryFilter:{field:Rs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Rs(n.field),op:BA(n.op),value:n.value}}}(t):t instanceof vn?function(n){const r=n.getFilters().map(i=>WE(i));return r.length===1?r[0]:{compositeFilter:{op:zA(n.op),filters:r}}}(t):ce(54877,{filter:t})}function jA(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function HE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(e,n,r,i,s=he.min(),o=he.min(),l=gt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Mr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Mr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Mr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Mr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(e){this.yt=e}}function WA(t){const e=FA({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ip(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(){this.Cn=new qA}addToCollectionParentIndex(e,n){return this.Cn.add(n),W.resolve()}getCollectionParents(e,n){return W.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return W.resolve()}deleteFieldIndex(e,n){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,n){return W.resolve()}getDocumentsMatchingTarget(e,n){return W.resolve(null)}getIndexType(e,n){return W.resolve(0)}getFieldIndexes(e,n){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,n){return W.resolve(ni.min())}getMinOffsetFromCollectionGroup(e,n){return W.resolve(ni.min())}updateCollectionGroup(e,n,r){return W.resolve()}updateIndexEntries(e,n){return W.resolve()}}class qA{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ze(Re.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ze(Re.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},qE=41943040;class Ot{static withCacheSize(e){return new Ot(e,Ot.DEFAULT_COLLECTION_PERCENTILE,Ot.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ot.DEFAULT_COLLECTION_PERCENTILE=10,Ot.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ot.DEFAULT=new Ot(qE,Ot.DEFAULT_COLLECTION_PERCENTILE,Ot.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ot.DISABLED=new Ot(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ho(0)}static cr(){return new ho(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y0="LruGarbageCollector",GA=1048576;function v0([t,e],[n,r]){const i=ve(t,n);return i===0?ve(e,r):i}class KA{constructor(e){this.Ir=e,this.buffer=new Ze(v0),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();v0(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class XA{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){re(y0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Po(n)?re(y0,"Ignoring IndexedDB error during garbage collection: ",n):await Ao(n)}await this.Vr(3e5)})}}class QA{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return W.resolve(bd.ce);const r=new KA(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(re("LruGarbageCollector","Garbage collection skipped; disabled"),W.resolve(g0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(re("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),g0):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,s,o,l,c,d;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),i=this.params.maximumSequenceNumbersToCollect):i=v,o=Date.now(),this.nthSequenceNumber(e,i))).next(v=>(r=v,l=Date.now(),this.removeTargets(e,r,n))).next(v=>(s=v,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(v=>(d=Date.now(),As()<=ye.DEBUG&&re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${i} in `+(l-o)+`ms
	Removed ${s} targets in `+(c-l)+`ms
	Removed ${v} documents in `+(d-c)+`ms
Total Duration: ${d-f}ms`),W.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:v})))}}function YA(t,e){return new QA(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(){this.changes=new os(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,wt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?W.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Ka(r.mutation,i,zt.empty(),Oe.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,_e()).next(()=>r))}getLocalViewOfDocuments(e,n,r=_e()){const i=zi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=xa();return s.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=zi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,_e()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,i){let s=or();const o=Ga(),l=function(){return Ga()}();return n.forEach((c,d)=>{const f=r.get(d.key);i.has(d.key)&&(f===void 0||f.mutation instanceof fi)?s=s.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),Ka(f.mutation,d,f.mutation.getFieldMask(),Oe.now())):o.set(d.key,zt.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>{var v;return l.set(d,new ZA(f,(v=o.get(d))!=null?v:null))}),l))}recalculateAndSaveOverlays(e,n){const r=Ga();let i=new Ue((o,l)=>o-l),s=_e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let f=r.get(c)||zt.empty();f=l.applyToLocalView(d,f),r.set(c,f);const v=(i.get(l.batchId)||_e()).add(c);i=i.insert(l.batchId,v)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),d=c.key,f=c.value,v=xE();f.forEach(m=>{if(!s.has(m)){const T=OE(n.get(m),r.get(m));T!==null&&v.set(m,T),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,v))}return W.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return ae.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):TE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):W.resolve(zi());let l=pl,c=s;return o.next(d=>W.forEach(d,(f,v)=>(l<v.largestBatchId&&(l=v.largestBatchId),s.get(f)?W.resolve():this.remoteDocumentCache.getEntry(e,f).next(m=>{c=c.insert(f,m)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,c,d,_e())).next(f=>({batchId:l,changes:kE(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ae(n)).next(r=>{let i=xa();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=xa();return this.indexManager.getCollectionParents(e,s).next(l=>W.forEach(l,c=>{const d=function(v,m){return new Ro(m,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(f=>{f.forEach((v,m)=>{o=o.insert(v,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((c,d)=>{const f=d.getKey();o.get(f)===null&&(o=o.insert(f,wt.newInvalidDocument(f)))});let l=xa();return o.forEach((c,d)=>{const f=s.get(c);f!==void 0&&Ka(f.mutation,d,zt.empty(),Oe.now()),Rd(n,d)&&(l=l.insert(c,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return W.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Nn(i.createTime)}}(n)),W.resolve()}getNamedQuery(e,n){return W.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:WA(i.bundledQuery),readTime:Nn(i.readTime)}}(n)),W.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{constructor(){this.overlays=new Ue(ae.comparator),this.qr=new Map}getOverlay(e,n){return W.resolve(this.overlays.get(n))}getOverlays(e,n){const r=zi();return W.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.St(e,n,s)}),W.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),W.resolve()}getOverlaysForCollection(e,n,r){const i=zi(),s=n.length+1,o=new ae(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return W.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ue((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=s.get(d.largestBatchId);f===null&&(f=zi(),s=s.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const l=zi(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,f)=>l.set(d,f)),!(l.size()>=i)););return W.resolve(l)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new wA(n,r));let s=this.qr.get(n);s===void 0&&(s=_e(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(){this.sessionToken=gt.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,W.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(){this.Qr=new Ze(rt.$r),this.Ur=new Ze(rt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new rt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new rt(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new ae(new Re([])),r=new rt(n,e),i=new rt(n,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ae(new Re([])),r=new rt(n,e),i=new rt(n,e+1);let s=_e();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new rt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class rt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ae.comparator(e.key,n.key)||ve(e.Yr,n.Yr)}static Kr(e,n){return ve(e.Yr,n.Yr)||ae.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ze(rt.$r)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new _A(s,n,r,i);this.mutationQueue.push(o);for(const l of i)this.Zr=this.Zr.add(new rt(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return W.resolve(o)}lookupMutationBatch(e,n){return W.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),s=i<0?0:i;return W.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?Om:this.tr-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new rt(n,0),i=new rt(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{const l=this.Xr(o.Yr);s.push(l)}),W.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ze(ve);return n.forEach(i=>{const s=new rt(i,0),o=new rt(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],l=>{r=r.add(l.Yr)})}),W.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ae.isDocumentKey(s)||(s=s.child(""));const o=new rt(new ae(s),0);let l=new Ze(ve);return this.Zr.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(l=l.add(c.Yr)),!0)},o),W.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ie(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return W.forEach(n.mutations,i=>{const s=new rt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new rt(n,0),i=this.Zr.firstAfterOrEqual(r);return W.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(e){this.ri=e,this.docs=function(){return new Ue(ae.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return W.resolve(r?r.document.mutableCopy():wt.newInvalidDocument(n))}getEntries(e,n){let r=or();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():wt.newInvalidDocument(i))}),W.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=or();const o=n.path,l=new ae(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:d,value:{document:f}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||Lx(Ox(f),r)<=0||(i.has(f.key)||Rd(n,f))&&(s=s.insert(f.key,f.mutableCopy()))}return W.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ce(9500)}ii(e,n){return W.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new oP(this)}getSize(e){return W.resolve(this.size)}}class oP extends JA{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),W.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(e){this.persistence=e,this.si=new os(n=>Fm(n),Vm),this.lastRemoteSnapshotVersion=he.min(),this.highestTargetId=0,this.oi=0,this._i=new Wm,this.targetCount=0,this.ai=ho.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),W.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new ho(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,W.resolve()}updateTargetData(e,n){return this.Pr(n),W.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),W.waitFor(s).next(()=>i)}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return W.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),W.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),W.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),W.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return W.resolve(r)}containsKey(e,n){return W.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(e,n){this.ui={},this.overlays={},this.ci=new bd(0),this.li=!1,this.li=!0,this.hi=new rP,this.referenceDelegate=e(this),this.Pi=new aP(this),this.indexManager=new HA,this.remoteDocumentCache=function(i){return new sP(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new $A(n),this.Ii=new tP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new nP,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new iP(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){re("MemoryPersistence","Starting transaction:",e);const i=new lP(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,n){return W.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class lP extends Fx{constructor(e){super(),this.currentSequenceNumber=e}}class Hm{constructor(e){this.persistence=e,this.Ri=new Wm,this.Vi=null}static mi(e){return new Hm(e)}get fi(){if(this.Vi)return this.Vi;throw ce(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),W.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),W.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),W.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.fi,r=>{const i=ae.fromPath(r);return this.gi(e,i).next(s=>{s||n.removeEntry(i,he.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return W.or([()=>W.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Fu{constructor(e,n){this.persistence=e,this.pi=new os(r=>Bx(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=YA(this,n)}static mi(e,n){return new Fu(e,n)}Ei(){}di(e){return W.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return W.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?W.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,n).next(l=>{l||(r++,s.removeEntry(o,he.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),W.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),W.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),W.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),W.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=qc(e.data.value)),n}br(e,n,r){return W.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return W.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=_e(),i=_e();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new qm(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return ik()?8:Vx(Ct())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ys(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new cP;return this.Ss(e,n,o).next(l=>{if(s.result=l,this.Vs)return this.bs(e,n,o,l.size)})}).next(()=>s.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(As()<=ye.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",Ps(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),W.resolve()):(As()<=ye.DEBUG&&re("QueryEngine","Query:",Ps(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(As()<=ye.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",Ps(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Rn(n))):W.resolve())}ys(e,n){if(o0(n))return W.resolve(null);let r=Rn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=ip(n,null,"F"),r=Rn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=_e(...s);return this.ps.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.Ds(n,l);return this.Cs(n,d,o,c.readTime)?this.ys(e,ip(n,null,"F")):this.vs(e,d,n,c)}))})))}ws(e,n,r,i){return o0(n)||i.isEqual(he.min())?W.resolve(null):this.ps.getDocuments(e,r).next(s=>{const o=this.Ds(n,s);return this.Cs(n,o,r,i)?W.resolve(null):(As()<=ye.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ps(n)),this.vs(e,o,n,Dx(i,pl)).next(l=>l))})}Ds(e,n){let r=new Ze(CE(e));return n.forEach((i,s)=>{Rd(e,s)&&(r=r.add(s))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return As()<=ye.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",Ps(n)),this.ps.getDocumentsMatchingQuery(e,n,ni.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gm="LocalStore",dP=3e8;class hP{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Ue(ve),this.xs=new os(s=>Fm(s),Vm),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new eP(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function fP(t,e,n,r){return new hP(t,e,n,r)}async function KE(t,e){const n=fe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],l=[];let c=_e();for(const d of i){o.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}for(const d of s){l.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}return n.localDocuments.getDocuments(r,c).next(d=>({Ls:d,removedBatchIds:o,addedBatchIds:l}))})})}function pP(t,e){const n=fe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,d,f){const v=d.batch,m=v.keys();let T=W.resolve();return m.forEach(P=>{T=T.next(()=>f.getEntry(c,P)).next(R=>{const y=d.docVersions.get(P);Ie(y!==null,48541),R.version.compareTo(y)<0&&(v.applyToRemoteDocument(R,d),R.isValidDocument()&&(R.setReadTime(d.commitVersion),f.addEntry(R)))})}),T.next(()=>l.mutationQueue.removeMutationBatch(c,v))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=_e();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(c=c.add(l.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function XE(t){const e=fe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function mP(t,e){const n=fe(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const l=[];e.targetChanges.forEach((f,v)=>{const m=i.get(v);if(!m)return;l.push(n.Pi.removeMatchingKeys(s,f.removedDocuments,v).next(()=>n.Pi.addMatchingKeys(s,f.addedDocuments,v)));let T=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(v)!==null?T=T.withResumeToken(gt.EMPTY_BYTE_STRING,he.min()).withLastLimboFreeSnapshotVersion(he.min()):f.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(f.resumeToken,r)),i=i.insert(v,T),function(R,y,E){return R.resumeToken.approximateByteSize()===0||y.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=dP?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(m,T,f)&&l.push(n.Pi.updateTargetData(s,T))});let c=or(),d=_e();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,f))}),l.push(gP(s,o,e.documentUpdates).next(f=>{c=f.ks,d=f.qs})),!r.isEqual(he.min())){const f=n.Pi.getLastRemoteSnapshotVersion(s).next(v=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(f)}return W.waitFor(l).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,d)).next(()=>c)}).then(s=>(n.Ms=i,s))}function gP(t,e,n){let r=_e(),i=_e();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=or();return n.forEach((l,c)=>{const d=s.get(l);c.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(l)),c.isNoDocument()&&c.version.isEqual(he.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):re(Gm,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",c.version)}),{ks:o,qs:i}})}function yP(t,e){const n=fe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Om),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function vP(t,e){const n=fe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(s=>s?(i=s,W.resolve(i)):n.Pi.allocateTargetId(r).next(o=>(i=new Mr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function cp(t,e,n){const r=fe(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Po(o))throw o;re(Gm,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function _0(t,e,n){const r=fe(t);let i=he.min(),s=_e();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,d,f){const v=fe(c),m=v.xs.get(f);return m!==void 0?W.resolve(v.Ms.get(m)):v.Pi.getTargetData(d,f)}(r,o,Rn(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,l.targetId).next(c=>{s=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:he.min(),n?s:_e())).next(l=>(_P(r,iA(e),l),{documents:l,Qs:s})))}function _P(t,e,n){let r=t.Os.get(e)||he.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Os.set(e,r)}class w0{constructor(){this.activeTargetIds=uA()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wP{constructor(){this.Mo=new w0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new w0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E0="ConnectivityMonitor";class S0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){re(E0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){re(E0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window!="undefined"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ac=null;function up(){return Ac===null?Ac=function(){return 268435456+Math.round(2147483648*Math.random())}():Ac++,"0x"+Ac.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wh="RestConnection",SP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class TP{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Ru?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,s){const o=up(),l=this.zo(e,n.toUriEncodedString());re(Wh,`Sending RPC '${e}' ${o}:`,l,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,s);const{host:d}=new URL(l),f=bo(d);return this.Jo(e,l,c,r,f).then(v=>(re(Wh,`Received RPC '${e}' ${o}: `,v),v),v=>{throw ao(Wh,`RPC '${e}' ${o} failed with error: `,v,"url: ",l,"request:",r),v})}Ho(e,n,r,i,s,o){return this.Go(e,n,r,i,s)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+xo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,n){const r=SP[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yt="WebChannelConnection";class CP extends TP{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const o=up();return new Promise((l,c)=>{const d=new Yw;d.setWithCredentials(!0),d.listenOnce(Jw.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Hc.NO_ERROR:const v=d.getResponseJson();re(yt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(v)),l(v);break;case Hc.TIMEOUT:re(yt,`RPC '${e}' ${o} timed out`),c(new ee(j.DEADLINE_EXCEEDED,"Request time out"));break;case Hc.HTTP_ERROR:const m=d.getStatus();if(re(yt,`RPC '${e}' ${o} failed with status:`,m,"response text:",d.getResponseText()),m>0){let T=d.getResponseJson();Array.isArray(T)&&(T=T[0]);const P=T==null?void 0:T.error;if(P&&P.status&&P.message){const R=function(E){const x=E.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(x)>=0?x:j.UNKNOWN}(P.status);c(new ee(R,P.message))}else c(new ee(j.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new ee(j.UNAVAILABLE,"Connection failed."));break;default:ce(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{re(yt,`RPC '${e}' ${o} completed.`)}});const f=JSON.stringify(i);re(yt,`RPC '${e}' ${o} sending request:`,i),d.send(n,"POST",f,r,15)})}T_(e,n,r){const i=up(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=tE(),l=eE(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const f=s.join("");re(yt,`Creating RPC '${e}' stream ${i}: ${f}`,c);const v=o.createWebChannel(f,c);this.I_(v);let m=!1,T=!1;const P=new IP({Yo:y=>{T?re(yt,`Not sending because RPC '${e}' stream ${i} is closed:`,y):(m||(re(yt,`Opening RPC '${e}' stream ${i} transport.`),v.open(),m=!0),re(yt,`RPC '${e}' stream ${i} sending:`,y),v.send(y))},Zo:()=>v.close()}),R=(y,E,x)=>{y.listen(E,D=>{try{x(D)}catch(O){setTimeout(()=>{throw O},0)}})};return R(v,ka.EventType.OPEN,()=>{T||(re(yt,`RPC '${e}' stream ${i} transport opened.`),P.o_())}),R(v,ka.EventType.CLOSE,()=>{T||(T=!0,re(yt,`RPC '${e}' stream ${i} transport closed`),P.a_(),this.E_(v))}),R(v,ka.EventType.ERROR,y=>{T||(T=!0,ao(yt,`RPC '${e}' stream ${i} transport errored. Name:`,y.name,"Message:",y.message),P.a_(new ee(j.UNAVAILABLE,"The operation could not be completed")))}),R(v,ka.EventType.MESSAGE,y=>{var E;if(!T){const x=y.data[0];Ie(!!x,16349);const D=x,O=(D==null?void 0:D.error)||((E=D[0])==null?void 0:E.error);if(O){re(yt,`RPC '${e}' stream ${i} received error:`,O);const z=O.status;let V=function(S){const I=Ge[S];if(I!==void 0)return ME(I)}(z),k=O.message;V===void 0&&(V=j.INTERNAL,k="Unknown error status: "+z+" with message "+O.message),T=!0,P.a_(new ee(V,k)),v.close()}else re(yt,`RPC '${e}' stream ${i} received:`,x),P.u_(x)}}),R(l,Zw.STAT_EVENT,y=>{y.stat===Yf.PROXY?re(yt,`RPC '${e}' stream ${i} detected buffering proxy`):y.stat===Yf.NOPROXY&&re(yt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{P.__()},0),P}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Hh(){return typeof document!="undefined"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ld(t){return new AA(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&re("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T0="PersistentStream";class YE{constructor(e,n,r,i,s,o,l,c){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new QE(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(sr(n.toString()),sr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new ee(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return re(T0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(re(T0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class bP extends YE{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=NA(this.serializer,e),r=function(s){if(!("targetChange"in s))return he.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?he.min():o.readTime?Nn(o.readTime):he.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=lp(this.serializer),n.addTarget=function(s,o){let l;const c=o.target;if(l=np(c)?{documents:LA(s,c)}:{query:MA(s,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=UE(s,o.resumeToken);const d=sp(s,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(he.min())>0){l.readTime=Mu(s,o.snapshotVersion.toTimestamp());const d=sp(s,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=VA(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=lp(this.serializer),n.removeTarget=e,this.q_(n)}}class kP extends YE{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ie(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ie(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ie(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=OA(e.writeResults,e.commitTime),r=Nn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=lp(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>DA(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP{}class AP extends xP{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new ee(j.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,op(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ee(j.UNKNOWN,s.toString())})}Ho(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(e,op(n,r),i,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ee(j.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class PP{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(sr(n),this.aa=!1):re("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ji="RemoteStore";class RP{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{as(this)&&(re(Ji,"Restarting streams for network reachability change."),await async function(c){const d=fe(c);d.Ea.add(4),await Fl(d),d.Ra.set("Unknown"),d.Ea.delete(4),await Md(d)}(this))})}),this.Ra=new PP(r,i)}}async function Md(t){if(as(t))for(const e of t.da)await e(!0)}async function Fl(t){for(const e of t.da)await e(!1)}function JE(t,e){const n=fe(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Ym(n)?Qm(n):No(n).O_()&&Xm(n,e))}function Km(t,e){const n=fe(t),r=No(n);n.Ia.delete(e),r.O_()&&ZE(n,e),n.Ia.size===0&&(r.O_()?r.L_():as(n)&&n.Ra.set("Unknown"))}function Xm(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(he.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}No(t).Y_(e)}function ZE(t,e){t.Va.Ue(e),No(t).Z_(e)}function Qm(t){t.Va=new CA({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),No(t).start(),t.Ra.ua()}function Ym(t){return as(t)&&!No(t).x_()&&t.Ia.size>0}function as(t){return fe(t).Ea.size===0}function eS(t){t.Va=void 0}async function NP(t){t.Ra.set("Online")}async function DP(t){t.Ia.forEach((e,n)=>{Xm(t,e)})}async function OP(t,e){eS(t),Ym(t)?(t.Ra.ha(e),Qm(t)):t.Ra.set("Unknown")}async function LP(t,e,n){if(t.Ra.set("Online"),e instanceof VE&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const l of s.targetIds)i.Ia.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.Ia.delete(l),i.Va.removeTarget(l))}(t,e)}catch(r){re(Ji,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Vu(t,r)}else if(e instanceof Xc?t.Va.Ze(e):e instanceof FE?t.Va.st(e):t.Va.tt(e),!n.isEqual(he.min()))try{const r=await XE(t.localStore);n.compareTo(r)>=0&&await function(s,o){const l=s.Va.Tt(o);return l.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const f=s.Ia.get(d);f&&s.Ia.set(d,f.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,d)=>{const f=s.Ia.get(c);if(!f)return;s.Ia.set(c,f.withResumeToken(gt.EMPTY_BYTE_STRING,f.snapshotVersion)),ZE(s,c);const v=new Mr(f.target,c,d,f.sequenceNumber);Xm(s,v)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){re(Ji,"Failed to raise snapshot:",r),await Vu(t,r)}}async function Vu(t,e,n){if(!Po(e))throw e;t.Ea.add(1),await Fl(t),t.Ra.set("Offline"),n||(n=()=>XE(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{re(Ji,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Md(t)})}function tS(t,e){return e().catch(n=>Vu(t,n,e))}async function Fd(t){const e=fe(t),n=oi(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Om;for(;MP(e);)try{const i=await yP(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,FP(e,i)}catch(i){await Vu(e,i)}nS(e)&&rS(e)}function MP(t){return as(t)&&t.Ta.length<10}function FP(t,e){t.Ta.push(e);const n=oi(t);n.O_()&&n.X_&&n.ea(e.mutations)}function nS(t){return as(t)&&!oi(t).x_()&&t.Ta.length>0}function rS(t){oi(t).start()}async function VP(t){oi(t).ra()}async function UP(t){const e=oi(t);for(const n of t.Ta)e.ea(n.mutations)}async function BP(t,e,n){const r=t.Ta.shift(),i=zm.from(r,e,n);await tS(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Fd(t)}async function zP(t,e){e&&oi(t).X_&&await async function(r,i){if(function(o){return SA(o)&&o!==j.ABORTED}(i.code)){const s=r.Ta.shift();oi(r).B_(),await tS(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Fd(r)}}(t,e),nS(t)&&rS(t)}async function I0(t,e){const n=fe(t);n.asyncQueue.verifyOperationInProgress(),re(Ji,"RemoteStore received new credentials");const r=as(n);n.Ea.add(3),await Fl(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Md(n)}async function jP(t,e){const n=fe(t);e?(n.Ea.delete(2),await Md(n)):e||(n.Ea.add(2),await Fl(n),n.Ra.set("Unknown"))}function No(t){return t.ma||(t.ma=function(n,r,i){const s=fe(n);return s.sa(),new bP(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:NP.bind(null,t),t_:DP.bind(null,t),r_:OP.bind(null,t),H_:LP.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Ym(t)?Qm(t):t.Ra.set("Unknown")):(await t.ma.stop(),eS(t))})),t.ma}function oi(t){return t.fa||(t.fa=function(n,r,i){const s=fe(n);return s.sa(),new kP(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:VP.bind(null,t),r_:zP.bind(null,t),ta:UP.bind(null,t),na:BP.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Fd(t)):(await t.fa.stop(),t.Ta.length>0&&(re(Ji,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Zn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,l=new Jm(e,n,o,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ee(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zm(t,e){if(sr("AsyncQueue",`${e}: ${t}`),Po(t))return new ee(j.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{static emptySet(e){return new Ys(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ae.comparator(n.key,r.key):(n,r)=>ae.comparator(n.key,r.key),this.keyedMap=xa(),this.sortedSet=new Ue(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ys)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ys;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(){this.ga=new Ue(ae.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ce(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class fo{constructor(e,n,r,i,s,o,l,c,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new fo(e,n,Ys.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Pd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class WP{constructor(){this.queries=b0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=fe(n),s=i.queries;i.queries=b0(),s.forEach((o,l)=>{for(const c of l.Sa)c.onError(r)})})(this,new ee(j.ABORTED,"Firestore shutting down"))}}function b0(){return new os(t=>IE(t),Pd)}async function eg(t,e){const n=fe(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new $P,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const l=Zm(o,`Initialization of query '${Ps(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&ng(n)}async function tg(t,e){const n=fe(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function HP(t,e){const n=fe(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const l of o.Sa)l.Fa(i)&&(r=!0);o.wa=i}}r&&ng(n)}function qP(t,e,n){const r=fe(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function ng(t){t.Ca.forEach(e=>{e.next()})}var dp,k0;(k0=dp||(dp={})).Ma="default",k0.Cache="cache";class rg{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new fo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=fo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==dp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(e){this.key=e}}class sS{constructor(e){this.key=e}}class GP{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=_e(),this.mutatedKeys=_e(),this.eu=CE(e),this.tu=new Ys(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new C0,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,l=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,v)=>{const m=i.get(f),T=Rd(this.query,v)?v:null,P=!!m&&this.mutatedKeys.has(m.key),R=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let y=!1;m&&T?m.data.isEqual(T.data)?P!==R&&(r.track({type:3,doc:T}),y=!0):this.su(m,T)||(r.track({type:2,doc:T}),y=!0,(c&&this.eu(T,c)>0||d&&this.eu(T,d)<0)&&(l=!0)):!m&&T?(r.track({type:0,doc:T}),y=!0):m&&!T&&(r.track({type:1,doc:m}),y=!0,(c||d)&&(l=!0)),y&&(T?(o=o.add(T),s=R?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{tu:o,iu:r,Cs:l,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((f,v)=>function(T,P){const R=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ce(20277,{Rt:y})}};return R(T)-R(P)}(f.type,v.type)||this.eu(f.doc,v.doc)),this.ou(r),i=i!=null?i:!1;const l=n&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,d=c!==this.Za;return this.Za=c,o.length!==0||d?{snapshot:new fo(this.query,e.tu,s,o,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new C0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=_e(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new sS(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new iS(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=_e();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return fo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ig="SyncEngine";class KP{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class XP{constructor(e){this.key=e,this.hu=!1}}class QP{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new os(l=>IE(l),Pd),this.Iu=new Map,this.Eu=new Set,this.du=new Ue(ae.comparator),this.Au=new Map,this.Ru=new Wm,this.Vu={},this.mu=new Map,this.fu=ho.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function YP(t,e,n=!0){const r=dS(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await oS(r,e,n,!0),i}async function JP(t,e){const n=dS(t);await oS(n,e,!0,!1)}async function oS(t,e,n,r){const i=await vP(t.localStore,Rn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let l;return r&&(l=await ZP(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&JE(t.remoteStore,i),l}async function ZP(t,e,n,r,i){t.pu=(v,m,T)=>async function(R,y,E,x){let D=y.view.ru(E);D.Cs&&(D=await _0(R.localStore,y.query,!1).then(({documents:k})=>y.view.ru(k,D)));const O=x&&x.targetChanges.get(y.targetId),z=x&&x.targetMismatches.get(y.targetId)!=null,V=y.view.applyChanges(D,R.isPrimaryClient,O,z);return A0(R,y.targetId,V.au),V.snapshot}(t,v,m,T);const s=await _0(t.localStore,e,!0),o=new GP(e,s.Qs),l=o.ru(s.documents),c=Ml.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),d=o.applyChanges(l,t.isPrimaryClient,c);A0(t,n,d.au);const f=new KP(e,n,o);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function eR(t,e,n){const r=fe(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!Pd(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await cp(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Km(r.remoteStore,i.targetId),hp(r,i.targetId)}).catch(Ao)):(hp(r,i.targetId),await cp(r.localStore,i.targetId,!0))}async function tR(t,e){const n=fe(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Km(n.remoteStore,r.targetId))}async function nR(t,e,n){const r=cR(t);try{const i=await function(o,l){const c=fe(o),d=Oe.now(),f=l.reduce((T,P)=>T.add(P.key),_e());let v,m;return c.persistence.runTransaction("Locally write mutations","readwrite",T=>{let P=or(),R=_e();return c.Ns.getEntries(T,f).next(y=>{P=y,P.forEach((E,x)=>{x.isValidDocument()||(R=R.add(E))})}).next(()=>c.localDocuments.getOverlayedDocuments(T,P)).next(y=>{v=y;const E=[];for(const x of l){const D=yA(x,v.get(x.key).overlayedDocument);D!=null&&E.push(new fi(x.key,D,gE(D.value.mapValue),yn.exists(!0)))}return c.mutationQueue.addMutationBatch(T,d,E,l)}).next(y=>{m=y;const E=y.applyToLocalDocumentSet(v,R);return c.documentOverlayCache.saveOverlays(T,y.batchId,E)})}).then(()=>({batchId:m.batchId,changes:kE(v)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,c){let d=o.Vu[o.currentUser.toKey()];d||(d=new Ue(ve)),d=d.insert(l,c),o.Vu[o.currentUser.toKey()]=d}(r,i.batchId,n),await Vl(r,i.changes),await Fd(r.remoteStore)}catch(i){const s=Zm(i,"Failed to persist write");n.reject(s)}}async function aS(t,e){const n=fe(t);try{const r=await mP(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Au.get(s);o&&(Ie(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?Ie(o.hu,14607):i.removedDocuments.size>0&&(Ie(o.hu,42227),o.hu=!1))}),await Vl(n,r,e)}catch(r){await Ao(r)}}function x0(t,e,n){const r=fe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((s,o)=>{const l=o.view.va(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const c=fe(o);c.onlineState=l;let d=!1;c.queries.forEach((f,v)=>{for(const m of v.Sa)m.va(l)&&(d=!0)}),d&&ng(c)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function rR(t,e,n){const r=fe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new Ue(ae.comparator);o=o.insert(s,wt.newNoDocument(s,he.min()));const l=_e().add(s),c=new Od(he.min(),new Map,new Ue(ve),o,l);await aS(r,c),r.du=r.du.remove(s),r.Au.delete(e),sg(r)}else await cp(r.localStore,e,!1).then(()=>hp(r,e,n)).catch(Ao)}async function iR(t,e){const n=fe(t),r=e.batch.batchId;try{const i=await pP(n.localStore,e);cS(n,r,null),lS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Vl(n,i)}catch(i){await Ao(i)}}async function sR(t,e,n){const r=fe(t);try{const i=await function(o,l){const c=fe(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return c.mutationQueue.lookupMutationBatch(d,l).next(v=>(Ie(v!==null,37113),f=v.keys(),c.mutationQueue.removeMutationBatch(d,v))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,f,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>c.localDocuments.getDocuments(d,f))})}(r.localStore,e);cS(r,e,n),lS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Vl(r,i)}catch(i){await Ao(i)}}function lS(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function cS(t,e,n){const r=fe(t);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function hp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||uS(t,r)})}function uS(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Km(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),sg(t))}function A0(t,e,n){for(const r of n)r instanceof iS?(t.Ru.addReference(r.key,e),oR(t,r)):r instanceof sS?(re(ig,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||uS(t,r.key)):ce(19791,{wu:r})}function oR(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(re(ig,"New document in limbo: "+n),t.Eu.add(r),sg(t))}function sg(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ae(Re.fromString(e)),r=t.fu.next();t.Au.set(r,new XP(n)),t.du=t.du.insert(n,r),JE(t.remoteStore,new Mr(Rn(Ad(n.path)),r,"TargetPurposeLimboResolution",bd.ce))}}async function Vl(t,e,n){const r=fe(t),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((l,c)=>{o.push(r.pu(c,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const v=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:f.current;r.sharedClientState.updateQueryState(c.targetId,v?"current":"not-current")}if(d){i.push(d);const v=qm.As(c.targetId,d);s.push(v)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(c,d){const f=fe(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>W.forEach(d,m=>W.forEach(m.Es,T=>f.persistence.referenceDelegate.addReference(v,m.targetId,T)).next(()=>W.forEach(m.ds,T=>f.persistence.referenceDelegate.removeReference(v,m.targetId,T)))))}catch(v){if(!Po(v))throw v;re(Gm,"Failed to update sequence numbers: "+v)}for(const v of d){const m=v.targetId;if(!v.fromCache){const T=f.Ms.get(m),P=T.snapshotVersion,R=T.withLastLimboFreeSnapshotVersion(P);f.Ms=f.Ms.insert(m,R)}}}(r.localStore,s))}async function aR(t,e){const n=fe(t);if(!n.currentUser.isEqual(e)){re(ig,"User change. New user:",e.toKey());const r=await KE(n.localStore,e);n.currentUser=e,function(s,o){s.mu.forEach(l=>{l.forEach(c=>{c.reject(new ee(j.CANCELLED,o))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Vl(n,r.Ls)}}function lR(t,e){const n=fe(t),r=n.Au.get(e);if(r&&r.hu)return _e().add(r.key);{let i=_e();const s=n.Iu.get(e);if(!s)return i;for(const o of s){const l=n.Tu.get(o);i=i.unionWith(l.view.nu)}return i}}function dS(t){const e=fe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=aS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=lR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=rR.bind(null,e),e.Pu.H_=HP.bind(null,e.eventManager),e.Pu.yu=qP.bind(null,e.eventManager),e}function cR(t){const e=fe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=iR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sR.bind(null,e),e}class Uu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ld(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return fP(this.persistence,new uP,e.initialUser,this.serializer)}Cu(e){return new GE(Hm.mi,this.serializer)}Du(e){return new wP}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Uu.provider={build:()=>new Uu};class uR extends Uu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ie(this.persistence.referenceDelegate instanceof Fu,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new XA(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Ot.withCacheSize(this.cacheSizeBytes):Ot.DEFAULT;return new GE(r=>Fu.mi(r,n),this.serializer)}}class fp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>x0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=aR.bind(null,this.syncEngine),await jP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new WP}()}createDatastore(e){const n=Ld(e.databaseInfo.databaseId),r=function(s){return new CP(s)}(e.databaseInfo);return function(s,o,l,c){return new AP(s,o,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,l){return new RP(r,i,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>x0(this.syncEngine,n,0),function(){return S0.v()?new S0:new EP}())}createSyncEngine(e,n){return function(i,s,o,l,c,d,f){const v=new QP(i,s,o,l,c,d);return f&&(v.gu=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=fe(i);re(Ji,"RemoteStore shutting down."),s.Ea.add(5),await Fl(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}fp.provider={build:()=>new fp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):sr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ai="FirestoreClient";class dR{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=_t.UNAUTHENTICATED,this.clientId=Dm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{re(ai,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(re(ai,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Zn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Zm(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function qh(t,e){t.asyncQueue.verifyOperationInProgress(),re(ai,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await KE(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function P0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await hR(t);re(ai,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>I0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>I0(e.remoteStore,i)),t._onlineComponents=e}async function hR(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){re(ai,"Using user provided OfflineComponentProvider");try{await qh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===j.FAILED_PRECONDITION||i.code===j.UNIMPLEMENTED:!(typeof DOMException!="undefined"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;ao("Error using user provided cache. Falling back to memory cache: "+n),await qh(t,new Uu)}}else re(ai,"Using default OfflineComponentProvider"),await qh(t,new uR(void 0));return t._offlineComponents}async function hS(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(re(ai,"Using user provided OnlineComponentProvider"),await P0(t,t._uninitializedComponentsProvider._online)):(re(ai,"Using default OnlineComponentProvider"),await P0(t,new fp))),t._onlineComponents}function fR(t){return hS(t).then(e=>e.syncEngine)}async function Bu(t){const e=await hS(t),n=e.eventManager;return n.onListen=YP.bind(null,e.syncEngine),n.onUnlisten=eR.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=JP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=tR.bind(null,e.syncEngine),n}function pR(t,e,n={}){const r=new Zn;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,c,d){const f=new og({next:m=>{f.Nu(),o.enqueueAndForget(()=>tg(s,v));const T=m.docs.has(l);!T&&m.fromCache?d.reject(new ee(j.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&m.fromCache&&c&&c.source==="server"?d.reject(new ee(j.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(m)},error:m=>d.reject(m)}),v=new rg(Ad(l.path),f,{includeMetadataChanges:!0,qa:!0});return eg(s,v)}(await Bu(t),t.asyncQueue,e,n,r)),r.promise}function mR(t,e,n={}){const r=new Zn;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,c,d){const f=new og({next:m=>{f.Nu(),o.enqueueAndForget(()=>tg(s,v)),m.fromCache&&c.source==="server"?d.reject(new ee(j.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(m)},error:m=>d.reject(m)}),v=new rg(l,f,{includeMetadataChanges:!0,qa:!0});return eg(s,v)}(await Bu(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS="firestore.googleapis.com",N0=!0;class D0{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ee(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=pS,this.ssl=N0}else this.host=e.host,this.ssl=(n=e.ssl)!=null?n:N0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=qE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<GA)throw new ee(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Nx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=fS((r=e.experimentalLongPollingOptions)!=null?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ee(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ee(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ee(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Vd{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new D0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ee(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ee(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new D0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Sx;switch(r.type){case"firstParty":return new bx(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ee(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=R0.get(n);r&&(re("ComponentProvider","Removing Datastore"),R0.delete(n),r.terminate())}(this),Promise.resolve()}}function gR(t,e,n,r={}){var d;t=$t(t,Vd);const i=bo(e),s=t._getSettings(),o={...s,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;i&&(jw(`https://${l}`),$w("Firestore",!0)),s.host!==pS&&s.host!==l&&ao("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...s,host:l,ssl:i,emulatorOptions:r};if(!Xi(c,o)&&(t._setSettings(c),r.mockUserToken)){let f,v;if(typeof r.mockUserToken=="string")f=r.mockUserToken,v=_t.MOCK_USER;else{f=Xb(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new ee(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new _t(m)}t._authCredentials=new Tx(new rE(f,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new pi(this.firestore,e,this._query)}}class $e{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $e(this.firestore,e,this._key)}toJSON(){return{type:$e._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Ol(n,$e._jsonSchema))return new $e(e,r||null,new ae(Re.fromString(n.referencePath)))}}$e._jsonSchemaVersion="firestore/documentReference/1.0",$e._jsonSchema={type:Xe("string",$e._jsonSchemaVersion),referencePath:Xe("string")};class Qr extends pi{constructor(e,n,r){super(e,n,Ad(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $e(this.firestore,null,new ae(e))}withConverter(e){return new Qr(this.firestore,e,this._path)}}function Ul(t,e,...n){if(t=et(t),iE("collection","path",e),t instanceof Vd){const r=Re.fromString(e,...n);return qv(r),new Qr(t,null,r)}{if(!(t instanceof $e||t instanceof Qr))throw new ee(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Re.fromString(e,...n));return qv(r),new Qr(t.firestore,null,r)}}function ls(t,e,...n){if(t=et(t),arguments.length===1&&(e=Dm.newId()),iE("doc","path",e),t instanceof Vd){const r=Re.fromString(e,...n);return Hv(r),new $e(t,null,new ae(r))}{if(!(t instanceof $e||t instanceof Qr))throw new ee(j.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Re.fromString(e,...n));return Hv(r),new $e(t.firestore,t instanceof Qr?t.converter:null,new ae(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O0="AsyncQueue";class L0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new QE(this,"async_queue_retry"),this._c=()=>{const r=Hh();r&&re(O0,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Hh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Hh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Zn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Po(e))throw e;re(O0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,sr("INTERNAL UNHANDLED ERROR: ",M0(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=Jm.createAndSchedule(this,e,n,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&ce(47125,{Pc:M0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function M0(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F0(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class li extends Vd{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new L0,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new L0(e),this._firestoreClient=void 0,await e}}}function yR(t,e){const n=typeof t=="object"?t:Gw(),r=typeof t=="string"?t:e||Ru,i=Rm(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=Gb("firestore");s&&gR(i,...s)}return i}function Ud(t){if(t._terminated)throw new ee(j.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||vR(t),t._firestoreClient}function vR(t){var r,i,s;const e=t._freezeSettings(),n=function(l,c,d,f){return new $x(l,c,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,fS(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||((i=e.localCache)==null?void 0:i._offlineComponentProvider)&&((s=e.localCache)==null?void 0:s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new dR(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this._byteString=e}static fromBase64String(e){try{return new en(gt.fromBase64String(e))}catch(n){throw new ee(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new en(gt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:en._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ol(e,en._jsonSchema))return en.fromBase64String(e.bytes)}}en._jsonSchemaVersion="firestore/bytes/1.0",en._jsonSchema={type:Xe("string",en._jsonSchemaVersion),bytes:Xe("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ee(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ft(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ee(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ee(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ve(this._lat,e._lat)||ve(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Dn._jsonSchemaVersion}}static fromJSON(e){if(Ol(e,Dn._jsonSchema))return new Dn(e.latitude,e.longitude)}}Dn._jsonSchemaVersion="firestore/geoPoint/1.0",Dn._jsonSchema={type:Xe("string",Dn._jsonSchemaVersion),latitude:Xe("number"),longitude:Xe("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:On._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ol(e,On._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new On(e.vectorValues);throw new ee(j.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}On._jsonSchemaVersion="firestore/vectorValue/1.0",On._jsonSchema={type:Xe("string",On._jsonSchemaVersion),vectorValues:Xe("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R=/^__.*__$/;class wR{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new fi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ll(e,this.data,n,this.fieldTransforms)}}class mS{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new fi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function gS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ce(40011,{Ac:t})}}class lg{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new lg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return zu(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(gS(this.Ac)&&_R.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class ER{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ld(e)}Cc(e,n,r,i=!1){return new lg({Ac:e,methodName:n,Dc:r,path:ft.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function cg(t){const e=t._freezeSettings(),n=Ld(t._databaseId);return new ER(t._databaseId,!!e.ignoreUndefinedProperties,n)}function SR(t,e,n,r,i,s={}){const o=t.Cc(s.merge||s.mergeFields?2:0,e,n,i);ug("Data must be an object, but it was:",o,r);const l=yS(r,o);let c,d;if(s.merge)c=new zt(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){const f=[];for(const v of s.mergeFields){const m=pp(e,v,n);if(!o.contains(m))throw new ee(j.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);_S(f,m)||f.push(m)}c=new zt(f),d=o.fieldTransforms.filter(v=>c.covers(v.field))}else c=null,d=o.fieldTransforms;return new wR(new Lt(l),c,d)}class zd extends ag{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof zd}}function TR(t,e,n,r){const i=t.Cc(1,e,n);ug("Data must be an object, but it was:",i,r);const s=[],o=Lt.empty();hi(r,(c,d)=>{const f=dg(e,c,n);d=et(d);const v=i.yc(f);if(d instanceof zd)s.push(f);else{const m=Bl(d,v);m!=null&&(s.push(f),o.set(f,m))}});const l=new zt(s);return new mS(o,l,i.fieldTransforms)}function IR(t,e,n,r,i,s){const o=t.Cc(1,e,n),l=[pp(e,r,n)],c=[i];if(s.length%2!=0)throw new ee(j.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)l.push(pp(e,s[m])),c.push(s[m+1]);const d=[],f=Lt.empty();for(let m=l.length-1;m>=0;--m)if(!_S(d,l[m])){const T=l[m];let P=c[m];P=et(P);const R=o.yc(T);if(P instanceof zd)d.push(T);else{const y=Bl(P,R);y!=null&&(d.push(T),f.set(T,y))}}const v=new zt(d);return new mS(f,v,o.fieldTransforms)}function CR(t,e,n,r=!1){return Bl(n,t.Cc(r?4:3,e))}function Bl(t,e){if(vS(t=et(t)))return ug("Unsupported field value:",e,t),yS(t,e);if(t instanceof ag)return function(r,i){if(!gS(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const l of r){let c=Bl(l,i.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=et(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return dA(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Oe.fromDate(r);return{timestampValue:Mu(i.serializer,s)}}if(r instanceof Oe){const s=new Oe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Mu(i.serializer,s)}}if(r instanceof Dn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof en)return{bytesValue:UE(i.serializer,r._byteString)};if(r instanceof $e){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:$m(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof On)return function(o,l){return{mapValue:{fields:{[fE]:{stringValue:mE},[Nu]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw l.Sc("VectorValues must only contain numeric values.");return Um(l.serializer,d)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${Cd(r)}`)}(t,e)}function yS(t,e){const n={};return aE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):hi(t,(r,i)=>{const s=Bl(i,e.mc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function vS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Oe||t instanceof Dn||t instanceof en||t instanceof $e||t instanceof ag||t instanceof On)}function ug(t,e,n){if(!vS(n)||!sE(n)){const r=Cd(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function pp(t,e,n){if((e=et(e))instanceof Bd)return e._internalPath;if(typeof e=="string")return dg(t,e);throw zu("Field path arguments must be of type string or ",t,!1,void 0,n)}const bR=new RegExp("[~\\*/\\[\\]]");function dg(t,e,n){if(e.search(bR)>=0)throw zu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Bd(...e.split("."))._internalPath}catch{throw zu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function zu(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new ee(j.INVALID_ARGUMENT,l+t+c)}function _S(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new $e(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new kR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(jd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class kR extends wS{data(){return super.data()}}function jd(t,e){return typeof e=="string"?dg(t,e):e instanceof Bd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ES(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ee(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hg{}class SS extends hg{}function po(t,e,...n){let r=[];e instanceof hg&&r.push(e),r=r.concat(n),function(s){const o=s.filter(c=>c instanceof fg).length,l=s.filter(c=>c instanceof $d).length;if(o>1||o>0&&l>0)throw new ee(j.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class $d extends SS{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new $d(e,n,r)}_apply(e){const n=this._parse(e);return TS(e._query,n),new pi(e.firestore,e.converter,rp(e._query,n))}_parse(e){const n=cg(e.firestore);return function(s,o,l,c,d,f,v){let m;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new ee(j.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){U0(v,f);const P=[];for(const R of v)P.push(V0(c,s,R));m={arrayValue:{values:P}}}else m=V0(c,s,v)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||U0(v,f),m=CR(l,o,v,f==="in"||f==="not-in");return Ke.create(d,f,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ci(t,e,n){const r=e,i=jd("where",t);return $d._create(i,r,n)}class fg extends hg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new fg(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:vn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const l=s.getFlattenedFilters();for(const c of l)TS(o,c),o=rp(o,c)}(e._query,n),new pi(e.firestore,e.converter,rp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class pg extends SS{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new pg(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new ee(j.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ee(j.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new vl(s,o)}(e._query,this._field,this._direction);return new pi(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Ro(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function mp(t,e="asc"){const n=e,r=jd("orderBy",t);return pg._create(r,n)}function V0(t,e,n){if(typeof(n=et(n))=="string"){if(n==="")throw new ee(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!TE(e)&&n.indexOf("/")!==-1)throw new ee(j.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Re.fromString(n));if(!ae.isDocumentKey(r))throw new ee(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return e0(t,new ae(r))}if(n instanceof $e)return e0(t,n._key);throw new ee(j.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Cd(n)}.`)}function U0(t,e){if(!Array.isArray(t)||t.length===0)throw new ee(j.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function TS(t,e){const n=function(i,s){for(const o of i)for(const l of o.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ee(j.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ee(j.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class xR{convertValue(e,n="none"){switch(si(e)){case 0:return null;case 1:return e.booleanValue;case 2:return We(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ii(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ce(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return hi(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[Nu].arrayValue)==null?void 0:i.values)==null?void 0:s.map(o=>We(o.doubleValue));return new On(n)}convertGeoPoint(e){return new Dn(We(e.latitude),We(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=xd(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ml(e));default:return null}}convertTimestamp(e){const n=ri(e);return new Oe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Re.fromString(e);Ie(HE(r),9688,{name:e});const i=new gl(r.get(1),r.get(3)),s=new ae(r.popFirst(5));return i.isEqual(n)||sr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AR(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Pa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $i extends wS{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Qc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(jd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ee(j.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=$i._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}$i._jsonSchemaVersion="firestore/documentSnapshot/1.0",$i._jsonSchema={type:Xe("string",$i._jsonSchemaVersion),bundleSource:Xe("string","DocumentSnapshot"),bundleName:Xe("string"),bundle:Xe("string")};class Qc extends $i{data(e={}){return super.data(e)}}class Wi{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Pa(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Qc(this._firestore,this._userDataWriter,r.key,r,new Pa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ee(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const c=new Qc(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Pa(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const c=new Qc(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Pa(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,f=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:PR(l.type),doc:c,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ee(j.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Wi._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Dm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function PR(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ce(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zl(t){t=$t(t,$e);const e=$t(t.firestore,li);return pR(Ud(e),t._key).then(n=>bS(e,t,n))}Wi._jsonSchemaVersion="firestore/querySnapshot/1.0",Wi._jsonSchema={type:Xe("string",Wi._jsonSchemaVersion),bundleSource:Xe("string","QuerySnapshot"),bundleName:Xe("string"),bundle:Xe("string")};class mg extends xR{constructor(e){super(),this.firestore=e}convertBytes(e){return new en(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new $e(this.firestore,null,n)}}function Wd(t){t=$t(t,pi);const e=$t(t.firestore,li),n=Ud(e),r=new mg(e);return ES(t._query),mR(n,t._query).then(i=>new Wi(e,r,t,i))}function IS(t,e,n){t=$t(t,$e);const r=$t(t.firestore,li),i=AR(t.converter,e,n);return gg(r,[SR(cg(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,yn.none())])}function RR(t,e,n,...r){t=$t(t,$e);const i=$t(t.firestore,li),s=cg(i);let o;return o=typeof(e=et(e))=="string"||e instanceof Bd?IR(s,"updateDoc",t._key,e,n,r):TR(s,"updateDoc",t._key,e),gg(i,[o.toMutation(t._key,yn.exists(!0))])}function NR(t){return gg($t(t.firestore,li),[new Bm(t._key,yn.none())])}function CS(t,...e){var c,d,f;t=et(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||F0(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(F0(e[r])){const v=e[r];e[r]=(c=v.next)==null?void 0:c.bind(v),e[r+1]=(d=v.error)==null?void 0:d.bind(v),e[r+2]=(f=v.complete)==null?void 0:f.bind(v)}let s,o,l;if(t instanceof $e)o=$t(t.firestore,li),l=Ad(t._key.path),s={next:v=>{e[r]&&e[r](bS(o,t,v))},error:e[r+1],complete:e[r+2]};else{const v=$t(t,pi);o=$t(v.firestore,li),l=v._query;const m=new mg(o);s={next:T=>{e[r]&&e[r](new Wi(o,m,v,T))},error:e[r+1],complete:e[r+2]},ES(t._query)}return function(m,T,P,R){const y=new og(R),E=new rg(T,y,P);return m.asyncQueue.enqueueAndForget(async()=>eg(await Bu(m),E)),()=>{y.Nu(),m.asyncQueue.enqueueAndForget(async()=>tg(await Bu(m),E))}}(Ud(o),l,i,s)}function gg(t,e){return function(r,i){const s=new Zn;return r.asyncQueue.enqueueAndForget(async()=>nR(await fR(r),i,s)),s.promise}(Ud(t),e)}function bS(t,e,n){const r=n.docs.get(e._key),i=new mg(t);return new $i(t,i,e._key,r,new Pa(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){xo=i})(ko),oo(new Qi("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),l=new li(new Ix(r.getProvider("auth-internal")),new kx(o,r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new ee(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gl(d.options.projectId,f)}(o,i),o);return s={useFetchStreams:n,...s},l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Kr(zv,jv,e),Kr(zv,jv,"esm2020")})();const B0=(t,e)=>{localStorage.setItem(t,JSON.stringify(e))},Gh=t=>{const e=localStorage.getItem(t);return e?JSON.parse(e):null};var DR="firebase",OR="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Kr(DR,OR,"app");function kS(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const LR=kS,xS=new Nl("auth","Firebase",kS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ju=new Am("@firebase/auth");function MR(t,...e){ju.logLevel<=ye.WARN&&ju.warn(`Auth (${ko}): ${t}`,...e)}function Yc(t,...e){ju.logLevel<=ye.ERROR&&ju.error(`Auth (${ko}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _n(t,...e){throw yg(t,...e)}function Ln(t,...e){return yg(t,...e)}function AS(t,e,n){const r={...LR(),[e]:n};return new Nl("auth","Firebase",r).create(e,{appName:t.name})}function er(t){return AS(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function yg(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return xS.create(t,...e)}function le(t,e,...n){if(!t)throw yg(e,...n)}function Qn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Yc(e),new Error(e)}function ar(t,e){t||Qn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gp(){var t;return typeof self!="undefined"&&((t=self.location)==null?void 0:t.href)||""}function FR(){return z0()==="http:"||z0()==="https:"}function z0(){var t;return typeof self!="undefined"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(){return typeof navigator!="undefined"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(FR()||tk()||"connection"in navigator)?navigator.onLine:!0}function UR(){if(typeof navigator=="undefined")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e,n){this.shortDelay=e,this.longDelay=n,ar(n>e,"Short delay should be less than long delay!"),this.isMobile=Jb()||nk()}get(){return VR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vg(t,e){ar(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self!="undefined"&&"fetch"in self)return self.fetch;if(typeof globalThis!="undefined"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch!="undefined")return fetch;Qn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self!="undefined"&&"Headers"in self)return self.Headers;if(typeof globalThis!="undefined"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers!="undefined")return Headers;Qn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self!="undefined"&&"Response"in self)return self.Response;if(typeof globalThis!="undefined"&&globalThis.Response)return globalThis.Response;if(typeof Response!="undefined")return Response;Qn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],jR=new jl(3e4,6e4);function mi(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function gi(t,e,n,r,i={}){return RS(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const l=Dl({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:c,...s};return ek()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&bo(t.emulatorConfig.host)&&(d.credentials="include"),PS.fetch()(await NS(t,t.config.apiHost,n,l),d)})}async function RS(t,e,n){t._canInitEmulator=!1;const r={...BR,...e};try{const i=new WR(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Pc(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const l=s.ok?o.errorMessage:o.error.message,[c,d]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Pc(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Pc(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Pc(t,"user-disabled",o);const f=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw AS(t,f,d);_n(t,f)}}catch(i){if(i instanceof cr)throw i;_n(t,"network-request-failed",{message:String(i)})}}async function $l(t,e,n,r,i={}){const s=await gi(t,e,n,r,i);return"mfaPendingCredential"in s&&_n(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function NS(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?vg(t.config,i):`${t.config.apiScheme}://${i}`;return zR.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function $R(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class WR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ln(this.auth,"network-request-failed")),jR.get())})}}function Pc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Ln(t,e,r);return i.customData._tokenResponse=n,i}function j0(t){return t!==void 0&&t.enterprise!==void 0}class HR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return $R(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function qR(t,e){return gi(t,"GET","/v2/recaptchaConfig",mi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GR(t,e){return gi(t,"POST","/v1/accounts:delete",e)}async function $u(t,e){return gi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xa(t){if(!!t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function KR(t,e=!1){const n=et(t),r=await n.getIdToken(e),i=_g(r);le(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Xa(Kh(i.auth_time)),issuedAtTime:Xa(Kh(i.iat)),expirationTime:Xa(Kh(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Kh(t){return Number(t)*1e3}function _g(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Yc("JWT malformed, contained fewer than 3 sections"),null;try{const i=Vw(n);return i?JSON.parse(i):(Yc("Failed to decode base64 JWT payload"),null)}catch(i){return Yc("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function $0(t){const e=_g(t);return le(e,"internal-error"),le(typeof e.exp!="undefined","internal-error"),le(typeof e.iat!="undefined","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function El(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof cr&&XR(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function XR({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!=null?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xa(this.lastLoginAt),this.creationTime=Xa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wu(t){var v;const e=t.auth,n=await t.getIdToken(),r=await El(t,$u(e,{idToken:n}));le(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const s=(v=i.providerUserInfo)!=null&&v.length?DS(i.providerUserInfo):[],o=JR(t.providerData,s),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),d=l?c:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new yp(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function YR(t){const e=et(t);await Wu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function JR(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function DS(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZR(t,e){const n=await RS(t,{},async()=>{const r=Dl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await NS(t,i,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&bo(t.emulatorConfig.host)&&(c.credentials="include"),PS.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function e2(t,e){return gi(t,"POST","/v2/accounts:revokeToken",mi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){le(e.idToken,"internal-error"),le(typeof e.idToken!="undefined","internal-error"),le(typeof e.refreshToken!="undefined","internal-error");const n="expiresIn"in e&&typeof e.expiresIn!="undefined"?Number(e.expiresIn):$0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){le(e.length!==0,"internal-error");const n=$0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(le(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await ZR(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Js;return r&&(le(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(le(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(le(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Js,this.toJSON())}_performRefresh(){return Qn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cr(t,e){le(typeof t=="string"||typeof t=="undefined","internal-error",{appName:e})}class mn{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new QR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new yp(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await El(this,this.stsTokenManager.getToken(this.auth,e));return le(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return KR(this,e)}reload(){return YR(this)}_assign(e){this!==e&&(le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new mn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Wu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Zt(this.auth.app))return Promise.reject(er(this.auth));const e=await this.getIdToken();return await El(this,GR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var x,D,O,z,V,k,_,S;const r=(x=n.displayName)!=null?x:void 0,i=(D=n.email)!=null?D:void 0,s=(O=n.phoneNumber)!=null?O:void 0,o=(z=n.photoURL)!=null?z:void 0,l=(V=n.tenantId)!=null?V:void 0,c=(k=n._redirectEventId)!=null?k:void 0,d=(_=n.createdAt)!=null?_:void 0,f=(S=n.lastLoginAt)!=null?S:void 0,{uid:v,emailVerified:m,isAnonymous:T,providerData:P,stsTokenManager:R}=n;le(v&&R,e,"internal-error");const y=Js.fromJSON(this.name,R);le(typeof v=="string",e,"internal-error"),Cr(r,e.name),Cr(i,e.name),le(typeof m=="boolean",e,"internal-error"),le(typeof T=="boolean",e,"internal-error"),Cr(s,e.name),Cr(o,e.name),Cr(l,e.name),Cr(c,e.name),Cr(d,e.name),Cr(f,e.name);const E=new mn({uid:v,auth:e,email:i,emailVerified:m,displayName:r,isAnonymous:T,photoURL:o,phoneNumber:s,tenantId:l,stsTokenManager:y,createdAt:d,lastLoginAt:f});return P&&Array.isArray(P)&&(E.providerData=P.map(I=>({...I}))),c&&(E._redirectEventId=c),E}static async _fromIdTokenResponse(e,n,r=!1){const i=new Js;i.updateFromServerResponse(n);const s=new mn({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Wu(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];le(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?DS(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),l=new Js;l.updateFromIdToken(r);const c=new mn({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new yp(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0=new Map;function Yn(t){ar(t instanceof Function,"Expected a class definition");let e=W0.get(t);return e?(ar(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,W0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}OS.type="NONE";const H0=OS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jc(t,e,n){return`firebase:${t}:${e}:${n}`}class Zs{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Jc(this.userKey,i.apiKey,s),this.fullPersistenceKey=Jc("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await $u(this.auth,{idToken:e}).catch(()=>{});return n?mn._fromGetAccountInfoResponse(this.auth,n,e):null}return mn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Zs(Yn(H0),e,r);const i=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let s=i[0]||Yn(H0);const o=Jc(r,e.config.apiKey,e.name);let l=null;for(const d of n)try{const f=await d._get(o);if(f){let v;if(typeof f=="string"){const m=await $u(e,{idToken:f}).catch(()=>{});if(!m)break;v=await mn._fromGetAccountInfoResponse(e,m,f)}else v=mn._fromJSON(e,f);d!==s&&(l=v),s=d;break}}catch{}const c=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new Zs(s,e,r):(s=c[0],l&&await s._set(o,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==s)try{await d._remove(o)}catch{}})),new Zs(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(VS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(LS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(BS(e))return"Blackberry";if(zS(e))return"Webos";if(MS(e))return"Safari";if((e.includes("chrome/")||FS(e))&&!e.includes("edge/"))return"Chrome";if(US(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function LS(t=Ct()){return/firefox\//i.test(t)}function MS(t=Ct()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function FS(t=Ct()){return/crios\//i.test(t)}function VS(t=Ct()){return/iemobile/i.test(t)}function US(t=Ct()){return/android/i.test(t)}function BS(t=Ct()){return/blackberry/i.test(t)}function zS(t=Ct()){return/webos/i.test(t)}function wg(t=Ct()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function t2(t=Ct()){var e;return wg(t)&&!!((e=window.navigator)!=null&&e.standalone)}function n2(){return rk()&&document.documentMode===10}function jS(t=Ct()){return wg(t)||US(t)||zS(t)||BS(t)||/windows phone/i.test(t)||VS(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $S(t,e=[]){let n;switch(t){case"Browser":n=q0(Ct());break;case"Worker":n=`${q0(Ct())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ko}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,l)=>{try{const c=e(s);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i2(t,e={}){return gi(t,"GET","/v2/passwordPolicy",mi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s2=6;class o2{constructor(e){var r,i,s,o;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=n.minPasswordLength)!=null?r:s2,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))!=null?s:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!=null?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,i,s,o,l,c;const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=(r=n.meetsMinPasswordLength)!=null?r:!0),n.isValid&&(n.isValid=(i=n.meetsMaxPasswordLength)!=null?i:!0),n.isValid&&(n.isValid=(s=n.containsLowercaseLetter)!=null?s:!0),n.isValid&&(n.isValid=(o=n.containsUppercaseLetter)!=null?o:!0),n.isValid&&(n.isValid=(l=n.containsNumericCharacter)!=null?l:!0),n.isValid&&(n.isValid=(c=n.containsNonAlphanumericCharacter)!=null?c:!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new G0(this),this.idTokenSubscription=new G0(this),this.beforeStateQueue=new r2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Yn(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await Zs.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await $u(this,{idToken:e}),r=await mn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(Zt(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)==null?void 0:s._redirectEventId,l=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c==null?void 0:c.user)&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Wu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=UR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Zt(this.app))return Promise.reject(er(this));const n=e?et(e):null;return n&&le(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Zt(this.app)?Promise.reject(er(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Zt(this.app)?Promise.reject(er(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Yn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await i2(this),n=new o2(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Nl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await e2(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Yn(e)||this._popupRedirectResolver;le(n,this,"argument-error"),this.redirectPersistenceManager=await Zs.create(this,[Yn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=(r=(n=this.currentUser)==null?void 0:n.uid)!=null?r:null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(le(l,this,"internal-error"),l.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=$S(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Zt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&MR(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function cs(t){return et(t)}class G0{constructor(e){this.auth=e,this.observer=null,this.addObserver=dk(n=>this.observer=n)}get next(){return le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function l2(t){Hd=t}function WS(t){return Hd.loadJS(t)}function c2(){return Hd.recaptchaEnterpriseScript}function u2(){return Hd.gapiScript}function d2(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class h2{constructor(){this.enterprise=new f2}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class f2{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const p2="recaptcha-enterprise",HS="NO_RECAPTCHA";class m2{constructor(e){this.type=p2,this.auth=cs(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,l)=>{qR(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new HR(c);return s.tenantId==null?s._agentRecaptchaConfig=d:s._tenantRecaptchaConfigs[s.tenantId]=d,o(d.siteKey)}}).catch(c=>{l(c)})})}function i(s,o,l){const c=window.grecaptcha;j0(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(d=>{o(d)}).catch(()=>{o(HS)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new h2().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(l=>{if(!n&&j0(window.grecaptcha))i(l,s,o);else{if(typeof window=="undefined"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=c2();c.length!==0&&(c+=l),WS(c).then(()=>{i(l,s,o)}).catch(d=>{o(d)})}}).catch(l=>{o(l)})})}}async function _a(t,e,n,r=!1,i=!1){const s=new m2(t);let o;if(i)o=HS;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,d=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function vp(t,e,n,r,i){var s,o;if(i==="EMAIL_PASSWORD_PROVIDER")if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await _a(t,e,n,n==="getOobCode");return r(t,l)}else return r(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await _a(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(l)});else if(i==="PHONE_PROVIDER")if((o=t._getRecaptchaConfig())!=null&&o.isProviderEnabled("PHONE_PROVIDER")){const l=await _a(t,e,n);return r(t,l).catch(async c=>{var d;if(((d=t._getRecaptchaConfig())==null?void 0:d.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const f=await _a(t,e,n,!1,!0);return r(t,f)}return Promise.reject(c)})}else{const l=await _a(t,e,n,!1,!0);return r(t,l)}else return Promise.reject(i+" provider is not supported.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g2(t,e){const n=Rm(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Xi(s,e!=null?e:{}))return i;_n(i,"already-initialized")}return n.initialize({options:e})}function y2(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Yn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function v2(t,e,n){const r=cs(t);le(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=qS(e),{host:o,port:l}=_2(e),c=l===null?"":`:${l}`,d={url:`${s}//${o}${c}/`},f=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){le(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),le(Xi(d,r.config.emulator)&&Xi(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,bo(o)?(jw(`${s}//${o}${c}`),$w("Auth",!0)):i||w2()}function qS(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function _2(t){const e=qS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:K0(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:K0(o)}}}function K0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function w2(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console!="undefined"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window!="undefined"&&typeof document!="undefined"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Qn("not implemented")}_getIdTokenResponse(e){return Qn("not implemented")}_linkToIdToken(e,n){return Qn("not implemented")}_getReauthenticationResolver(e){return Qn("not implemented")}}async function E2(t,e){return gi(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S2(t,e){return $l(t,"POST","/v1/accounts:signInWithPassword",mi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T2(t,e){return $l(t,"POST","/v1/accounts:signInWithEmailLink",mi(t,e))}async function I2(t,e){return $l(t,"POST","/v1/accounts:signInWithEmailLink",mi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl extends Eg{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Sl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Sl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if((n==null?void 0:n.email)&&(n==null?void 0:n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vp(e,n,"signInWithPassword",S2,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return T2(e,{email:this._email,oobCode:this._password});default:_n(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vp(e,r,"signUpPassword",E2,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return I2(e,{idToken:n,email:this._email,oobCode:this._password});default:_n(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eo(t,e){return $l(t,"POST","/v1/accounts:signInWithIdp",mi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2="http://localhost";class Zi extends Eg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Zi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):_n("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=n;if(!r||!i)return null;const o=new Zi(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return eo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,eo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,eo(e,n)}buildRequest(){const e={requestUri:C2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Dl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b2(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function k2(t){const e=Ca(ba(t)).link,n=e?Ca(ba(e)).deep_link_id:null,r=Ca(ba(t)).deep_link_id;return(r?Ca(ba(r)).link:null)||r||n||e||t}class Sg{constructor(e){var o,l,c,d,f,v;const n=Ca(ba(e)),r=(o=n.apiKey)!=null?o:null,i=(l=n.oobCode)!=null?l:null,s=b2((c=n.mode)!=null?c:null);le(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=(d=n.continueUrl)!=null?d:null,this.languageCode=(f=n.lang)!=null?f:null,this.tenantId=(v=n.tenantId)!=null?v:null}static parseLink(e){const n=k2(e);try{return new Sg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(){this.providerId=Do.PROVIDER_ID}static credential(e,n){return Sl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Sg.parseLink(n);return le(r,"argument-error"),Sl._fromEmailAndCode(e,r.code,r.tenantId)}}Do.PROVIDER_ID="password";Do.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Do.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl extends GS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar extends Wl{constructor(){super("facebook.com")}static credential(e){return Zi._fromParams({providerId:Ar.PROVIDER_ID,signInMethod:Ar.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ar.credentialFromTaggedObject(e)}static credentialFromError(e){return Ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ar.credential(e.oauthAccessToken)}catch{return null}}}Ar.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ar.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr extends Wl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Zi._fromParams({providerId:Pr.PROVIDER_ID,signInMethod:Pr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Pr.credentialFromTaggedObject(e)}static credentialFromError(e){return Pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Pr.credential(n,r)}catch{return null}}}Pr.GOOGLE_SIGN_IN_METHOD="google.com";Pr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr extends Wl{constructor(){super("github.com")}static credential(e){return Zi._fromParams({providerId:Rr.PROVIDER_ID,signInMethod:Rr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Rr.credentialFromTaggedObject(e)}static credentialFromError(e){return Rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Rr.credential(e.oauthAccessToken)}catch{return null}}}Rr.GITHUB_SIGN_IN_METHOD="github.com";Rr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr extends Wl{constructor(){super("twitter.com")}static credential(e,n){return Zi._fromParams({providerId:Nr.PROVIDER_ID,signInMethod:Nr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Nr.credentialFromTaggedObject(e)}static credentialFromError(e){return Nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Nr.credential(n,r)}catch{return null}}}Nr.TWITTER_SIGN_IN_METHOD="twitter.com";Nr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x2(t,e){return $l(t,"POST","/v1/accounts:signUp",mi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await mn._fromIdTokenResponse(e,r,i),o=X0(r);return new es({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=X0(r);return new es({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function X0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu extends cr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Hu.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!=null?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Hu(e,n,r,i)}}function KS(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Hu._fromErrorAndOperation(t,s,e,r):s})}async function A2(t,e,n=!1){const r=await El(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return es._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P2(t,e,n=!1){const{auth:r}=t;if(Zt(r.app))return Promise.reject(er(r));const i="reauthenticate";try{const s=await El(t,KS(r,i,e,t),n);le(s.idToken,r,"internal-error");const o=_g(s.idToken);le(o,r,"internal-error");const{sub:l}=o;return le(t.uid===l,r,"user-mismatch"),es._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&_n(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XS(t,e,n=!1){if(Zt(t.app))return Promise.reject(er(t));const r="signIn",i=await KS(t,r,e),s=await es._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function R2(t,e){return XS(cs(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QS(t){const e=cs(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function N2(t,e,n){if(Zt(t.app))return Promise.reject(er(t));const r=cs(t),o=await vp(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",x2,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&QS(t),c}),l=await es._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function D2(t,e,n){return Zt(t.app)?Promise.reject(er(t)):R2(et(t),Do.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&QS(t),r})}function O2(t,e,n,r){return et(t).onIdTokenChanged(e,n,r)}function L2(t,e,n){return et(t).beforeAuthStateChanged(e,n)}function M2(t,e,n,r){return et(t).onAuthStateChanged(e,n,r)}function F2(t){return et(t).signOut()}const qu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(qu,"1"),this.storage.removeItem(qu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V2=1e3,U2=10;class JS extends YS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=jS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);n2()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,U2):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},V2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}JS.type="LOCAL";const B2=JS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS extends YS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}ZS.type="SESSION";const eT=ZS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z2(t){return Promise.all(t.map(async e=>{try{const n=await e;return{fulfilled:!0,value:n}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new qd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(o).map(async d=>d(n.origin,s)),c=await z2(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}qd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tg(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel!="undefined"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((l,c)=>{const d=Tg("",20);i.port1.start();const f=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(v){const m=v;if(m.data.eventId===d)switch(m.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(m.data.response);break;default:clearTimeout(f),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mn(){return window}function $2(t){Mn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tT(){return typeof Mn().WorkerGlobalScope!="undefined"&&typeof Mn().importScripts=="function"}async function W2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function H2(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function q2(){return tT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nT="firebaseLocalStorageDb",G2=1,Gu="firebaseLocalStorage",rT="fbase_key";class Hl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Gd(t,e){return t.transaction([Gu],e?"readwrite":"readonly").objectStore(Gu)}function K2(){const t=indexedDB.deleteDatabase(nT);return new Hl(t).toPromise()}function _p(){const t=indexedDB.open(nT,G2);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Gu,{keyPath:rT})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Gu)?e(r):(r.close(),await K2(),e(await _p()))})})}async function Q0(t,e,n){const r=Gd(t,!0).put({[rT]:e,value:n});return new Hl(r).toPromise()}async function X2(t,e){const n=Gd(t,!1).get(e),r=await new Hl(n).toPromise();return r===void 0?null:r.value}function Y0(t,e){const n=Gd(t,!0).delete(e);return new Hl(n).toPromise()}const Q2=800,Y2=3;class iT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _p(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Y2)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return tT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=qd._getInstance(q2()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await W2(),!this.activeServiceWorker)return;this.sender=new j2(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);!e||((n=e[0])==null?void 0:n.fulfilled)&&((r=e[0])==null?void 0:r.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||H2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _p();return await Q0(e,qu,"1"),await Y0(e,qu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Q0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>X2(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Y0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Gd(i,!1).getAll();return new Hl(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Q2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}iT.type="LOCAL";const J2=iT;new jl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z2(t,e){return e?Yn(e):(le(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig extends Eg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return eo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return eo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return eo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function eN(t){return XS(t.auth,new Ig(t),t.bypassAuthState)}function tN(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),P2(n,new Ig(t),t.bypassAuthState)}async function nN(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),A2(n,new Ig(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return eN;case"linkViaPopup":case"linkViaRedirect":return nN;case"reauthViaPopup":case"reauthViaRedirect":return tN;default:_n(this.auth,"internal-error")}}resolve(e){ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN=new jl(2e3,1e4);class Bs extends sT{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Bs.currentPopupAction&&Bs.currentPopupAction.cancel(),Bs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return le(e,this.auth,"internal-error"),e}async onExecution(){ar(this.filter.length===1,"Popup operations only handle one event");const e=Tg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ln(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Ln(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Bs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ln(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,rN.get())};e()}}Bs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iN="pendingRedirect",Zc=new Map;class sN extends sT{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Zc.get(this.auth._key());if(!e){try{const r=await oN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Zc.set(this.auth._key(),e)}return this.bypassAuthState||Zc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function oN(t,e){const n=cN(e),r=lN(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function aN(t,e){Zc.set(t._key(),e)}function lN(t){return Yn(t._redirectPersistence)}function cN(t){return Jc(iN,t.config.apiKey,t.name)}async function uN(t,e,n=!1){if(Zt(t.app))return Promise.reject(er(t));const r=cs(t),i=Z2(r,e),o=await new sN(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dN=10*60*1e3;class hN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!fN(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!oT(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Ln(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=dN&&this.cachedEventUids.clear(),this.cachedEventUids.has(J0(e))}saveEventToCache(e){this.cachedEventUids.add(J0(e)),this.lastProcessedEventTime=Date.now()}}function J0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function oT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function fN(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return oT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pN(t,e={}){return gi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gN=/^https?/;async function yN(t){if(t.config.emulator)return;const{authorizedDomains:e}=await pN(t);for(const n of e)try{if(vN(n))return}catch{}_n(t,"unauthorized-domain")}function vN(t){const e=gp(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!gN.test(n))return!1;if(mN.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _N=new jl(3e4,6e4);function Z0(){const t=Mn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function wN(t){return new Promise((e,n)=>{var i,s,o;function r(){Z0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Z0(),n(Ln(t,"network-request-failed"))},timeout:_N.get()})}if((s=(i=Mn().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((o=Mn().gapi)!=null&&o.load)r();else{const l=d2("iframefcb");return Mn()[l]=()=>{gapi.load?r():n(Ln(t,"network-request-failed"))},WS(`${u2()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw eu=null,e})}let eu=null;function EN(t){return eu=eu||wN(t),eu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN=new jl(5e3,15e3),TN="__/auth/iframe",IN="emulator/auth/iframe",CN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kN(t){const e=t.config;le(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?vg(e,IN):`https://${t.config.authDomain}/${TN}`,r={apiKey:e.apiKey,appName:t.name,v:ko},i=bN.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Dl(r).slice(1)}`}async function xN(t){const e=await EN(t),n=Mn().gapi;return le(n,t,"internal-error"),e.open({where:document.body,url:kN(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:CN,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Ln(t,"network-request-failed"),l=Mn().setTimeout(()=>{s(o)},SN.get());function c(){Mn().clearTimeout(l),i(r)}r.ping(c).then(c,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},PN=500,RN=600,NN="_blank",DN="http://localhost";class e_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ON(t,e,n,r=PN,i=RN){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c={...AN,width:r.toString(),height:i.toString(),top:s,left:o},d=Ct().toLowerCase();n&&(l=FS(d)?NN:n),LS(d)&&(e=e||DN,c.scrollbars="yes");const f=Object.entries(c).reduce((m,[T,P])=>`${m}${T}=${P},`,"");if(t2(d)&&l!=="_self")return LN(e||"",l),new e_(null);const v=window.open(e||"",l,f);le(v,t,"popup-blocked");try{v.focus()}catch{}return new e_(v)}function LN(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MN="__/auth/handler",FN="emulator/auth/handler",VN=encodeURIComponent("fac");async function t_(t,e,n,r,i,s){le(t.config.authDomain,t,"auth-domain-config-required"),le(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ko,eventId:i};if(e instanceof GS){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",uk(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,v]of Object.entries(s||{}))o[f]=v}if(e instanceof Wl){const f=e.getScopes().filter(v=>v!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const c=await t._getAppCheckToken(),d=c?`#${VN}=${encodeURIComponent(c)}`:"";return`${UN(t)}?${Dl(l).slice(1)}${d}`}function UN({config:t}){return t.emulator?vg(t,FN):`https://${t.authDomain}/${MN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xh="webStorageSupport";class BN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=eT,this._completeRedirectFn=uN,this._overrideRedirectResult=aN}async _openPopup(e,n,r,i){var o;ar((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await t_(e,n,r,gp(),i);return ON(e,s,Tg())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await t_(e,n,r,gp(),i);return $2(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(ar(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await xN(e),r=new hN(e);return n.register("authEvent",i=>(le(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Xh,{type:Xh},i=>{var o;const s=(o=i==null?void 0:i[0])==null?void 0:o[Xh];s!==void 0&&n(!!s),_n(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=yN(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return jS()||MS()||wg()}}const zN=BN;var n_="@firebase/auth",r_="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);!n||(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $N(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function WN(t){oo(new Qi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;le(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$S(t)},d=new a2(r,i,s,c);return y2(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),oo(new Qi("auth-internal",e=>{const n=cs(e.getProvider("auth").getImmediate());return(r=>new jN(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Kr(n_,r_,$N(t)),Kr(n_,r_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN=5*60,qN=zw("authIdTokenMaxAge")||HN;let i_=null;const GN=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>qN)return;const i=n==null?void 0:n.token;i_!==i&&(i_=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Oo(t=Gw()){const e=Rm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=g2(t,{popupRedirectResolver:zN,persistence:[J2,B2,eT]}),r=zw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=GN(s.toString());L2(n,o,()=>o(n.currentUser)),O2(n,l=>o(l))}}const i=Uw("auth");return i&&v2(n,`http://${i}`),n}function KN(){var t,e;return(e=(t=document.getElementsByTagName("head"))==null?void 0:t[0])!=null?e:document}l2({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Ln("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",KN().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});WN("Browser");const XN={apiKey:"AIzaSyBdAla3vH9KyPZLufH8bnIrA7W4qEs4ZBA",authDomain:"adhd-calendar-app.firebaseapp.com",projectId:"adhd-calendar-app",storageBucket:"adhd-calendar-app.firebasestorage.app",messagingSenderId:"226358576594",appId:"1:226358576594:web:47c154fd3bd270d6c3340b"},aT=qw(XN),mo=Oo(aT),sn=yR(aT),Kd=async t=>{var e;try{const r=Oo().currentUser;if(!r){console.warn("[gameProgress] No user logged in, not saving to Firestore");return}const i=ls(sn,"users",r.uid),s=await zl(i),o=s.exists()?((e=s.data())==null?void 0:e.gameProgress)||{}:{},l={...o,...t,lastUpdated:new Date().toISOString()};console.log("[gameProgress] Merging:",{existing:o,new:t,merged:l,newTasks:t==null?void 0:t.tasks,mergedTasks:l.tasks,newPets:t==null?void 0:t.pets,mergedPets:l.pets,newCurrentPetId:t==null?void 0:t.currentPetId,mergedCurrentPetId:l.currentPetId}),await IS(i,{gameProgress:l},{merge:!0}),console.log("[gameProgress] \u2705 Saved to Firestore:",l)}catch(n){console.error("[gameProgress] \u274C Error saving to Firestore:",n)}},QN=async()=>{var t;try{const n=Oo().currentUser;if(!n)return console.warn("[gameProgress] No user logged in, not loading from Firestore"),null;const r=ls(sn,"users",n.uid),i=await zl(r);if(!i.exists())return console.warn("[gameProgress] User document not found"),null;const s=i.data();console.log("[gameProgress] Full user doc data:",s);const o=s==null?void 0:s.gameProgress;return console.log("[gameProgress] gameProgress field:",o),console.log("[gameProgress] gameProgress.xp =",o==null?void 0:o.xp),console.log("[gameProgress] gameProgress.tasks =",o==null?void 0:o.tasks,"| type:",typeof(o==null?void 0:o.tasks)),console.log("[gameProgress] gameProgress.pets =",o==null?void 0:o.pets,"| length:",(t=o==null?void 0:o.pets)==null?void 0:t.length),console.log("[gameProgress] gameProgress.currentPetId =",o==null?void 0:o.currentPetId),o?(console.log("[gameProgress] \u2705 Loaded from Firestore:",o),o):(console.warn("[gameProgress] No gameProgress field found in user document"),null)}catch(e){return console.error("[gameProgress] \u274C Error loading from Firestore:",e),null}},YN=async t=>{console.log("[syncXpToFirestore] Syncing XP:",t,"to Firestore...");try{await Kd({xp:t}),console.log("[syncXpToFirestore] \u2705 XP sync complete")}catch(e){throw console.error("[syncXpToFirestore] \u274C XP sync failed:",e),e}},lT=async(t,e)=>{await Kd({unlockedTitles:t,selectedTitle:e})},JN=async t=>{console.log("[syncTasksToFirestore] Syncing tasks to Firestore...");try{await Kd({tasks:t}),console.log("[syncTasksToFirestore] \u2705 Tasks sync complete")}catch(e){throw console.error("[syncTasksToFirestore] \u274C Tasks sync failed:",e),e}},Cg=async(t,e)=>{console.log("[syncPetsToFirestore] Syncing pets to Firestore...");try{await Kd({pets:t,currentPetId:e}),console.log("[syncPetsToFirestore] \u2705 Pets sync complete")}catch(n){throw console.error("[syncPetsToFirestore] \u274C Pets sync failed:",n),n}},Qh="adhd_tasks",s_="adhd_events",Lo=()=>{const[t,e]=L.exports.useState(()=>Gh(s_)||{}),[n,r]=L.exports.useState(()=>Gh(Qh)||[]),[i,s]=L.exports.useState(!1),o=L.exports.useRef(!0);return L.exports.useEffect(()=>{const m=()=>{console.log("[useCalendar] Tasks restored event received, reloading from localStorage"),o.current=!0;const P=Gh(Qh)||[];console.log("[useCalendar] Reloaded",P.length,"tasks from localStorage"),r(P),setTimeout(()=>{o.current=!1,console.log("[useCalendar] Restoration complete, syncing re-enabled")},500)},T=()=>{console.log("[useCalendar] Tasks cleared event received, clearing tasks"),r([])};return window.addEventListener("tasks:restored",m),window.addEventListener("tasks:cleared",T),()=>{window.removeEventListener("tasks:restored",m),window.removeEventListener("tasks:cleared",T)}},[]),L.exports.useEffect(()=>{try{console.log("[useCalendar] Tasks changed, saving to localStorage:",n.length,"tasks",n),B0(Qh,n),Oo().currentUser&&!o.current?(console.log("[useCalendar] Syncing",n.length,"tasks to Firestore..."),JN(n).catch(T=>console.warn("[useCalendar] Failed to sync tasks:",T))):o.current?console.log("[useCalendar] Skipping sync - still in restoration period"):console.log("[useCalendar] Not syncing - user not logged in")}catch{}},[n]),L.exports.useEffect(()=>{try{B0(s_,t)}catch{}},[t]),{events:t,tasks:n,loading:i,addEvent:(m,T)=>{const P=m.toDateString();e(R=>{const y={...R};return y[P]=[...y[P]||[],T],y})},removeEvent:(m,T)=>{const P=m.toDateString();e(R=>{const y={...R};return y[P]?(y[P]=y[P].filter((E,x)=>x!==T),y):R})},addTask:m=>{console.log("[useCalendar.addTask] Adding task:",m);const T={...m,createdAt:Date.now()};r(P=>(console.log("[useCalendar.addTask] Updating tasks state from",P.length,"to",P.length+1),[...P,T]))},removeTask:m=>{r(T=>T.filter(P=>P.id!==m))},updateTask:m=>{r(T=>T.map(P=>P.id===m.id?{...P,...m}:P))}}};var Xd={exports:{}},ql={};/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZN=L.exports,cT=60103;ql.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var o_=Symbol.for;cT=o_("react.element"),ql.Fragment=o_("react.fragment")}var eD=ZN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,tD=Object.prototype.hasOwnProperty,nD={key:!0,ref:!0,__self:!0,__source:!0};function uT(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)tD.call(e,r)&&!nD.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:cT,type:t,key:s,ref:o,props:i,_owner:eD.current}}ql.jsx=uT;ql.jsxs=uT;Xd.exports=ql;const u=Xd.exports.jsx,g=Xd.exports.jsxs,Wt=Xd.exports.Fragment,bg=({task:t,timeUntilXp:e=0,xpAmount:n=20,onComplete:r=()=>{},onUpdate:i=()=>{},onRemove:s=()=>{}})=>{const[o,l]=L.exports.useState(!1),[c,d]=L.exports.useState(t.title||""),[f,v]=L.exports.useState(t.description||""),[m,T]=L.exports.useState(t.dueDate||""),[P,R]=L.exports.useState(e),y=()=>{i({...t,title:c,description:f,dueDate:m}),l(!1)},[E,x]=L.exports.useState(!1),[D,O]=L.exports.useState(!1),[z,V]=L.exports.useState(()=>m?new Date(m).getHours():9),[k,_]=L.exports.useState(()=>m?new Date(m).getMinutes():0);L.exports.useEffect(()=>{if(P<=0)return;const b=setInterval(()=>{R(N=>Math.max(0,N-1e3))},1e3);return()=>clearInterval(b)},[P]);const S=()=>{const b=m?new Date(m):new Date,N=new Date(b.getFullYear(),b.getMonth(),b.getDate(),z,k);T(N.toISOString())},I=({onPick:b,initial:N})=>{const w=N||new Date,[Q,J]=L.exports.useState(new Date(w.getFullYear(),w.getMonth(),1)),se=Q.getFullYear(),q=Q.getMonth(),te=L.exports.useMemo(()=>{const $=[],H=new Date(se,q,1);let M=new Date(H);for(M.setDate(M.getDate()-M.getDay());$.length<6;){const B=[];for(let Y=0;Y<7;Y++)B.push(new Date(M)),M.setDate(M.getDate()+1);$.push(B)}return $},[se,q]);return g("div",{className:"panel day-popup",style:{width:280},children:[g("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:[u("button",{className:"btn ghost",onClick:()=>J($=>new Date($.getFullYear(),$.getMonth()-1,1)),children:"\u25C0"}),u("div",{children:Q.toLocaleString(void 0,{month:"long",year:"numeric"})}),u("button",{className:"btn ghost",onClick:()=>J($=>new Date($.getFullYear(),$.getMonth()+1,1)),children:"\u25B6"})]}),u("div",{style:{display:"grid",gridTemplateColumns:"repeat(7,1fr)",gap:6},children:["S","M","T","W","T","F","S"].map($=>u("div",{style:{textAlign:"center",fontSize:12,color:"var(--muted)"},children:$},$))}),u("div",{style:{display:"grid",gridTemplateColumns:"repeat(7,1fr)",gap:6,marginTop:6},children:te.flat().map(($,H)=>u("button",{className:"btn ghost",style:{padding:8,minWidth:0,opacity:$.getMonth()===q?1:.35},onClick:()=>b(new Date($.getFullYear(),$.getMonth(),$.getDate())),children:$.getDate()},H))})]})};return u("div",{className:"task-card",children:o?g("div",{className:"task-edit",children:[g("div",{style:{display:"flex",flexDirection:"column",gap:8,width:"100%"},children:[u("input",{className:"input",value:c,onChange:b=>d(b.target.value)}),u("input",{className:"input",value:f,onChange:b=>v(b.target.value)}),g("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[u("button",{type:"button",className:"btn ghost",onClick:()=>x(b=>!b),children:m?new Date(m).toLocaleDateString():"Set due date"}),u("button",{type:"button",className:"btn ghost",onClick:()=>O(b=>!b),style:{marginLeft:6},children:m?new Date(m).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"Set time"}),u("div",{style:{flex:1}})]}),E&&u("div",{style:{marginTop:8},children:u(I,{onPick:b=>{T(new Date(b.getFullYear(),b.getMonth(),b.getDate()).toISOString()),x(!1)},initial:m?new Date(m):void 0})}),D&&u("div",{style:{marginTop:8},children:u("div",{className:"panel day-popup",style:{padding:12},children:g("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[u("select",{value:z,onChange:b=>V(Number(b.target.value)),children:Array.from({length:24}).map((b,N)=>u("option",{value:N,children:String(N).padStart(2,"0")},N))}),":",u("select",{value:k,onChange:b=>_(Number(b.target.value)),children:Array.from({length:12}).map((b,N)=>u("option",{value:N*5,children:String(N*5).padStart(2,"0")},N))}),u("div",{style:{flex:1}}),u("button",{className:"btn",onClick:()=>{S(),O(!1)},children:"Apply"})]})})})]}),g("div",{className:"task-actions",style:{marginTop:12},children:[u("button",{className:"btn",onClick:y,children:"Save"}),u("button",{className:"btn ghost",onClick:()=>l(!1),children:"Cancel"})]})]}):g(Wt,{children:[g("div",{className:"task-content",children:[u("h3",{style:{margin:0},children:t.title}),t.description&&u("div",{className:"subtle",style:{marginTop:6},children:t.description}),t.dueDate&&g("div",{className:"subtle",style:{marginTop:6},children:["Due: ",t.dueDate.includes("T")?new Date(t.dueDate).toLocaleString():new Date(t.dueDate+"T00:00:00").toLocaleString()]}),P>0&&g("div",{className:"subtle",style:{marginTop:6,color:"var(--accent)"},children:["+",n," XP in ",Math.ceil(P/1e3),"s"]})]}),g("div",{className:"task-actions",children:[u("button",{className:"btn ghost",onClick:()=>l(!0),children:"Edit"}),u("button",{className:"btn ghost",onClick:r,disabled:P>0,children:"Done"}),u("button",{className:"btn ghost",onClick:s,children:"Delete"})]})]})})},dT=({date:t,events:e=[],onClick:n=()=>{}})=>g("div",{className:"day-cell clickable",onClick:s=>{n(t,s)},role:"button",tabIndex:0,onKeyDown:s=>{(s.key==="Enter"||s.key===" ")&&(s.preventDefault(),n(t,s))},style:e.length>0?{background:"linear-gradient(135deg, var(--primary)15 0%, var(--accent)15 100%)"}:{},children:[u("div",{className:"date",children:t.getDate()}),u("div",{className:"events",children:e.map((s,o)=>u("div",{className:"event",children:s},o))})]}),hT=8,fT=2,Gl="adhd_critical_test_mode",Kl="adhd_crate_test_mode",rD=()=>{const t=localStorage.getItem(Gl)==="true",e=localStorage.getItem(Kl)==="true",n=t?100:hT,r=e?100:fT,i=Math.random()*100;let s=1,o=!1;return i<n&&(s=2),Math.random()*100<r&&(o=!0),{isCritical:s===2,xpMultiplier:s,crateReward:o}},Cn=()=>{const t=localStorage.getItem(Gl)==="true",e=localStorage.getItem(Kl)==="true";return{criticalHitChance:t?100:hT,crateRewardChance:e?100:fT}},pT=()=>{localStorage.setItem(Gl,"true")},mT=()=>{localStorage.removeItem(Gl)},gT=()=>localStorage.getItem(Gl)==="true",yT=()=>{localStorage.setItem(Kl,"true")},vT=()=>{localStorage.removeItem(Kl)},_T=()=>localStorage.getItem(Kl)==="true",wp="adhd_xp";function Tl(t){if(t<=1)return 0;let e=0;for(let n=1;n<t;n++)e+=100+n*75;return e}function go(t){let e=1;for(;Tl(e+1)<=t;)e++;return e}function iD(t){const e=go(t),n=Tl(e+1);return Math.max(0,n-t)}function sD(t){const e=go(t),n=Tl(e);return t-n}function oD(t){const e=go(t),n=Tl(e+1),r=Tl(e);return n-r}function De(){try{const t=localStorage.getItem(wp);return t?Number(t):0}catch{return 0}}function gn(t,e=!0){try{const n=String(t);localStorage.setItem(wp,n);const r=localStorage.getItem(wp);console.log("[XP] Setting XP to:",t,"| Verified in localStorage:",r),e?(console.log("[XP] \u2B06\uFE0F Syncing XP",t,"to Firestore..."),YN(t).catch(i=>console.warn("[XP] \u274C Failed to sync:",i))):console.log("[XP] \u23ED\uFE0F Skipping sync (logout in progress)")}catch(n){console.error("[XP] \u274C Error in setXp:",n)}window.dispatchEvent(new CustomEvent("xp:update",{detail:{xp:t}}))}function tr(t=10){const e=rD(),n=t*e.xpMultiplier,i=De()+n;return gn(i),window.dispatchEvent(new CustomEvent("xp:granted",{detail:{amount:n,baseAmount:t,isCritical:e.isCritical,crateReward:e.crateReward}})),i}function Qa(t=!0){gn(0,t);try{window.dispatchEvent(new CustomEvent("xp:reset",{detail:{xp:0}}))}catch{}}const wT=({view:t="month"})=>{var b,N;const[e,n]=L.exports.useState(()=>new Date),[r,i]=L.exports.useState(null),[s,o]=L.exports.useState(null),{events:l,addEvent:c,removeEvent:d}=Lo(),f=L.exports.useRef(null),v=e.getFullYear(),m=e.getMonth(),T=e.toLocaleString(void 0,{month:"long",year:"numeric"}),P=L.exports.useMemo(()=>{const w=new Date(v,m+1,0).getDate(),J=Math.ceil(w/7)*7,se=new Array(J).fill(null);for(let q=0;q<w;q++)se[q]=new Date(v,m,q+1);return se},[v,m]),R=(w,Q)=>{Q.stopPropagation();const se=Q.currentTarget.getBoundingClientRect(),q=se.left+se.width/2,te=se.bottom;i(w),o({x:q,y:te})};L.exports.useEffect(()=>{const w=Q=>{!f.current||Q.target instanceof Node&&(f.current.contains(Q.target)||(i(null),o(null)))};return document.addEventListener("click",w),()=>document.removeEventListener("click",w)},[]);const y=(w,Q)=>{c(w,Q)},E=()=>n(w=>new Date(w.getFullYear(),w.getMonth()-1,1)),x=()=>n(w=>new Date(w.getFullYear(),w.getMonth()+1,1)),D=()=>n(w=>new Date(w.getFullYear(),w.getMonth(),w.getDate()-1)),O=()=>n(w=>new Date(w.getFullYear(),w.getMonth(),w.getDate()+1)),z=()=>n(w=>new Date(w.getFullYear(),w.getMonth(),w.getDate()-7)),V=()=>n(w=>new Date(w.getFullYear(),w.getMonth(),w.getDate()+7)),_=t==="week"?(w=>{const Q=new Date(w),J=Q.getDay(),se=Q.getDate()-J,q=new Date(Q.setDate(se)),te=[];for(let $=0;$<7;$++)te.push(new Date(q)),q.setDate(q.getDate()+1);return te})(e):[],S=t==="week"?`${(b=_[0])==null?void 0:b.toLocaleDateString()} - ${(N=_[6])==null?void 0:N.toLocaleDateString()}`:"",I=t==="day"?e.toDateString():t==="week"?S:T;return g("div",{className:"calendar",style:{position:"relative"},children:[g("header",{className:"calendar-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:16,paddingBottom:12},children:[u("button",{className:"btn ghost",onClick:t==="day"?D:t==="week"?z:E,"aria-label":"Previous",style:{color:"var(--text)"},children:"\u25C0"}),u("h1",{style:{flex:1,textAlign:"center",margin:0},children:I}),u("button",{className:"btn ghost",onClick:t==="day"?O:t==="week"?V:x,"aria-label":"Next",style:{color:"var(--text)"},children:"\u25B6"})]}),t==="day"&&u("div",{style:{display:"flex",flexDirection:"column",gap:12},children:g("div",{style:{padding:12},children:[u("h3",{style:{margin:"0 0 8px 0"},children:"Events"}),e>new Date&&u("div",{style:{marginBottom:12,padding:"8px 12px",backgroundColor:"rgba(244, 63, 94, 0.1)",border:"1px solid rgba(244, 63, 94, 0.3)",borderRadius:"4px",fontSize:"0.875rem",color:"#f43f5e"},children:"You can only complete events for today or past days"}),e<new Date&&u("div",{style:{marginBottom:12,padding:"8px 12px",backgroundColor:"rgba(244, 63, 94, 0.1)",border:"1px solid rgba(244, 63, 94, 0.3)",borderRadius:"4px",fontSize:"0.875rem",color:"#f43f5e"},children:"You can only create events for today or future days"}),u("div",{style:{marginBottom:12},children:(l[e.toDateString()]||[]).map((w,Q)=>{const J=e<=new Date;return g("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:[u("span",{children:w}),g("div",{style:{display:"flex",gap:6},children:[u("button",{className:"btn ghost",onClick:()=>{J&&(d(e,Q),tr(15))},disabled:!J,style:{opacity:J?1:.5,cursor:J?"pointer":"not-allowed"},children:"Done"}),u("button",{className:"btn ghost",onClick:()=>{d(e,Q)},style:{cursor:"pointer",color:"#f43f5e"},children:"\u2715"})]})]},Q)})}),u("form",{onSubmit:w=>{w.preventDefault();const Q=w.target.elements.title.value;Q.trim()&&e>=new Date&&(c(e,Q.trim()),w.target.elements.title.value="")},children:g("div",{style:{display:"flex",gap:8},children:[u("input",{className:"input",name:"title",placeholder:"Add event...",disabled:e<new Date}),u("button",{className:"btn",type:"submit",disabled:e<new Date,children:"Add"})]})})]})}),t==="week"&&u("div",{style:{display:"flex",flexDirection:"column",gap:8,padding:12},children:_.map(w=>{const Q=w<=new Date;return g("div",{style:{borderLeft:"4px solid #6366f1",paddingLeft:12},children:[u("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:u("h4",{style:{margin:0},children:w.toDateString()})}),w>new Date&&u("div",{style:{marginBottom:8,padding:"6px 10px",backgroundColor:"rgba(244, 63, 94, 0.1)",border:"1px solid rgba(244, 63, 94, 0.3)",borderRadius:"4px",fontSize:"0.8rem",color:"#f43f5e"},children:"Complete events for today or past days only"}),w<new Date&&u("div",{style:{marginBottom:8,padding:"6px 10px",backgroundColor:"rgba(244, 63, 94, 0.1)",border:"1px solid rgba(244, 63, 94, 0.3)",borderRadius:"4px",fontSize:"0.8rem",color:"#f43f5e"},children:"Cannot create events for past days"}),u("div",{style:{marginBottom:8},children:(l[w.toDateString()]||[]).map((J,se)=>g("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:6,paddingBottom:6,borderBottom:"1px solid #374151"},children:[u("span",{children:J}),g("div",{style:{display:"flex",gap:4},children:[u("button",{className:"btn ghost",onClick:()=>{Q&&(d(w,se),tr(15))},disabled:!Q,style:{opacity:Q?1:.5,cursor:Q?"pointer":"not-allowed",fontSize:"0.8rem"},children:"Done"}),u("button",{className:"btn ghost",onClick:()=>{d(w,se)},style:{cursor:"pointer",color:"#f43f5e",fontSize:"0.8rem"},children:"\u2715"})]})]},se))}),u("form",{onSubmit:J=>{var q;J.preventDefault();const se=(q=J.target.elements[`title-${w.toDateString()}`])==null?void 0:q.value;(se==null?void 0:se.trim())&&w>=new Date&&(c(w,se.trim()),J.target.elements[`title-${w.toDateString()}`].value="")},children:g("div",{style:{display:"flex",gap:6},children:[u("input",{className:"input",name:`title-${w.toDateString()}`,placeholder:"Add event...",style:{fontSize:"0.875rem"},disabled:w<new Date}),u("button",{className:"btn",type:"submit",style:{padding:"4px 8px"},disabled:w<new Date,children:"+"})]})})]},w.toDateString())})}),t!=="day"&&t!=="week"&&g(Wt,{children:[u("div",{className:"calendar-body",children:P.map((w,Q)=>w?u(dT,{date:w,events:l[w.toDateString()]||[],onClick:R},Q):u("div",{className:"day-cell empty"},Q))}),r&&s&&(()=>{const J=(te,$,H)=>Math.max($,Math.min(H,te)),se=J(s.x-160,12,window.innerWidth-320-12),q=J(s.y+8,12,window.innerHeight-220-12);return g("div",{ref:f,className:"panel day-popup",style:{position:"fixed",left:se,top:q,width:320,zIndex:300},children:[g("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[g("div",{children:[u("strong",{children:r.toDateString()}),u("div",{className:"subtle",children:"Quick actions for this day"})]}),u("button",{className:"btn ghost",onClick:()=>{i(null),o(null)},children:"Close"})]}),u("div",{style:{marginTop:12},children:u(aD,{date:r,onAdd:te=>{y(r,te)}})}),g("div",{style:{marginTop:12},children:[u("h4",{style:{margin:0},children:"Events"}),u("div",{className:"subtle",style:{marginTop:6},children:(l[r.toDateString()]||[]).length===0?"No events":""}),r>new Date&&u("div",{style:{marginTop:8,padding:"8px 12px",backgroundColor:"rgba(244, 63, 94, 0.1)",border:"1px solid rgba(244, 63, 94, 0.3)",borderRadius:"4px",fontSize:"0.875rem",color:"#f43f5e"},children:"You can only complete events for today or past days"}),r<new Date&&u("div",{style:{marginTop:8,padding:"8px 12px",backgroundColor:"rgba(244, 63, 94, 0.1)",border:"1px solid rgba(244, 63, 94, 0.3)",borderRadius:"4px",fontSize:"0.875rem",color:"#f43f5e"},children:"You can only create events for today or future days"}),u("div",{style:{marginTop:8,display:"flex",flexDirection:"column",gap:6},children:(l[r.toDateString()]||[]).map((te,$)=>{const H=r<=new Date;return g("div",{className:"event",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u("span",{style:{flex:1,textAlign:"center"},children:te}),g("div",{style:{display:"flex",gap:4},children:[u("button",{className:"btn ghost",onClick:()=>{H&&(d(r,$),tr(15))},disabled:!H,style:{opacity:H?1:.5,cursor:H?"pointer":"not-allowed",color:"black",fontWeight:"bold",backgroundColor:"transparent",border:"2px solid black",padding:"3px 8px",borderRadius:"4px",fontSize:"12px"},children:"Done"}),u("button",{className:"btn ghost",onClick:()=>{d(r,$)},style:{cursor:"pointer",color:"black",fontWeight:"bold",backgroundColor:"transparent",border:"2px solid black",padding:"3px 8px",borderRadius:"4px",fontSize:"12px"},children:"\u2715"})]})]},$)})})]})]})})()]})]})},aD=({date:t,onAdd:e})=>{const[n,r]=L.exports.useState(""),i=t>=new Date;return u("form",{onSubmit:s=>{s.preventDefault(),n.trim()&&i&&(e(n.trim()),r(""))},children:g("div",{style:{display:"flex",gap:8},children:[u("input",{className:"input",placeholder:"Event title",value:n,onChange:s=>r(s.target.value),disabled:!i}),u("button",{className:"btn",type:"submit",disabled:!i,children:"Add"})]})})},Me=({onClick:t=()=>{},children:e,className:n="",variant:r="default"})=>{const i=`btn ${r==="ghost"?"ghost":""} ${n}`.trim();return u("button",{onClick:t,className:i,children:e})},lD=({onAdd:t})=>{const[e,n]=L.exports.useState(""),[r,i]=L.exports.useState(""),[s,o]=L.exports.useState(!1),l=D=>{D.preventDefault(),e.trim()&&(t(e,r||void 0),n(""),i(""),o(!1))},c=({onPick:D,initial:O})=>{const z=O||new Date,[V,k]=L.exports.useState(new Date(z.getFullYear(),z.getMonth(),1)),_=V.getFullYear(),S=V.getMonth(),I=L.exports.useMemo(()=>{const w=[],Q=new Date(_,S,1);let J=new Date(Q);for(J.setDate(J.getDate()-J.getDay());w.length<6;){const se=[];for(let q=0;q<7;q++)se.push(new Date(J)),J.setDate(J.getDate()+1);w.push(se)}return w},[_,S]),b=()=>k(w=>new Date(w.getFullYear(),w.getMonth()-1,1)),N=()=>k(w=>new Date(w.getFullYear(),w.getMonth()+1,1));return g("div",{style:{width:280},className:"panel day-popup",children:[g("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:[u("button",{className:"btn ghost",onClick:b,children:"\u25C0"}),u("div",{children:V.toLocaleString(void 0,{month:"long",year:"numeric"})}),u("button",{className:"btn ghost",onClick:N,children:"\u25B6"})]}),u("div",{style:{display:"grid",gridTemplateColumns:"repeat(7,1fr)",gap:6},children:["S","M","T","W","T","F","S"].map(w=>u("div",{style:{textAlign:"center",fontSize:12,color:"var(--muted)"},children:w},w))}),u("div",{style:{display:"grid",gridTemplateColumns:"repeat(7,1fr)",gap:6,marginTop:6},children:I.flat().map((w,Q)=>{const J=w.getMonth()===S;return u("button",{onClick:()=>D(new Date(w.getFullYear(),w.getMonth(),w.getDate())),className:"btn ghost",style:{padding:8,opacity:J?1:.35,minWidth:0},children:w.getDate()},Q)})})]})},d=D=>{i(new Date(D.getFullYear(),D.getMonth(),D.getDate()).toISOString()),o(!1)},f=r?new Date(r).toLocaleDateString():"",[v,m]=L.exports.useState(!1),[T,P]=L.exports.useState(()=>r?new Date(r).getHours():9),[R,y]=L.exports.useState(()=>r?new Date(r).getMinutes():0),E=r?new Date(r).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"",x=()=>{const D=r?new Date(r):new Date,O=new Date(D.getFullYear(),D.getMonth(),D.getDate(),T,R);i(O.toISOString()),m(!1)};return g("form",{onSubmit:l,style:{display:"flex",flexDirection:"column",gap:8,position:"relative"},children:[u("input",{type:"text",value:e,onChange:D=>n(D.target.value),placeholder:"Add a new task...",className:"input"}),g("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[u("button",{type:"button",className:"btn ghost",onClick:()=>o(D=>!D),children:f||"Set due date"}),u("div",{style:{flex:1}})]}),s&&u("div",{style:{position:"absolute",left:0,top:"100%",marginTop:8,zIndex:400},children:u(c,{onPick:d,initial:r?new Date(r):void 0})}),g("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[u("button",{type:"button",className:"btn ghost",onClick:()=>m(D=>!D),children:E||"Set time"}),u("div",{style:{flex:1}})]}),v&&u("div",{style:{position:"absolute",left:0,top:"100%",marginTop:8,zIndex:400},children:u("div",{className:"panel day-popup",style:{padding:12},children:g("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[u("select",{value:T,onChange:D=>P(Number(D.target.value)),children:Array.from({length:24}).map((D,O)=>u("option",{value:O,children:String(O).padStart(2,"0")},O))}),":",u("select",{value:R,onChange:D=>y(Number(D.target.value)),children:Array.from({length:12}).map((D,O)=>u("option",{value:O*5,children:String(O*5).padStart(2,"0")},O))}),u("div",{style:{flex:1}}),u("button",{className:"btn",onClick:x,children:"Apply"})]})})}),g("div",{style:{display:"flex",gap:8},children:[u("button",{type:"submit",className:"btn",children:"Add Task"}),u("button",{type:"button",className:"btn ghost",onClick:()=>{n(""),i(""),o(!1)},children:"Clear"})]})]})},ET="adhd_gems",pt=()=>{const t=localStorage.getItem(ET);return t?parseInt(t,10):0},bt=t=>{localStorage.setItem(ET,String(t))},Xl=t=>{const n=pt()+t;return bt(n),n},cD="adhd_medals",uD=[{id:"first_task",name:"First Steps",icon:"\u{1F3AF}",description:"Complete your first task",earned:!1},{id:"task_master",name:"Task Master",icon:"\u2705",description:"Complete 50 tasks",earned:!1},{id:"focus_time",name:"Focus Legend",icon:"\u23F1\uFE0F",description:"Use focus timer for 5+ hours",earned:!1},{id:"streak_warrior",name:"Streak Warrior",icon:"\u{1F525}",description:"Maintain a 7-day streak",earned:!1},{id:"social_butterfly",name:"Social Butterfly",icon:"\u{1F465}",description:"Add 5 friends",earned:!1},{id:"early_bird",name:"Early Bird",icon:"\u{1F305}",description:"Complete a task before 8 AM",earned:!1},{id:"night_owl",name:"Night Owl",icon:"\u{1F319}",description:"Complete a task after 10 PM",earned:!1},{id:"premium_member",name:"Premium Member",icon:"\u{1F48E}",description:"Subscribe to Plus",earned:!1},{id:"quest_master",name:"Quest Master",icon:"\u{1F3C6}",description:"Complete 10 quests",earned:!1},{id:"money_bags",name:"Money Bags",icon:"\u{1F4B0}",description:"Earn 1000 gems",earned:!1}],Ku=()=>{const t=localStorage.getItem(cD);return t?JSON.parse(t):uD},kg="adhd_pet",Il="adhd_pets",Qd="adhd_current_pet_id",Xu=[0,100,250,500,1e3,2e3],a_=5,Yh=30,l_=50,Qu={default:{name:"Default",emoji:"\u{1F414}"},golden:{name:"Golden",emoji:"\u2728"},cosmic:{name:"Cosmic",emoji:"\u{1F30C}"},forest:{name:"Forest",emoji:"\u{1F33F}"},sunset:{name:"Sunset",emoji:"\u{1F305}"},ocean:{name:"Ocean",emoji:"\u{1F499}"},rose:{name:"Rose",emoji:"\u{1F339}"}},Rc={default:{name:"Default",description:"Classic pet"},fluffy:{name:"Fluffy",description:"Extra fluffy and soft"},shiny:{name:"Shiny",description:"Sparkly and bright"},mystical:{name:"Mystical",description:"Magical aura"}},c_=(t="My Pet")=>{const e={id:"pet_"+Date.now(),name:t,level:1,experience:0,hunger:30,happiness:80,health:100,timesFeeding:0,totalXpSpent:0,lastFedAt:Date.now(),createdAt:Date.now(),stage:"egg",color:"default",skin:"default",favoriteFood:"treats",mood:"happy"};return localStorage.setItem(kg,JSON.stringify(e)),e},Et=()=>{const t=yo();if(t){const r=Vt().find(i=>i.id===t);if(r)return r}const e=localStorage.getItem(kg);return e?JSON.parse(e):null},Ya=(t="gems")=>{const e=Et();if(!e)return null;const n=De(),r=pt();if(t==="gems"){if(r<a_)return console.warn("Not enough gems to feed pet"),e;Xl(-a_)}else if(t==="xp"){if(n<Yh)return console.warn("Not enough XP to feed pet"),e;gn(n-Yh),e.totalXpSpent+=Yh}for(e.hunger=Math.max(0,e.hunger-30),e.happiness=Math.min(100,e.happiness+10),e.health=Math.min(100,e.health+5),e.timesFeeding+=1,e.lastFedAt=Date.now(),e.experience+=l_,tr(l_);e.experience>=Xu[e.level]&&e.level<Xu.length;)e.level+=1;return e.stage=ST(e.level),e.mood=Ep(e),Ql(e),window.dispatchEvent(new CustomEvent("petUpdated",{detail:{pet:e}})),e},nr=()=>{const t=Et();if(!t)return null;const n=(Date.now()-t.lastFedAt)/1e3/60;if(n>1){const r=Math.min(10,Math.floor(n/10));t.hunger=Math.min(100,t.hunger+r),t.happiness=Math.max(0,t.happiness-1)}return t.hunger>80&&(t.health=Math.max(0,t.health-2)),t.health<=0&&(t.stage="egg",t.level=1,t.experience=0,t.health=50),Ql(t),t},ST=t=>t===1?"egg":t<=2?"baby":t<=3?"teen":t<=4?"adult":"legendary",tu=(t,e="default",n)=>{if(n)return n;if(e!=="default"&&Qu[e])return Qu[e].emoji;switch(t){case"egg":return"\u{1F95A}";case"baby":return"\u{1F423}";case"teen":return"\u{1F425}";case"adult":return"\u{1F414}";case"legendary":return"\u{1F985}";default:return"\u{1F43E}"}},Ep=t=>t.happiness>80&&t.hunger<30?"excited":t.happiness>60&&t.health>70?"happy":t.happiness>40&&t.hunger<70?"content":t.health<30?"sad":"neutral",dD=t=>{const e=Et();return e?(e.name=t.trim(),Ql(e),e):null},hD=t=>{const e=Et();return e?(e.color=t,Ql(e),e):null},fD=t=>{const e=Et();return e?(e.skin=t,Ql(e),e):null},pD=t=>t>=Xu.length?0:Xu[t],Ql=t=>{if(localStorage.setItem(kg,JSON.stringify(t)),localStorage.getItem(Qd)){const n=localStorage.getItem(Il),r=n?JSON.parse(n):[],i=r.findIndex(s=>s.id===t.id);i>=0&&(r[i]=t,localStorage.setItem(Il,JSON.stringify(r)))}},xg=[{petId:"dragon",name:"Dragon",emoji:"\u{1F409}",presetLevel:3,cost:500},{petId:"phoenix",name:"Phoenix",emoji:"\u{1F525}",presetLevel:4,cost:750},{petId:"unicorn",name:"Unicorn",emoji:"\u{1F984}",presetLevel:5,cost:1e3},{petId:"robot",name:"Robot",emoji:"\u{1F916}",presetLevel:2,cost:300},{petId:"butterfly",name:"Butterfly",emoji:"\u{1F98B}",presetLevel:2,cost:250},{petId:"lion",name:"Lion",emoji:"\u{1F981}",presetLevel:4,cost:800}],Vt=()=>{try{const t=localStorage.getItem(Il);return t?JSON.parse(t):[]}catch{return[]}},yo=()=>localStorage.getItem(Qd),Cl=t=>{localStorage.setItem(Qd,t);const e=Vt();console.log("[pet] Syncing current pet selection to Firestore:",t),Cg(e,t).catch(n=>console.warn("[pet] Failed to sync current pet:",n)),window.dispatchEvent(new CustomEvent("petSwitched",{detail:{petId:t}}))},mD=(t,e)=>{const n=xg.find(o=>o.petId===t);if(!n)return null;const r=De();if(r<n.cost)return console.warn("Not enough XP to buy pet"),null;gn(r-n.cost);const i={id:"pet_"+Date.now(),name:e||n.name,level:n.presetLevel,experience:0,hunger:30,happiness:80,health:100,timesFeeding:0,totalXpSpent:0,lastFedAt:Date.now(),createdAt:Date.now(),stage:ST(n.presetLevel),color:"default",skin:"default",favoriteFood:"treats",mood:"happy",emoji:n.emoji},s=Vt();return s.push(i),localStorage.setItem(Il,JSON.stringify(s)),Cl(i.id),console.log("[pet] Syncing new pet purchase to Firestore:",i.id),Cg(s,i.id).catch(o=>console.warn("[pet] Failed to sync pet purchase:",o)),i},Sp=t=>{const n=Vt().filter(i=>i.id!==t);localStorage.setItem(Il,JSON.stringify(n));let r=null;yo()===t&&(n.length>0?(r=n[0].id,Cl(n[0].id)):(localStorage.removeItem(Qd),r=null)),console.log("[pet] Syncing pet deletion to Firestore:",t),Cg(n,r).catch(i=>console.warn("[pet] Failed to sync pet deletion:",i))},gD=t=>Vt().some(n=>{var r;return n.name===((r=xg.find(i=>i.petId===t))==null?void 0:r.name)}),TT="adhd_skills",Fr={forgive_skip_day:{id:"forgive_skip_day",name:"Skip a Day",description:"Skip one day without losing your streak",icon:"\u23ED\uFE0F",cost:100,costType:"xp",tree:"forgiveness",level:1,effects:["Use once to skip a day without losing streak bonus"],unlocked:!1,purchased:!1},forgive_retry:{id:"forgive_retry",name:"Task Retry",description:"Get another attempt on a failed task",icon:"\u{1F504}",cost:50,costType:"xp",tree:"forgiveness",level:1,effects:["Retry a task you marked as incomplete"],unlocked:!1,purchased:!1},forgive_double_streak:{id:"forgive_double_streak",name:"Streak Multiplier",description:"2x your streak bonus rewards",icon:"\u26A1",cost:150,costType:"xp",tree:"forgiveness",level:2,effects:["Doubles XP gained from streak bonuses"],unlocked:!1,purchased:!1,prerequisites:["forgive_skip_day"]},forgive_extend:{id:"forgive_extend",name:"Emergency Extension",description:"Extend a task due date by 1 day",icon:"\u{1F4C5}",cost:75,costType:"xp",tree:"forgiveness",level:1,effects:["Use to extend a task deadline when you need more time"],unlocked:!1,purchased:!1},xp_boost_10:{id:"xp_boost_10",name:"XP Boost +10%",description:"Gain 10% more XP from all tasks",icon:"\u{1F4C8}",cost:80,costType:"xp",tree:"xp_mastery",level:1,effects:["+10% XP from completing tasks"],unlocked:!1,purchased:!1},xp_streak_bonus:{id:"xp_streak_bonus",name:"Streak Bonus",description:"+5% XP per day of streak",icon:"\u{1F525}",cost:100,costType:"xp",tree:"xp_mastery",level:1,effects:["Earn bonus XP based on current streak (5% per day)"],unlocked:!1,purchased:!1},xp_combo:{id:"xp_combo",name:"Task Combo",description:"Complete 3 tasks in a row for 25% bonus XP",icon:"\u{1F3AF}",cost:120,costType:"xp",tree:"xp_mastery",level:2,effects:["Complete 3 consecutive tasks to earn 25% XP bonus"],unlocked:!1,purchased:!1,prerequisites:["xp_boost_10"]},xp_social:{id:"xp_social",name:"Social XP",description:"Earn XP by helping friends",icon:"\u{1F465}",cost:90,costType:"xp",tree:"xp_mastery",level:1,effects:["Gain XP when friends complete their tasks"],unlocked:!1,purchased:!1},pet_xp_boost:{id:"pet_xp_boost",name:"Pet XP Boost",description:"Your pet gains 15% more XP",icon:"\u{1F423}",cost:85,costType:"xp",tree:"pet_power",level:1,effects:["+15% XP gains for your pet"],unlocked:!1,purchased:!1},pet_discount:{id:"pet_discount",name:"Efficient Feeding",description:"Pet feeding costs 2 gems instead of 5",icon:"\u{1F48E}",cost:110,costType:"xp",tree:"pet_power",level:1,effects:["Reduce pet feeding gem cost from 5 to 2"],unlocked:!1,purchased:!1},pet_talent:{id:"pet_talent",name:"Pet Talent",description:"Unlock special pet abilities",icon:"\u2728",cost:130,costType:"xp",tree:"pet_power",level:2,effects:["Pet can perform special actions for bonus rewards"],unlocked:!1,purchased:!1,prerequisites:["pet_xp_boost"]},pet_buddy:{id:"pet_buddy",name:"Buddy Bonus",description:"Get rewards when pet reaches new level",icon:"\u{1F381}",cost:95,costType:"xp",tree:"pet_power",level:1,effects:["Earn XP and gems when your pet levels up"],unlocked:!1,purchased:!1}},Mo=()=>{const t=localStorage.getItem(TT);if(t){const e=JSON.parse(t);return{unlockedSkills:new Set(e.unlockedSkills),purchasedSkills:new Set(e.purchasedSkills),skillPoints:e.skillPoints||0}}return{unlockedSkills:new Set,purchasedSkills:new Set,skillPoints:0}},Yd=()=>{const t=Mo();return Object.values(Fr).map(e=>({...e,unlocked:t.unlockedSkills.has(e.id),purchased:t.purchasedSkills.has(e.id)}))},yD=t=>Yd().filter(e=>e.tree===t),br=t=>{const e=Fr[t];if(!e||!e.prerequisites)return!0;const n=Mo();return e.prerequisites.every(r=>n.purchasedSkills.has(r))},vD=t=>{const e=Fr[t];if(!e)return!1;const n=Mo();if(n.purchasedSkills.has(t))return console.warn("Skill already purchased"),!1;if(!br(t))return console.warn("Prerequisites not met"),!1;if(e.costType==="xp"){const r=De();if(r<e.cost)return console.warn("Not enough XP"),!1;gn(r-e.cost)}else if(e.costType==="gems"){if(pt()<e.cost)return console.warn("Not enough gems"),!1;Xl(-e.cost)}return n.purchasedSkills.add(t),n.unlockedSkills.add(t),CT(n),!0},Jh=t=>Mo().purchasedSkills.has(t),Yu=()=>{const t=Mo();return Array.from(t.purchasedSkills)},IT=t=>{if(!Fr[t])return!1;const n=Mo();return n.purchasedSkills.add(t),n.unlockedSkills.add(t),CT(n),window.dispatchEvent(new CustomEvent("skillUnlocked",{detail:{skillId:t}})),!0},CT=t=>{localStorage.setItem(TT,JSON.stringify({unlockedSkills:Array.from(t.unlockedSkills),purchasedSkills:Array.from(t.purchasedSkills),skillPoints:t.skillPoints}))},Ag="adhd_titles",Ja=[{id:"task_master",name:"Task Master",description:"Complete 100 tasks",unlockedFrom:"achievement",source:"Complete 100 tasks"},{id:"focus_wizard",name:"Focus Wizard",description:"Complete 10 focus sessions",unlockedFrom:"achievement",source:"Complete 10 focus sessions"},{id:"level_legend",name:"Level Legend",description:"Reach Level 20",unlockedFrom:"achievement",source:"Reach Level 20"},{id:"streak_keeper",name:"Streak Keeper",description:"Maintain a 30-day streak",unlockedFrom:"achievement",source:"Maintain a 30-day streak"},{id:"pet_lover",name:"Pet Lover",description:"Reach maximum pet happiness",unlockedFrom:"achievement",source:"Reach maximum pet happiness"},{id:"skill_scholar",name:"Skill Scholar",description:"Unlock 10 skills",unlockedFrom:"achievement",source:"Unlock 10 skills"},{id:"early_bird",name:"Early Bird",description:"Complete 5 tasks before 9 AM",unlockedFrom:"achievement",source:"Complete 5 tasks before 9 AM"},{id:"night_owl",name:"Night Owl",description:"Complete 5 tasks after 9 PM",unlockedFrom:"achievement",source:"Complete 5 tasks after 9 PM"},{id:"calendar_creator",name:"Calendar Creator",description:"Create 50 events",unlockedFrom:"achievement",source:"Create 50 events"},{id:"explorer",name:"Explorer",description:"Visit all pages in the app",unlockedFrom:"achievement",source:"Visit all pages in the app"},{id:"founder",name:"Founder",description:"Support the app early",unlockedFrom:"store",source:"Purchase from store"},{id:"collector",name:"Collector",description:"Unlock 50 titles",unlockedFrom:"achievement",source:"Unlock 50 titles"},{id:"developer",name:"Developer",description:"Secret dev title",unlockedFrom:"special",source:"For Devs Only ;)"}],u_=()=>({unlockedIds:[],selectedTitleId:null}),Jd=()=>{try{const t=localStorage.getItem(Ag);return t?JSON.parse(t):u_()}catch{return u_()}},bT=t=>{try{const e=Jd();e.unlockedIds.includes(t)||(e.unlockedIds.push(t),localStorage.setItem(Ag,JSON.stringify(e)),console.log("[titles] Syncing unlocked title to Firestore:",t),lT(e.unlockedIds,e.selectedTitleId).catch(n=>console.warn("[titles] Failed to sync:",n)),window.dispatchEvent(new CustomEvent("titleUnlocked",{detail:{titleId:t}})))}catch(e){console.error("Error unlocking title:",e)}},nu=t=>{try{const e=Jd();e.selectedTitleId=t,localStorage.setItem(Ag,JSON.stringify(e));const n=e.unlockedIds;console.log("[titles] Syncing selected title to Firestore:",t),lT(n,t).catch(r=>console.warn("[titles] Failed to sync:",r)),window.dispatchEvent(new CustomEvent("selectedTitleChanged",{detail:{titleId:t}}))}catch(e){console.error("Error setting selected title:",e)}},Ds=()=>{const t=Jd();return Ja.filter(e=>t.unlockedIds.includes(e.id))},Di=()=>{const t=Jd();return t.selectedTitleId&&Ja.find(e=>e.id===t.selectedTitleId)||null},_D=async(t,e,n,r)=>{const i=Ul(sn,"users"),s=po(i,ci("username","==",n));if(!(await Wd(s)).empty)throw new Error("Username already taken");const c=(await N2(mo,t,e)).user,d={uid:c.uid,email:c.email||t,username:n,hashtag:r,avatar:"\u{1F464}",createdAt:Date.now()};return await IS(ls(sn,"users",c.uid),d),d},wD=async(t,e)=>{const r=(await D2(mo,t,e)).user,i=await zl(ls(sn,"users",r.uid));if(!i.exists())throw new Error("User profile not found");return i.data()},ED=async()=>{await F2(mo)},SD=t=>M2(mo,t),TD=async t=>{const e=await zl(ls(sn,"users",t));return e.exists()?e.data():null},Nc="adhd_purchases",xi="adhd_daily_creations",Ai="adhd_profile",Oi="adhd_streak",bs="adhd_users",d_="adhd_current_user",Dc="adhd_bronze_crate_last_opened",Qt="adhd_quests_progress",h_=["\u{1F464}","\u{1F60A}","\u{1F9E0}","\u{1F3AF}","\u{1F31F}","\u2728","\u{1F680}","\u{1F4AA}","\u{1F3A8}","\u{1F4DA}","\u{1F3AD}","\u{1F9D8}","\u{1F438}","\u{1F9B8}","\u{1F47B}","\u{1F916}"],ID=()=>({username:"Guest",hashtag:"0000",tasksCompleted:0,eventsCreated:0,avatar:"\u{1F464}",customAvatarUrl:void 0}),Pi=()=>{const t=localStorage.getItem(Oi);return t?JSON.parse(t):{current:0,lastDate:null,longest:0}},CD=()=>{const{tasks:t,events:e,addTask:n,updateTask:r,removeTask:i}=Lo(),s=Ow(),[o,l]=L.exports.useState(!1),[c,d]=L.exports.useState(!1),[f,v]=L.exports.useState(null),[m,T]=L.exports.useState(""),[P,R]=L.exports.useState(9),[y,E]=L.exports.useState(0),[x,D]=L.exports.useState("AM"),[O,z]=L.exports.useState("month"),[V,k]=L.exports.useState(0),[_,S]=L.exports.useState(!1),[I,b]=L.exports.useState(""),[N,w]=L.exports.useState(!1),[Q,J]=L.exports.useState(""),[se,q]=L.exports.useState(""),[te,$]=L.exports.useState(!1),[H,M]=L.exports.useState(()=>{const A=localStorage.getItem(Ai);return A?JSON.parse(A):ID()}),[B,Y]=L.exports.useState(!1),[ne,ue]=L.exports.useState(H.username);L.exports.useState(!1);const[ge,Ee]=L.exports.useState(H.hashtag||""),[Ae,ot]=L.exports.useState(!1),[Fo,us]=L.exports.useState(""),[ur,dr]=L.exports.useState(()=>Pi()),[be,yi]=L.exports.useState(()=>{const A=localStorage.getItem(Nc);return A?new Set(JSON.parse(A)):new Set}),[Zd,vi]=L.exports.useState(!1),[Bn,ds]=L.exports.useState("login"),[qe,Qe]=L.exports.useState(""),[hr,Vo]=L.exports.useState(""),[Uo,zn]=L.exports.useState(""),[jn,Bo]=L.exports.useState(""),[hs,fs]=L.exports.useState(""),[ps,Yl]=L.exports.useState(""),[zo,jo]=L.exports.useState(""),[fr,an]=L.exports.useState(""),[pr,Pt]=L.exports.useState(pt()),[ms,gs]=L.exports.useState(De()),[$o,wn]=L.exports.useState(""),[mr,at]=L.exports.useState(()=>Ku()),[Ve,lt]=L.exports.useState(Et),[ys,eh]=L.exports.useState(pt()),[Wo,ln]=L.exports.useState(()=>Ds()),[ct,gr]=L.exports.useState(()=>Di()),[_i,yr]=L.exports.useState(()=>Vt()),[vs,Ho]=L.exports.useState(()=>yo()),[vr,Jl]=L.exports.useState(gT()),[cn,qo]=L.exports.useState(_T()),[Go,_r]=L.exports.useState(Cn()),Gt=be.has(4)?6:3,Zl=t.slice(0,Gt),Ko=()=>new Date().toDateString(),Kt=()=>{const A=localStorage.getItem(xi),G=A?JSON.parse(A):{},oe=Ko();return G[oe]||0},ec=()=>{const A=localStorage.getItem(xi),G=A?JSON.parse(A):{},oe=Ko();G[oe]=(G[oe]||0)+1;const pe=new Date;pe.setDate(pe.getDate()-30),Object.keys(G).forEach(K=>{new Date(K)<pe&&delete G[K]}),localStorage.setItem(xi,JSON.stringify(G))},_s=(A,G)=>{if(console.log("[Dashboard.handleAdd] Called with title:",A,"due:",G),t.length>=Gt){alert(`Task limit reached (${Gt}). Unlock more in the Store!`);return}const oe=be.has(4)?6:3;if(Kt()>=oe){alert(`Daily task creation limit reached (${oe}). Try again tomorrow or unlock more in the Store!`);return}const K={id:Date.now(),title:A,description:"",dueDate:G||"",completed:!1};console.log("[Dashboard.handleAdd] Adding task:",K),n(K),ec(),l(!1)},Xo=()=>{const A=Pi(),G=new Date().toDateString(),oe=A.lastDate;if(oe===G)return;const pe=new Date;pe.setDate(pe.getDate()-1);const K=pe.toDateString();oe===K?A.current+=1:A.current=1,A.longest=Math.max(A.longest,A.current),A.lastDate=G,localStorage.setItem(Oi,JSON.stringify(A))};L.exports.useEffect(()=>{const A=SD(async G=>{var oe;if(G){vi(!0);try{const pe=await TD(G.uid);pe&&(console.log("[Auth] Loaded profile from Firestore:",pe),M(pe),localStorage.setItem(Ai,JSON.stringify(pe)));const K=await QN();if(console.log("[Auth] gameProgress object:",K),K){if(console.log("[Auth] Loaded game progress from Firestore:",K),console.log("[Auth] gameProgress.xp =",K.xp),K.xp!==void 0&&K.xp!==null?(console.log("[Auth] \u2705 Restoring XP:",K.xp),gn(K.xp,!1)):console.log("[Auth] \u26A0\uFE0F No XP to restore (xp is",K.xp,")"),K.gems!==void 0&&(console.log("[Auth] Restoring gems:",K.gems),bt(K.gems),Pt(K.gems)),K.purchases&&yi(new Set(K.purchases)),K.pets&&(yr(K.pets),K.currentPetId&&Cl(K.currentPetId)),K.unlockedSkills){const En="adhd_unlocked_skills";localStorage.setItem(En,JSON.stringify(K.unlockedSkills))}if(console.log("[Auth] \u23ED\uFE0F Restoring titles..."),console.log("[Auth] gameProgress:",K),console.log("[Auth] gameProgress.unlockedTitles:",K==null?void 0:K.unlockedTitles),console.log("[Auth] gameProgress.selectedTitle:",K==null?void 0:K.selectedTitle),((oe=K==null?void 0:K.unlockedTitles)==null?void 0:oe.length)||(K==null?void 0:K.selectedTitle)){const En="adhd_titles";if(K.unlockedTitles&&K.unlockedTitles.length>0){console.log("[Auth] \u2705 Restoring unlocked titles:",K.unlockedTitles.length);const Ss={unlockedIds:K.unlockedTitles,selectedTitleId:K.selectedTitle||null};localStorage.setItem(En,JSON.stringify(Ss))}console.log("[Auth] \u{1F3AF} Firing titles:restored event"),window.dispatchEvent(new CustomEvent("titles:restored"))}else console.log("[Auth] \u26A0\uFE0F No titles to restore (unlockedTitles or selectedTitle missing)");console.log("[Auth] \u23ED\uFE0F Restoring pets..."),console.log("[Auth] gameProgress.pets:",K==null?void 0:K.pets),console.log("[Auth] gameProgress.currentPetId:",K==null?void 0:K.currentPetId),(K==null?void 0:K.pets)&&Array.isArray(K.pets)&&K.pets.length>0?(console.log("[Auth] \u2705 Restoring pets:",K.pets.length),localStorage.setItem("adhd_pets",JSON.stringify(K.pets)),K.currentPetId&&(console.log("[Auth] \u2705 Restoring current pet:",K.currentPetId),localStorage.setItem("adhd_current_pet_id",K.currentPetId)),console.log("[Auth] \u{1F3AF} Firing pets:restored event"),window.dispatchEvent(new CustomEvent("pets:restored"))):console.log("[Auth] \u26A0\uFE0F No pets to restore"),K.tasks&&Array.isArray(K.tasks)?(console.log("[Auth] Restoring tasks from Firestore:",K.tasks.length,"tasks",K.tasks),localStorage.setItem("adhd_tasks",JSON.stringify(K.tasks)),window.dispatchEvent(new CustomEvent("tasks:restored"))):console.log("[Auth] \u26A0\uFE0F No tasks to restore (tasks is",K.tasks,")")}}catch(pe){console.error("[Auth] Error loading profile/progress from Firestore:",pe)}}else vi(!1),M({username:"Guest",hashtag:"0000",avatar:"\u{1F464}",customAvatarUrl:void 0,tasksCompleted:0,eventsCreated:0}),localStorage.removeItem(Ai),localStorage.removeItem(Nc),localStorage.removeItem(xi),localStorage.removeItem(Oi),localStorage.removeItem(bs),localStorage.removeItem(d_),localStorage.removeItem(Dc),localStorage.removeItem(Qt),localStorage.removeItem("adhd_tasks"),localStorage.removeItem("adhd_titles"),localStorage.removeItem("adhd_pets"),localStorage.removeItem("adhd_current_pet_id"),window.dispatchEvent(new CustomEvent("titles:cleared")),window.dispatchEvent(new CustomEvent("tasks:cleared")),window.dispatchEvent(new CustomEvent("pets:cleared")),Qa(!1),bt(0),lt(null),yr([]),yi(new Set),dr(()=>Pi()),Pt(0)});return()=>A()},[]),L.exports.useEffect(()=>{(()=>{H.tasksCompleted>0&&Pi().lastDate!==new Date().toDateString()&&Xo()})()},[H.tasksCompleted]),L.exports.useEffect(()=>{te&&(at(Ku()),ln(Ds()),gr(Di()))},[te]),L.exports.useEffect(()=>{const A=()=>{lt(Et())};return window.addEventListener("petUpdated",A),()=>window.removeEventListener("petUpdated",A)},[]),L.exports.useEffect(()=>{const A=()=>{gr(Di())},G=()=>{console.log("[Dashboard] Titles restored, updating UI"),ln(Ds()),gr(Di())},oe=()=>{console.log("[Dashboard] Titles cleared, clearing UI"),ln([]),gr(null)};return window.addEventListener("selectedTitleChanged",A),window.addEventListener("titles:restored",G),window.addEventListener("titles:cleared",oe),()=>{window.removeEventListener("selectedTitleChanged",A),window.removeEventListener("titles:restored",G),window.removeEventListener("titles:cleared",oe)}},[]),L.exports.useEffect(()=>{const A=()=>{Ho(yo()),lt(Et),yr(Vt())};return window.addEventListener("petSwitched",A),()=>window.removeEventListener("petSwitched",A)},[]),L.exports.useEffect(()=>{const A=()=>{w(!0),k(0)};return window.addEventListener("devMenuKeyCombo",A),()=>window.removeEventListener("devMenuKeyCombo",A)},[]);const Qo=()=>{k(A=>A+1),V+1===7&&(w(!0),k(0)),setTimeout(()=>k(0),3e3)},wr=()=>{Q==="adhd123"?(S(!0),w(!1),J(""),q("")):(q("Incorrect password"),J(""))},$n=A=>{tr(A),b("")},Yo=()=>{const A=localStorage.getItem(xi),G=A?JSON.parse(A):{},oe=Ko();delete G[oe],localStorage.setItem(xi,JSON.stringify(G))},wi=A=>{const G=new Set(be);G.has(A)?G.delete(A):G.add(A),yi(G),localStorage.setItem(Nc,JSON.stringify(Array.from(G)))},tc=()=>{const A=Pi();A.current+=1,A.longest=Math.max(A.longest,A.current),localStorage.setItem(Oi,JSON.stringify(A)),dr(A)},nc=()=>{const A=Pi();A.current>0&&(A.current-=1),localStorage.setItem(Oi,JSON.stringify(A)),dr(A)},rc=()=>{const A={current:0,lastDate:null,longest:0};localStorage.setItem(Oi,JSON.stringify(A)),dr(A)},Jo=()=>{const A=localStorage.getItem(bs),G=A?JSON.parse(A):[],oe={id:"testbot",username:"TestBot",hashtag:"9999",avatar:"\u{1F916}"},pe=G.filter(K=>K.id!=="testbot");pe.push(oe),localStorage.setItem(bs,JSON.stringify(pe)),alert("Test Friend (TestBot#9999) added to the user registry. You can now add them as a friend!")},Zo=()=>{$(!0)},Wn=async A=>{if(console.log("[saveProfile] Saving profile with:",A),M(A),localStorage.setItem(Ai,JSON.stringify(A)),mo.currentUser)try{console.log("[saveProfile] Syncing to Firestore..."),await RR(ls(sn,"users",mo.currentUser.uid),{username:A.username,hashtag:A.hashtag||"1000",avatar:A.avatar,customAvatarUrl:A.customAvatarUrl||null,updatedAt:new Date().toISOString()}),console.log("[saveProfile] Firestore sync successful"),M(A)}catch(K){console.error("Error updating profile in Firestore:",K);const En=localStorage.getItem(Ai);En&&M(JSON.parse(En))}window.dispatchEvent(new Event("profileUpdated"));const G=localStorage.getItem(bs),pe=(G?JSON.parse(G):[]).filter(K=>K.id!==A.username.toLowerCase().replace(/\s+/g,"_"));pe.push({id:A.username.toLowerCase().replace(/\s+/g,"_"),username:A.username,hashtag:A.hashtag||"1000",avatar:A.avatar}),localStorage.setItem(bs,JSON.stringify(pe))},ws=async()=>{if(zn(""),!qe.trim()||!hr.trim()){zn("Email and password are required");return}try{await wD(qe,hr),Qe(""),Vo("")}catch(A){zn(A.message||"Login failed. Check your email and password.")}},ic=async()=>{try{M({username:"Guest",hashtag:"0000",avatar:"\u{1F464}",customAvatarUrl:void 0,tasksCompleted:0,eventsCreated:0}),vi(!1),$(!1),zn(""),Qe(""),Vo(""),localStorage.removeItem(Ai),localStorage.removeItem(Nc),localStorage.removeItem(xi),localStorage.removeItem(Oi),localStorage.removeItem(bs),localStorage.removeItem(d_),localStorage.removeItem(Dc),localStorage.removeItem(Qt),localStorage.removeItem("adhd_tasks"),localStorage.removeItem("adhd_titles"),localStorage.removeItem("adhd_pets"),localStorage.removeItem("adhd_current_pet_id"),window.dispatchEvent(new CustomEvent("tasks:cleared")),window.dispatchEvent(new CustomEvent("titles:cleared")),window.dispatchEvent(new CustomEvent("pets:cleared")),Qa(!1),bt(0),lt(null),yr([]),yi(new Set),dr(()=>Pi()),Pt(0),await ED()}catch{zn("Logout failed")}},Ei=async()=>{if(an(""),!jn.trim()||!hs.trim()){an("Email and password are required");return}if(!ps.trim()){an("Username is required");return}const A=zo.trim()||String(Math.floor(Math.random()*9e3)+1e3);if(!/^\d{1,6}$/.test(A)){an("Hashtag must be 1-6 digits (e.g., 1234)");return}try{await _D(jn,hs,ps,A);const G={username:ps.trim(),hashtag:A,tasksCompleted:0,eventsCreated:0,avatar:h_[0],customAvatarUrl:void 0};M(G),localStorage.setItem(Ai,JSON.stringify(G)),window.dispatchEvent(new Event("profileUpdated")),Bo(""),fs(""),Yl(""),jo("")}catch(G){an(G.message||"Sign up failed. Try again.")}},un=async()=>{ne.trim()&&await Wn({...H,username:ne.trim()})},Xt=async()=>{const A={...H,username:ne.trim()||H.username,hashtag:ge.trim()||H.hashtag};await Wn(A),Y(!1)},Si=async A=>{await Wn({...H,avatar:A,customAvatarUrl:void 0}),ot(!1)},Ti=A=>{var pe;us("");const G=(pe=A.target.files)==null?void 0:pe[0];if(!G)return;if(!G.type.startsWith("image/")){us("Please upload an image file");return}if(G.size>500*1024){us("Image must be smaller than 500KB");return}const oe=new FileReader;oe.onload=K=>{var Ss;const En=(Ss=K.target)==null?void 0:Ss.result;Wn({...H,customAvatarUrl:En}),ot(!1)},oe.onerror=()=>{us("Failed to read file")},oe.readAsDataURL(G)},ea=()=>t.filter(G=>!G.completed).sort((G,oe)=>{const pe=new Date(G.dueDate).getTime(),K=new Date(oe.dueDate).getTime();return pe-K}).slice(0,3),ke=[{title:"Brush teeth",icon:"\u{1FAA5}",xp:10},{title:"Pay bills",icon:"\u{1F4B0}",xp:50},{title:"Take out trash",icon:"\u{1F5D1}\uFE0F",xp:15},{title:"Clean house",icon:"\u{1F3E0}",xp:40},{title:"Take medication",icon:"\u{1F48A}",xp:10},{title:"Shower",icon:"\u{1F6BF}",xp:15},{title:"Call friend",icon:"\u{1F4DE}",xp:25},{title:"Take a break",icon:"\u{1F3AE}",xp:5},{title:"Eat something",icon:"\u{1F34E}",xp:10},{title:"Drink water",icon:"\u{1F4A7}",xp:5},{title:"Tidy desk",icon:"\u{1F9F9}",xp:20},{title:"Check email",icon:"\u{1F4E7}",xp:15}],Es=(A,G=20)=>{v({title:A,xp:G}),T(new Date().toISOString().split("T")[0]),R(9),E(0)},Ii=()=>{if(!f)return;if(t.length>=Gt){alert(`Task limit reached (${Gt}). Unlock more in the Store!`);return}const A=be.has(4)?6:3;if(Kt()>=A){alert(`Daily task creation limit reached (${A}). Try again tomorrow or unlock more in the Store!`);return}let oe=P;x==="PM"&&P!==12?oe=P+12:x==="AM"&&P===12&&(oe=0);const pe=new Date(`${m}T${String(oe).padStart(2,"0")}:${String(y).padStart(2,"0")}:00`).toISOString(),K={id:Date.now(),title:f.title,description:"",dueDate:pe,completed:!1,templateXp:f.xp};n(K),ec(),v(null),T(""),D("AM"),d(!1)};return ea(),g("div",{className:"container",children:[g("div",{className:"header",style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[g("div",{children:[u("h1",{onClick:Qo,style:{cursor:"pointer",userSelect:"none"},children:"Dashboard"}),u("div",{className:"subtle",children:"Plan your day \u2014 quick add tasks or jump to views"})]}),g("div",{style:{display:"flex",alignItems:"center",gap:0,justifyContent:"space-between"},children:[g("div",{style:{display:"flex",flexDirection:"column",gap:4},children:[g("div",{children:[u("div",{style:{fontWeight:600,fontSize:"1.1rem",marginLeft:100},children:H.username}),ct&&u("div",{style:{fontSize:"0.8rem",color:"var(--accent)",fontWeight:500,marginLeft:75},children:ct.name})]}),g("div",{style:{fontSize:"0.9rem",display:"flex",flexDirection:"column",gap:1},children:[g("div",{style:{fontWeight:500,marginLeft:75},children:["Level ",Math.floor(De()/100)+1]}),g("div",{className:"subtle",style:{fontSize:"0.8rem",marginLeft:100},children:[De()," XP"]})]})]}),u("div",{style:{width:48,height:48,borderRadius:"50%",backgroundColor:"var(--accent)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:24,fontWeight:"bold",color:"var(--bg)",cursor:"pointer",border:be.has(3)?"3px solid var(--accent-2)":"none",backgroundImage:H.customAvatarUrl?`url(${H.customAvatarUrl})`:"none",backgroundSize:"cover",backgroundPosition:"center",overflow:"hidden",flexShrink:0,marginLeft:-4},onClick:Zo,children:!H.customAvatarUrl&&H.avatar})]})]}),g("div",{className:"app-grid",children:[g("aside",{className:"panel",children:[g("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12,gap:24,flexWrap:"nowrap"},children:[g("div",{style:{display:"flex",alignItems:"center",gap:8,whiteSpace:"nowrap",minWidth:0},children:[u("h3",{style:{margin:0},children:"Your Tasks"}),g("span",{className:"subtle",style:{fontSize:"0.875rem"},children:[Kt(),"/",be.has(4)?6:3]})]}),g("div",{style:{display:"flex",gap:8},children:[u(Me,{onClick:()=>d(!0),title:"Quick add from templates",children:"Quick Add"}),u(Me,{onClick:()=>l(A=>!A),disabled:Kt()>=(be.has(4)?6:3)&&!o,children:o?"Close":"+ Add"})]})]}),g("div",{className:"tasks-list",style:{maxHeight:"400px",overflowY:"auto"},children:[o&&u(lD,{onAdd:_s}),t.length===0&&u("div",{className:"subtle",children:"No tasks yet \u2014 hit + Add to create one"}),Zl.map(A=>{const G=A.createdAt?Date.now()-A.createdAt:1/0,oe=G>=5*60*1e3,pe=A.createdAt?Math.max(0,5*60*1e3-G):0;return u(bg,{task:A,timeUntilXp:pe,xpAmount:A.templateXp||20,onUpdate:K=>r(K),onComplete:()=>{if(i(A.id),oe){const K=A.templateXp||20;tr(K),Wn({...H,tasksCompleted:H.tasksCompleted+1}),Xo()}},onRemove:()=>i(A.id)},A.id)}),t.length>Gt&&g("div",{className:"subtle",style:{marginTop:8,fontSize:"0.875rem"},children:["+",t.length-Gt," more ",t.length-Gt===1?"task":"tasks"," (unlock in Store)"]})]})]}),g("main",{className:"panel",children:[g("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:12},children:[g("div",{children:[u("h3",{style:{margin:0},children:"Upcoming Events"}),u("div",{className:"subtle",children:new Date().toLocaleDateString()})]}),g("div",{style:{display:"flex",gap:8},children:[u(Me,{variant:O==="day"?void 0:"ghost",onClick:()=>z("day"),children:"Day"}),u(Me,{variant:O==="week"?void 0:"ghost",onClick:()=>z("week"),children:"Week"}),u(Me,{variant:O==="month"?void 0:"ghost",onClick:()=>z("month"),children:"Month"})]})]}),u(wT,{view:O})]}),Ve&&g("aside",{className:"panel",style:{display:"flex",flexDirection:"column",alignItems:"center",gap:12,padding:16},children:[u("h3",{style:{margin:0,marginBottom:8},children:"Your Pet"}),u("div",{style:{fontSize:"3rem"},children:tu(Ve.stage,Ve.color,Ve.emoji)}),g("div",{style:{textAlign:"center",fontSize:"0.85rem"},children:[u("div",{style:{fontWeight:"bold",marginBottom:2},children:Ve.name}),g("div",{style:{color:"var(--muted)",fontSize:"0.8rem",marginBottom:8},children:["Level ",Ve.level," ",Ve.stage.charAt(0).toUpperCase()+Ve.stage.slice(1)]})]}),g("div",{style:{width:"100%",display:"flex",flexDirection:"column",gap:6},children:[u("div",{style:{fontSize:"0.7rem",color:"var(--muted)"},children:"Hunger"}),u("div",{style:{height:6,background:"var(--border)",borderRadius:3},children:u("div",{style:{height:"100%",width:`${Math.max(0,100-Ve.hunger)}%`,background:Ve.hunger>70?"#ef4444":"#22c55e",borderRadius:3}})})]}),g("div",{style:{width:"100%",marginBottom:6},children:[u("div",{style:{fontSize:"0.7rem",color:"var(--muted)",marginBottom:12,textAlign:"center"},children:"Switch Pet"}),u("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(60px, 1fr))",gap:4},children:_i.map(A=>u("button",{onClick:()=>Cl(A.id),style:{padding:"6px 4px",borderRadius:4,border:vs===A.id?"2px solid var(--accent)":"1px solid var(--border)",background:vs===A.id?"rgba(167, 139, 250, 0.2)":"transparent",cursor:"pointer",fontSize:"0.75rem",color:"var(--text)",fontWeight:vs===A.id?"bold":"normal",transition:"all 0.2s",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"flex",alignItems:"center",justifyContent:"center"},title:A.name,children:A.name},A.id))})]}),g("div",{style:{width:"100%",display:"grid",gridTemplateColumns:"1fr 1fr",gap:6},children:[u("button",{className:"btn primary",onClick:()=>{const A=Ya("gems");A&&(lt(A),eh(pt()))},disabled:pr<5,style:{fontSize:"0.7rem",padding:"6px",opacity:pr<5?.5:1,cursor:pr<5?"not-allowed":"pointer",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center"},children:"Feed with gems (5)"}),u("button",{className:"btn primary",onClick:()=>{const A=Ya("xp");A&&(lt(A),gs(De()))},disabled:ms<30,style:{fontSize:"0.7rem",padding:"6px",opacity:ms<30?.5:1,cursor:ms<30?"not-allowed":"pointer",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center"},children:"Feed with XP (30)"})]}),u("button",{className:"btn primary",onClick:()=>s.push("/pet"),style:{width:"100%",fontSize:"0.85rem",padding:"8px",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center"},children:"Care for Pet \u2192"})]})]}),N&&u("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:99998},children:g("div",{className:"panel",style:{maxWidth:400,padding:24,backgroundColor:"var(--panel)",boxShadow:"0 8px 32px rgba(0,0,0,0.3)"},children:[u("h2",{style:{margin:"0 0 16px 0",textAlign:"center"},children:"Developer Menu"}),u("p",{style:{textAlign:"center",color:"var(--muted)",marginBottom:16},children:"Enter password to continue"}),u("input",{type:"password",className:"input",placeholder:"Password",value:Q,onChange:A=>J(A.target.value),onKeyDown:A=>A.key==="Enter"&&wr(),autoFocus:!0,style:{marginBottom:12}}),se&&u("div",{style:{color:"#ef4444",marginBottom:12,fontSize:"0.9rem",textAlign:"center"},children:se}),g("div",{style:{display:"flex",gap:8},children:[u("button",{className:"btn primary",onClick:wr,style:{flex:1},children:"Unlock"}),u("button",{className:"btn ghost",onClick:()=>{w(!1),J(""),q("")},style:{flex:1},children:"Cancel"})]})]})}),_&&u("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:99999},children:g("div",{className:"panel",style:{maxWidth:500,maxHeight:"80vh",padding:20,backgroundColor:"var(--panel)",boxShadow:"0 8px 32px rgba(0,0,0,0.3)",userSelect:"none",overflow:"auto"},children:[u("h2",{style:{margin:"0 0 12px 0",textAlign:"center"},children:"Development Menu"}),g("div",{style:{marginBottom:16,fontSize:"0.9rem",color:"var(--muted)"},children:[g("div",{children:["Current XP: ",De()," | Daily Tasks Created: ",Kt(),"/",be.has(4)?6:3]}),g("div",{children:["Streak: ",ur.current," current | ",ur.longest," longest"]})]}),g("div",{style:{display:"flex",flexDirection:"column",gap:12},children:[g("div",{style:{borderBottom:"1px solid var(--border)",paddingBottom:12},children:[u("h3",{style:{margin:"0 0 8px 0"},children:"XP Controls"}),g("div",{style:{display:"flex",gap:8},children:[u("input",{type:"number",className:"input",placeholder:"XP amount",value:I,onChange:A=>b(A.target.value),style:{flex:1}}),u("button",{className:"btn",onClick:()=>$n(parseInt(I)||0),children:"Grant"})]}),u("button",{className:"btn ghost",onClick:()=>Qa(),style:{marginTop:8,width:"100%"},children:"Reset XP"})]}),g("div",{style:{borderBottom:"1px solid var(--border)",paddingBottom:12},children:[u("h3",{style:{margin:"0 0 8px 0"},children:"Task Limit Controls"}),u("button",{className:"btn ghost",onClick:Yo,style:{width:"100%"},children:"Reset Daily Limit"})]}),g("div",{style:{borderBottom:"1px solid var(--border)",paddingBottom:12},children:[u("h3",{style:{margin:"0 0 8px 0"},children:"Streak Controls"}),g("div",{className:"subtle",style:{fontSize:"0.85rem",marginBottom:8},children:["Current: ",ur.current," days"]}),g("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:8},children:[u("button",{className:"btn ghost",onClick:tc,style:{fontSize:"0.85rem"},children:"+1 Streak"}),u("button",{className:"btn ghost",onClick:nc,style:{fontSize:"0.85rem"},children:"-1 Streak"}),u("button",{className:"btn ghost",onClick:rc,style:{fontSize:"0.85rem"},children:"Reset"})]})]}),g("div",{style:{borderBottom:"1px solid var(--border)",paddingBottom:12},children:[u("h3",{style:{margin:"0 0 8px 0"},children:"Purchases"}),g("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[g("button",{className:"btn ghost",onClick:()=>wi(1),style:{opacity:be.has(1)?1:.5},children:[be.has(1)?"\u2713":"\u2717"," Sunset Theme"]}),g("button",{className:"btn ghost",onClick:()=>wi(2),style:{opacity:be.has(2)?1:.5},children:[be.has(2)?"\u2713":"\u2717"," Ocean Theme"]}),g("button",{className:"btn ghost",onClick:()=>wi(3),style:{opacity:be.has(3)?1:.5},children:[be.has(3)?"\u2713":"\u2717"," Avatar Border"]}),g("button",{className:"btn ghost",onClick:()=>wi(4),style:{opacity:be.has(4)?1:.5},children:[be.has(4)?"\u2713":"\u2717"," Extra Slots"]}),g("button",{className:"btn ghost",onClick:()=>wi(5),style:{opacity:be.has(5)?1:.5},children:[be.has(5)?"\u2713":"\u2717"," Custom Avatar"]})]})]}),g("div",{style:{borderBottom:"1px solid var(--border)",paddingBottom:12},children:[u("h3",{style:{margin:"0 0 8px 0"},children:"Social Testing"}),u("button",{className:"btn ghost",onClick:Jo,style:{width:"100%"},children:"Add Test Friend (TestBot#9999)"})]}),g("div",{style:{borderBottom:"1px solid var(--border)",paddingBottom:12},children:[u("h3",{style:{margin:"0 0 8px 0"},children:"Gem Controls"}),g("div",{style:{marginBottom:8},children:[g("div",{style:{fontSize:"0.9rem",marginBottom:8},children:["Current Gems: ",u("strong",{children:pr})]}),g("div",{style:{display:"flex",gap:8},children:[u("input",{type:"number",className:"input",placeholder:"Gem amount",value:$o,onChange:A=>wn(A.target.value),style:{flex:1}}),u("button",{className:"btn",onClick:()=>{const A=parseInt($o);!isNaN(A)&&A>0&&(Xl(A),Pt(pt()),wn(""),window.dispatchEvent(new Event("currencyUpdated")))},children:"Add"})]})]}),g("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[u("button",{className:"btn ghost",onClick:()=>{bt(0),Pt(0),wn(""),window.dispatchEvent(new Event("currencyUpdated"))},children:"Set to 0"}),u("button",{className:"btn ghost",onClick:()=>{bt(1e3),Pt(1e3),wn(""),window.dispatchEvent(new Event("currencyUpdated"))},children:"Set to 1000"})]})]}),g("div",{style:{borderBottom:"1px solid var(--border)",paddingBottom:12},children:[u("h3",{style:{margin:"0 0 8px 0"},children:"Skill Tree Controls"}),u("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,maxHeight:200,overflowY:"auto"},children:Yd().map(A=>g("button",{className:"btn ghost",onClick:()=>IT(A.id),style:{fontSize:"0.75rem",opacity:Yu().includes(A.id)?1:.5},children:[Yu().includes(A.id)?"\u2713":"\u2717"," ",A.name]},A.id))})]}),g("div",{style:{borderBottom:"1px solid var(--border)",paddingBottom:12,marginBottom:12},children:[u("h3",{style:{margin:"0 0 8px 0"},children:"Pet Controls"}),Ve&&g("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,marginBottom:12},children:[u("button",{className:"btn ghost",onClick:()=>{if(Ve){Ve.hunger=0;const A=Ya("gems");A&&(lt(A),window.dispatchEvent(new CustomEvent("petUpdated",{detail:{pet:A}})))}},style:{fontSize:"0.8rem"},children:"Feed Pet"}),u("button",{className:"btn ghost",onClick:()=>{if(Ve){Ve.happiness=100;const A=nr();A&&(lt(A),window.dispatchEvent(new CustomEvent("petUpdated",{detail:{pet:A}})))}},style:{fontSize:"0.8rem"},children:"Max Happiness"}),u("button",{className:"btn ghost",onClick:()=>{if(Ve){Ve.health=100;const A=nr();A&&(lt(A),window.dispatchEvent(new CustomEvent("petUpdated",{detail:{pet:A}})))}},style:{fontSize:"0.8rem"},children:"Max Health"}),u("button",{className:"btn ghost",onClick:()=>{if(Ve){Ve.level=Math.min(Ve.level+1,10);const A=nr();A&&(lt(A),window.dispatchEvent(new CustomEvent("petUpdated",{detail:{pet:A}})))}},style:{fontSize:"0.8rem"},children:"+1 Level"})]}),g("div",{style:{marginBottom:12},children:[u("h4",{style:{margin:"0 0 8px 0",fontSize:"0.8rem",color:"var(--muted)"},children:"Delete Pet"}),u("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(80px, 1fr))",gap:6},children:_i.map(A=>g("button",{className:"btn ghost",onClick:()=>{window.confirm(`Delete ${A.name}?`)&&(Sp(A.id),yr(Vt()),lt(Et()),alert(`${A.name} deleted!`))},style:{fontSize:"0.7rem",padding:"4px 8px"},children:["Delete ",A.name]},A.id))})]})]}),g("div",{style:{borderBottom:"1px solid var(--border)",paddingBottom:12},children:[u("h3",{style:{margin:"0 0 8px 0"},children:"Crate Timer Controls"}),g("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[u("button",{className:"btn ghost",onClick:()=>{localStorage.setItem(Dc,"0"),alert("Bronze crate timer reset!")},style:{fontSize:"0.8rem"},children:"Reset Bronze Timer"}),u("button",{className:"btn ghost",onClick:()=>{localStorage.setItem(Dc,String(Date.now()-12*60*60*1e3)),alert("Bronze crate ready!")},style:{fontSize:"0.8rem"},children:"Bronze Ready Now"})]})]}),g("div",{style:{borderBottom:"1px solid var(--border)",paddingBottom:12,marginBottom:12},children:[u("h3",{style:{margin:"0 0 8px 0"},children:"Title Controls"}),g("div",{style:{marginBottom:12},children:[u("button",{className:"btn ghost",onClick:()=>{bT("developer"),ln(Ds()),alert("Developer title unlocked!")},style:{fontSize:"0.8rem",width:"100%",marginBottom:8},children:"Unlock Developer Title"}),u("button",{className:"btn ghost",onClick:()=>{nu("developer"),gr(Di()),alert("Developer title equipped!")},style:{fontSize:"0.8rem",width:"100%"},children:"Equip Developer Title"})]}),u("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:Ds().map(A=>u("button",{className:"btn ghost",onClick:()=>{nu(A.id),gr(Di())},style:{fontSize:"0.75rem",padding:6,background:(ct==null?void 0:ct.id)===A.id?"rgba(167, 139, 250, 0.3)":"transparent",border:(ct==null?void 0:ct.id)===A.id?"1px solid var(--accent)":"1px solid var(--border)"},children:A.id==="developer"?u("span",{style:{background:"linear-gradient(90deg, #6366f1, #8b5cf6, #ec4899)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",fontWeight:"bold"},children:A.name}):A.name},A.id))})]}),g("div",{style:{borderBottom:"1px solid var(--border)",paddingBottom:12},children:[u("h3",{style:{margin:"0 0 8px 0"},children:"Critical Hit Testing"}),g("div",{style:{marginBottom:12,fontSize:"0.85rem",color:"var(--muted)"},children:[g("div",{children:["2x XP Chance: ",g("strong",{children:[Go.criticalHitChance,"%"]})]}),g("div",{children:["Crate Chance: ",g("strong",{children:[Go.crateRewardChance,"%"]})]})]}),g("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,marginBottom:8},children:[g("button",{className:`btn ${vr?"primary":"ghost"}`,onClick:()=>{pT(),Jl(!0),_r(Cn()),alert("Critical test mode enabled (100% chance)!")},style:{fontSize:"0.8rem"},children:[vr?"\u2713 ":"","Max Critical (100%)"]}),u("button",{className:"btn ghost",onClick:()=>{mT(),Jl(!1),_r(Cn()),alert("Critical test mode disabled (normal chances)!")},style:{fontSize:"0.8rem"},children:"Reset Critical"})]}),g("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,marginBottom:8},children:[g("button",{className:`btn ${cn?"primary":"ghost"}`,onClick:()=>{yT(),qo(!0),_r(Cn()),alert("Crate test mode enabled (100% chance)!")},style:{fontSize:"0.8rem"},children:[cn?"\u2713 ":"","Max Crate (100%)"]}),u("button",{className:"btn ghost",onClick:()=>{vT(),qo(!1),_r(Cn()),alert("Crate test mode disabled (normal chances)!")},style:{fontSize:"0.8rem"},children:"Reset Crate"})]}),u("button",{className:"btn ghost",onClick:()=>{tr(10),alert("Granted 10 XP - check for critical!")},style:{fontSize:"0.8rem",width:"100%"},children:"Test Grant 10 XP"})]}),g("div",{style:{borderBottom:"1px solid var(--border)",paddingBottom:12},children:[u("h3",{style:{margin:"0 0 8px 0"},children:"Quest Controls"}),g("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[u("button",{className:"btn ghost",onClick:()=>{const A=JSON.parse(localStorage.getItem(Qt)||"[]");A.forEach(G=>G.completed=!1),localStorage.setItem(Qt,JSON.stringify(A)),window.dispatchEvent(new CustomEvent("questsReset")),alert("All quests reset!")},style:{fontSize:"0.8rem"},children:"Reset All Quests"}),u("button",{className:"btn ghost",onClick:()=>{const A=JSON.parse(localStorage.getItem(Qt)||"[]");A.forEach(G=>G.completed=!0),localStorage.setItem(Qt,JSON.stringify(A)),window.dispatchEvent(new CustomEvent("questsReset")),alert("All quests completed!")},style:{fontSize:"0.8rem"},children:"Complete All Quests"}),u("button",{className:"btn ghost",onClick:()=>{const A=JSON.parse(localStorage.getItem(Qt)||"[]"),G=A.find(oe=>oe.id===1);G&&(G.progress=5),localStorage.setItem(Qt,JSON.stringify(A)),window.dispatchEvent(new CustomEvent("questsReset")),alert("Task Master quest progressed!")},style:{fontSize:"0.8rem"},children:"+5 Tasks (Q1)"}),u("button",{className:"btn ghost",onClick:()=>{const A=JSON.parse(localStorage.getItem(Qt)||"[]"),G=A.find(oe=>oe.id===4);G&&(G.progress=7),localStorage.setItem(Qt,JSON.stringify(A)),window.dispatchEvent(new CustomEvent("questsReset")),alert("Streak Keeper quest progressed!")},style:{fontSize:"0.8rem"},children:"+7 Streak (Q4)"}),u("button",{className:"btn ghost",onClick:()=>{const A=JSON.parse(localStorage.getItem(Qt)||"[]"),G=A.find(oe=>oe.id===5);G&&(G.progress=5),localStorage.setItem(Qt,JSON.stringify(A)),window.dispatchEvent(new CustomEvent("questsReset")),alert("Level Up quest progressed!")},style:{fontSize:"0.8rem"},children:"+Level 5 (Q5)"})]})]}),u("button",{className:"btn",onClick:()=>S(!1),style:{width:"100%"},children:"Close"})]})]})}),c&&!f&&u("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:g("div",{className:"panel",style:{maxWidth:500,padding:20,backgroundColor:"var(--panel)",boxShadow:"0 8px 32px rgba(0,0,0,0.3)"},children:[u("h2",{style:{margin:"0 0 16px 0",textAlign:"center"},children:"Quick Add Templates"}),u("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:16,marginBottom:16},children:ke.map((A,G)=>g("button",{onClick:()=>{Es(A.title,A.xp)},disabled:Kt()>=(be.has(4)?6:3),style:{padding:"5px 4px",borderRadius:8,backgroundColor:"var(--bg)",border:"2px solid var(--border)",color:"var(--text)",cursor:Kt()>=(be.has(4)?6:3)?"not-allowed":"pointer",fontSize:"0.8rem",fontWeight:500,transition:"all 0.2s",opacity:Kt()>=(be.has(4)?6:3)?.5:1,textAlign:"center",display:"flex",flexDirection:"column",gap:2,userSelect:"none"},onMouseOver:oe=>{Kt()<(be.has(4)?6:3)&&(oe.target.style.backgroundColor="var(--accent)",oe.target.style.color="var(--bg)",oe.target.style.borderColor="var(--accent)")},onMouseOut:oe=>{oe.target.style.backgroundColor="var(--bg)",oe.target.style.color="var(--text)",oe.target.style.borderColor="var(--border)"},children:[A.title,g("span",{className:"subtle",style:{fontSize:"0.75rem",fontWeight:400,userSelect:"none",pointerEvents:"none"},children:["+",A.xp," XP"]})]},G))}),u("button",{className:"btn",onClick:()=>d(!1),style:{width:"100%"},children:"Close"})]})}),f&&u("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:g("div",{className:"panel",style:{width:"95vw",maxWidth:450,padding:20,backgroundColor:"var(--panel)",boxShadow:"0 8px 32px rgba(0,0,0,0.3)"},children:[u("h2",{style:{margin:"0 0 16px 0",textAlign:"center"},children:f.title}),g("div",{style:{marginBottom:16},children:[u("label",{style:{display:"block",marginBottom:8,fontSize:"0.9rem",fontWeight:500},children:"Due Date"}),u("input",{type:"date",className:"input",value:m,onChange:A=>T(A.target.value)})]}),g("div",{style:{marginBottom:20},children:[u("label",{style:{display:"block",marginBottom:8,fontSize:"0.9rem",fontWeight:500},children:"Time"}),g("div",{style:{display:"flex",gap:12},children:[u("select",{className:"input",value:P,onChange:A=>R(Number(A.target.value)),style:{flex:1,color:"var(--text)",backgroundColor:"var(--bg)"},children:[12,1,2,3,4,5,6,7,8,9,10,11].map(A=>u("option",{value:A,style:{color:"white",backgroundColor:"var(--panel)"},children:String(A).padStart(2,"0")},A))}),g("select",{className:"input",value:x,onChange:A=>D(A.target.value),style:{flex:.6,color:"var(--text)",backgroundColor:"var(--bg)"},children:[u("option",{value:"AM",style:{color:"white",backgroundColor:"var(--panel)"},children:"AM"}),u("option",{value:"PM",style:{color:"white",backgroundColor:"var(--panel)"},children:"PM"})]}),u("select",{className:"input",value:y,onChange:A=>E(Number(A.target.value)),style:{flex:1,color:"var(--text)",backgroundColor:"var(--bg)"},children:Array.from({length:12}).map((A,G)=>u("option",{value:G*5,style:{color:"white",backgroundColor:"var(--panel)"},children:String(G*5).padStart(2,"0")},G))})]})]}),g("div",{style:{display:"flex",gap:12},children:[u("button",{className:"btn ghost",onClick:()=>v(null),style:{flex:1},children:"Back"}),u("button",{className:"btn",onClick:Ii,style:{flex:1},children:"Add Task"})]})]})}),te&&u("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9998},onClick:()=>$(!1),children:u("div",{className:"panel custom-scrollbar",style:{maxWidth:500,padding:24,backgroundColor:"var(--panel)",boxShadow:"0 8px 32px rgba(0,0,0,0.3)",userSelect:"none",maxHeight:"90vh",overflowY:"auto"},onClick:A=>A.stopPropagation(),children:Zd?g(Wt,{children:[g("div",{style:{textAlign:"center",marginBottom:24},children:[Ae?u("div",{children:g("div",{style:{marginBottom:12},children:[u("div",{className:"subtle",style:{fontSize:"0.8rem",marginBottom:8},children:"CHOOSE AVATAR"}),u("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:8,marginBottom:12},children:h_.map(A=>u("button",{className:"btn ghost",onClick:()=>Si(A),style:{fontSize:32,padding:8,border:H.avatar===A&&!H.customAvatarUrl?"2px solid var(--accent)":"2px solid transparent"},children:A},A))}),be.has(5)?g("div",{style:{borderTop:"1px solid var(--border)",paddingTop:12,marginTop:12},children:[u("div",{className:"subtle",style:{fontSize:"0.8rem",marginBottom:8},children:"UPLOAD CUSTOM IMAGE"}),u("input",{type:"file",accept:"image/*",onChange:Ti,style:{display:"block",width:"100%",marginBottom:8,padding:8,borderRadius:4,border:"1px solid var(--border)",backgroundColor:"var(--bg)",color:"var(--text)",cursor:"pointer"}}),Fo&&u("div",{className:"subtle",style:{color:"var(--accent)",fontSize:"0.8rem",marginBottom:8},children:Fo}),H.customAvatarUrl&&u("button",{className:"btn ghost",onClick:()=>Wn({...H,customAvatarUrl:void 0}),style:{width:"100%"},children:"Remove Custom Image"})]}):g("div",{style:{borderTop:"1px solid var(--border)",paddingTop:12,marginTop:12},children:[u("div",{className:"subtle",style:{fontSize:"0.8rem",marginBottom:8},children:"UPLOAD CUSTOM IMAGE"}),u("div",{className:"subtle",style:{fontSize:"0.85rem",marginBottom:8,padding:12,backgroundColor:"var(--bg)",borderRadius:4},children:"\u{1F512} Unlock in the Store for 150 XP to upload custom images"})]}),u("button",{className:"btn ghost",onClick:()=>ot(!1),style:{width:"100%",marginTop:12},children:"Done"})]})}):u(Wt,{children:u("div",{style:{width:80,height:80,borderRadius:"50%",backgroundColor:"var(--accent)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:40,margin:"0 auto 12px",border:be.has(3)?"4px solid var(--accent-2)":"none",cursor:"pointer",backgroundImage:H.customAvatarUrl?`url(${H.customAvatarUrl})`:"none",backgroundSize:"cover",backgroundPosition:"center",overflow:"hidden"},onClick:()=>ot(!0),children:!H.customAvatarUrl&&H.avatar})}),B?g("div",{style:{display:"flex",flexDirection:"column",gap:8,marginBottom:12},children:[g("div",{style:{display:"flex",gap:8},children:[u("input",{type:"text",className:"input",placeholder:"Username",value:ne,onChange:A=>ue(A.target.value),autoFocus:!0,onKeyPress:A=>A.key==="Enter"&&un(),style:{flex:1}}),u("input",{type:"text",className:"input",placeholder:"#1234",value:ge,onChange:A=>Ee(A.target.value.replace(/\D/g,"").slice(0,6)),onKeyPress:A=>A.key==="Enter"&&un(),style:{width:100}})]}),g("div",{style:{display:"flex",gap:8},children:[u("button",{className:"btn",onClick:Xt,style:{flex:1},children:"Save"}),u("button",{className:"btn ghost",onClick:()=>Y(!1),style:{flex:1},children:"Cancel"})]})]}):g("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:8,marginBottom:12},children:[g("h2",{style:{margin:0},children:[H.username,g("span",{style:{color:"var(--muted)",fontSize:"0.8em",marginLeft:4},children:["#",H.hashtag||"1000"]})]}),u("button",{className:"btn ghost",onClick:()=>{Y(!0),ue(H.username),Ee(H.hashtag||"")},style:{padding:"4px 8px",fontSize:"1rem"},children:"\u270F\uFE0F"})]}),g("div",{className:"subtle",children:["Level ",Math.floor(De()/100)+1," \u2022 ",De()," XP"]}),ct&&u("div",{style:{fontSize:"0.9rem",marginTop:4},children:ct.id==="developer"?g("span",{style:{background:"linear-gradient(90deg, #6366f1, #8b5cf6, #ec4899)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",fontWeight:"bold"},children:["\u2728 ",ct.name]}):g("span",{style:{color:"var(--accent)"},children:["\u2728 ",ct.name]})})]}),g("div",{style:{backgroundColor:"var(--bg)",borderRadius:8,padding:16,marginBottom:16,textAlign:"center"},children:[u("div",{style:{fontSize:"2rem",marginBottom:8},children:"\u{1F525}"}),g("div",{style:{fontSize:"1.2rem",fontWeight:500},children:[ur.current," day streak"]}),g("div",{className:"subtle",style:{fontSize:"0.9rem",marginTop:4},children:["Longest: ",ur.longest," days"]})]}),g("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12,marginBottom:16},children:[g("div",{style:{backgroundColor:"var(--bg)",borderRadius:8,padding:12,textAlign:"center"},children:[u("div",{className:"subtle",style:{fontSize:"0.8rem",marginBottom:4},children:"Tasks Completed"}),u("div",{style:{fontSize:"1.5rem",fontWeight:"bold"},children:H.tasksCompleted})]}),g("div",{style:{backgroundColor:"var(--bg)",borderRadius:8,padding:12,textAlign:"center"},children:[u("div",{className:"subtle",style:{fontSize:"0.8rem",marginBottom:4},children:"Events Created"}),u("div",{style:{fontSize:"1.5rem",fontWeight:"bold"},children:H.eventsCreated})]})]}),g("div",{style:{marginBottom:16},children:[g("div",{style:{textAlign:"center",marginBottom:12},children:[u("h3",{style:{margin:"0 0 8px 0",fontSize:"0.9rem",color:"var(--muted)"},children:"TITLES"}),g("div",{style:{fontSize:"1rem",fontWeight:"bold",marginBottom:8},children:[Wo.length,"/",Ja.length]}),u("div",{style:{width:"100%",height:6,background:"var(--border)",borderRadius:3,overflow:"hidden"},children:u("div",{style:{height:"100%",width:`${Wo.length/Ja.length*100}%`,background:"linear-gradient(90deg, var(--accent), #a78bfa)",transition:"width 0.3s ease"}})})]}),u("div",{className:"custom-scrollbar",style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:12,marginBottom:12,maxHeight:"300px",overflowY:"auto"},children:Ja.map(A=>{const G=Wo.some(pe=>pe.id===A.id),oe=(ct==null?void 0:ct.id)===A.id;return g("div",{onClick:()=>G&&nu(oe?null:A.id),style:{display:"flex",gap:8,padding:10,background:oe?"linear-gradient(135deg, rgba(167, 139, 250, 0.3) 0%, rgba(147, 112, 219, 0.3) 100%)":G?"linear-gradient(135deg, rgba(34, 197, 94, 0.15) 0%, rgba(22, 163, 74, 0.15) 100%)":"rgba(0, 0, 0, 0.1)",border:oe?"2px solid var(--accent)":G?"1px solid rgba(34, 197, 94, 0.5)":"1px solid var(--border)",borderRadius:6,cursor:G?"pointer":"default",transition:"all 0.2s ease",alignItems:"flex-start"},onMouseEnter:pe=>{G&&(pe.currentTarget.style.transform="translateY(-2px)",pe.currentTarget.style.boxShadow="0 4px 12px rgba(167, 139, 250, 0.3)")},onMouseLeave:pe=>{pe.currentTarget.style.transform="translateY(0)",pe.currentTarget.style.boxShadow="none"},children:[u("div",{style:{fontSize:"1.5rem",flexShrink:0},children:G?"\u2728":"\u{1F512}"}),g("div",{style:{flex:1,minWidth:0},children:[g("div",{style:{fontSize:"0.8rem",fontWeight:"bold",marginBottom:2},children:[A.id==="developer"?u("span",{style:{background:"linear-gradient(90deg, #6366f1, #8b5cf6, #ec4899)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:A.name}):A.name,oe&&u("span",{style:{marginLeft:4,color:"var(--accent)"},children:"\u2605"})]}),u("div",{style:{fontSize:"0.7rem",color:"var(--muted)",lineHeight:"1.3",marginBottom:4},children:A.description}),u("div",{style:{fontSize:"0.65rem",color:"var(--accent)",fontStyle:"italic"},children:A.source})]})]},A.id)})})]}),g("div",{style:{marginBottom:16},children:[g("div",{style:{textAlign:"center",marginBottom:12},children:[u("h3",{style:{margin:"0 0 8px 0",fontSize:"0.9rem",color:"var(--muted)"},children:"MEDALS"}),g("div",{style:{fontSize:"1rem",fontWeight:"bold",marginBottom:8},children:[mr.filter(A=>A.earned).length,"/",mr.length]}),u("div",{style:{width:"100%",height:6,background:"var(--border)",borderRadius:3,overflow:"hidden"},children:u("div",{style:{height:"100%",width:`${mr.filter(A=>A.earned).length/mr.length*100}%`,background:"linear-gradient(90deg, var(--accent), #fbbf24)",transition:"width 0.3s ease"}})})]}),u("div",{className:"custom-scrollbar",style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:12,marginBottom:12,maxHeight:"300px",overflowY:"auto"},children:mr.map(A=>g("div",{style:{display:"flex",gap:8,padding:10,background:A.earned?"linear-gradient(135deg, rgba(251, 191, 36, 0.15) 0%, rgba(245, 158, 11, 0.15) 100%)":"rgba(0, 0, 0, 0.1)",border:A.earned?"1px solid rgba(251, 191, 36, 0.5)":"1px solid var(--border)",borderRadius:6,cursor:"pointer",transition:"all 0.2s ease",alignItems:"flex-start"},onMouseEnter:G=>{A.earned&&(G.currentTarget.style.transform="translateY(-2px)",G.currentTarget.style.boxShadow="0 4px 12px rgba(251, 191, 36, 0.3)")},onMouseLeave:G=>{G.currentTarget.style.transform="translateY(0)",G.currentTarget.style.boxShadow="none"},children:[u("div",{style:{fontSize:"1.5rem",flexShrink:0},children:A.earned?A.icon:"\u{1F512}"}),g("div",{style:{flex:1,minWidth:0},children:[u("div",{style:{fontSize:"0.8rem",fontWeight:"bold",marginBottom:2},children:A.name}),u("div",{style:{fontSize:"0.7rem",color:"var(--muted)",lineHeight:"1.3"},children:A.description}),A.earned&&A.earnedDate&&g("div",{style:{fontSize:"0.65rem",color:"var(--accent)",marginTop:4},children:["\u2713 ",new Date(A.earnedDate).toLocaleDateString()]})]})]},A.id))})]}),g("div",{style:{marginBottom:16,textAlign:"center"},children:[u("h3",{style:{margin:"0 0 8px 0",fontSize:"0.9rem",color:"var(--muted)"},children:"ABOUT"}),u("div",{className:"subtle",style:{fontSize:"0.9rem"},children:"An ADHD explorer on a journey of self-care and productivity. Crushing goals one task at a time! \u{1F680}"})]}),u("button",{className:"btn ghost",onClick:ic,style:{width:"100%",marginBottom:8,backgroundColor:"rgba(255,68,68,0.2)",color:"var(--text)"},children:"Logout"}),u("button",{className:"btn",onClick:()=>$(!1),style:{width:"100%"},children:"Close"})]}):g("div",{children:[g("div",{style:{display:"flex",gap:8,marginBottom:24,borderBottom:"1px solid var(--border)",paddingBottom:0},children:[u("button",{className:Bn==="login"?"btn":"btn ghost",onClick:()=>{ds("login"),zn(""),an("")},style:{flex:1,borderBottom:Bn==="login"?"2px solid var(--accent)":"none"},children:"Login"}),u("button",{className:Bn==="signup"?"btn":"btn ghost",onClick:()=>{ds("signup"),zn(""),an("")},style:{flex:1,borderBottom:Bn==="signup"?"2px solid var(--accent)":"none"},children:"Sign Up"})]}),Bn==="login"?g("div",{children:[u("h2",{style:{textAlign:"center",marginBottom:24,fontSize:"1.5rem"},children:"Login"}),g("div",{style:{marginBottom:16},children:[u("label",{className:"subtle",style:{fontSize:"0.8rem",display:"block",marginBottom:6},children:"EMAIL"}),u("input",{type:"email",className:"input",placeholder:"Enter your email",value:qe,onChange:A=>Qe(A.target.value),onKeyDown:A=>A.key==="Enter"&&ws()})]}),g("div",{style:{marginBottom:16},children:[u("label",{className:"subtle",style:{fontSize:"0.8rem",display:"block",marginBottom:6},children:"PASSWORD"}),u("input",{type:"password",className:"input",placeholder:"Enter your password",value:hr,onChange:A=>Vo(A.target.value),onKeyDown:A=>A.key==="Enter"&&ws()})]}),Uo&&u("div",{style:{backgroundColor:"#ff4444",color:"white",padding:12,borderRadius:4,marginBottom:16,fontSize:"0.9rem"},children:Uo}),u("button",{className:"btn",onClick:ws,style:{width:"100%",marginBottom:12},children:"Login"}),u("button",{className:"btn ghost",onClick:()=>$(!1),style:{width:"100%"},children:"Close"})]}):g("div",{children:[u("h2",{style:{textAlign:"center",marginBottom:24,fontSize:"1.5rem"},children:"Create Account"}),g("div",{style:{marginBottom:16},children:[u("label",{className:"subtle",style:{fontSize:"0.8rem",display:"block",marginBottom:6},children:"EMAIL"}),u("input",{type:"email",className:"input",placeholder:"Enter your email",value:jn,onChange:A=>Bo(A.target.value),onKeyDown:A=>A.key==="Enter"&&Ei()})]}),g("div",{style:{marginBottom:16},children:[u("label",{className:"subtle",style:{fontSize:"0.8rem",display:"block",marginBottom:6},children:"PASSWORD"}),u("input",{type:"password",className:"input",placeholder:"Create a password (min 6 chars)",value:hs,onChange:A=>fs(A.target.value),onKeyDown:A=>A.key==="Enter"&&Ei()})]}),g("div",{style:{marginBottom:16},children:[u("label",{className:"subtle",style:{fontSize:"0.8rem",display:"block",marginBottom:6},children:"USERNAME"}),u("input",{type:"text",className:"input",placeholder:"Choose a username",value:ps,onChange:A=>Yl(A.target.value),onKeyDown:A=>A.key==="Enter"&&Ei()})]}),g("div",{style:{marginBottom:16},children:[u("label",{className:"subtle",style:{fontSize:"0.8rem",display:"block",marginBottom:6},children:"HASHTAG (Optional)"}),u("div",{style:{fontSize:"0.85rem",marginBottom:8,color:"var(--muted)"},children:"Leave blank to auto-generate"}),u("input",{type:"text",className:"input",placeholder:"e.g., 1234 (or leave blank)",value:zo,onChange:A=>jo(A.target.value),onKeyDown:A=>A.key==="Enter"&&Ei()})]}),fr&&u("div",{style:{backgroundColor:"#ff4444",color:"white",padding:12,borderRadius:4,marginBottom:16,fontSize:"0.9rem"},children:fr}),u("button",{className:"btn",onClick:Ei,style:{width:"100%",marginBottom:12},children:"Create Account"}),u("button",{className:"btn ghost",onClick:()=>$(!1),style:{width:"100%"},children:"Close"})]})]})})})]})},bD=()=>{const{date:t}=Ob(),{getTasksForDate:e}=Lo(),n=e(t);return g("div",{className:"day-view",children:[g("h1",{className:"text-2xl font-bold",children:["Tasks for ",t]}),u("div",{className:"tasks-list",children:n.length>0?n.map(r=>u(bg,{task:r},r.id)):u("p",{children:"No tasks for this day."})})]})},kD=({days:t,onDayClick:e=()=>{}})=>u(Wt,{children:t.map((n,r)=>u(dT,{date:n,onClick:e},r))}),xD=()=>{const{events:t,tasks:e}=Lo();return g("div",{className:"week-view",children:[u("h1",{className:"text-2xl font-bold",children:"Weekly Overview"}),u("div",{className:"week-rows",children:t.map((n,r)=>u(kD,{event:n},r))}),u("div",{className:"tasks",children:e.map((n,r)=>u(bg,{task:n},r))})]})},AD=()=>{const{currentMonth:t,events:e}=Lo();return g("div",{className:"month-view",children:[u("h1",{className:"text-2xl font-bold mb-4",children:t}),u(wT,{events:e,view:"month"})]})},kT=L.exports.createContext(void 0),f_="adhd_prefs_v1",p_=t=>{const e=document.documentElement,n=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;e.classList.remove("theme-light","theme-sunset","theme-ocean"),t==="light"?e.classList.add("theme-light"):t==="dark"||(t==="sunset"?e.classList.add("theme-sunset"):t==="ocean"?e.classList.add("theme-ocean"):t==="system"&&(n||e.classList.add("theme-light")))},PD=({children:t})=>{const[e,n]=L.exports.useState(()=>{try{const i=localStorage.getItem(f_);if(i)return JSON.parse(i)}catch{}return{theme:"dark",notificationsEnabled:!0}});L.exports.useEffect(()=>{p_(e.theme);try{localStorage.setItem(f_,JSON.stringify(e))}catch{}},[e]);const r=i=>{n(i)};return L.exports.useEffect(()=>{const i=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)"),s=()=>{e.theme==="system"&&p_("system")};return i&&i.addEventListener?i.addEventListener("change",s):i&&i.addListener&&i.addListener(s),()=>{i&&i.removeEventListener?i.removeEventListener("change",s):i&&i.removeListener&&i.removeListener(s)}},[e.theme]),u(kT.Provider,{value:{preferences:e,setPreferences:r},children:t})},RD=()=>{const t=L.exports.useContext(kT);if(!t)throw new Error("usePreferences must be used within a PreferencesProvider");return t},ND="adhd_purchases",DD=()=>{var c;const{preferences:t,setPreferences:e}=RD();L.exports.useState(t.theme||"dark");const[n,r]=L.exports.useState((c=t.notificationsEnabled)!=null?c:!0),[i,s]=L.exports.useState(()=>{const d=localStorage.getItem(ND);return d?new Set(JSON.parse(d)):new Set}),o=d=>{e({...t,theme:d})},l=()=>{e({...t,notificationsEnabled:n})};return u("div",{className:"container",children:g("div",{className:"panel",style:{maxWidth:900,margin:"24px auto"},children:[g("div",{style:{textAlign:"center",marginBottom:24},children:[u("h2",{style:{margin:"0 0 8px 0",fontSize:"2.5rem"},children:"Settings"}),u("div",{className:"subtle",style:{fontSize:"1.1rem"},children:"Customize your experience"})]}),g("div",{className:"settings-grid",children:[g("section",{className:"settings-section panel",style:{padding:16},children:[u("h4",{style:{marginTop:0},children:"Appearance"}),g("div",{className:"setting-row",children:[u("label",{children:"Theme"}),g("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[u("button",{className:`btn ${t.theme==="light"?"":"ghost"}`,onClick:()=>o("light"),children:"Light"}),u("button",{className:`btn ${t.theme==="dark"?"":"ghost"}`,onClick:()=>o("dark"),children:"Dark"}),i.has(1)&&u("button",{className:`btn ${t.theme==="sunset"?"":"ghost"}`,onClick:()=>o("sunset"),children:"Sunset"}),i.has(2)&&u("button",{className:`btn ${t.theme==="ocean"?"":"ghost"}`,onClick:()=>o("ocean"),children:"Ocean"})]})]})]}),g("section",{className:"settings-section panel",style:{padding:16},children:[u("h4",{style:{marginTop:0},children:"Notifications"}),g("div",{className:"setting-row",children:[u("label",{style:{marginRight:12},children:"Enable notifications"}),g("label",{className:"switch",children:[u("input",{type:"checkbox",checked:n,onChange:d=>r(d.target.checked)}),u("span",{className:"slider"})]})]}),u("div",{className:"subtle",style:{marginTop:8},children:"Turn on desktop notifications for reminders and XP achievements."})]}),g("section",{className:"settings-section panel",style:{padding:16},children:[u("h4",{style:{marginTop:0},children:"Account"}),g("div",{className:"setting-row",children:[u("label",{children:"Export data"}),u("div",{children:u(Me,{onClick:()=>alert("Exporting..."),children:"Export JSON"})})]}),g("div",{style:{marginTop:12},className:"setting-row",children:[u("label",{children:"Reset Level"}),u("div",{children:u(Me,{variant:"ghost",onClick:()=>{confirm("Reset your XP to zero? This cannot be undone.")&&(Qa(),alert("XP reset to 0"))},children:"Reset XP"})})]})]}),g("section",{className:"settings-section panel",style:{padding:16},children:[u("h4",{style:{marginTop:0},children:"Support"}),u("div",{className:"subtle",style:{marginBottom:12},children:"Need help with the app? Check out these resources:"}),g("div",{className:"setting-row",style:{flexDirection:"column",gap:8},children:[u(Me,{onClick:()=>window.open("https://github.com","_blank"),style:{width:"100%",justifyContent:"flex-start"},children:"\u{1F4DA} View Documentation"}),u(Me,{variant:"ghost",onClick:()=>window.open("https://github.com","_blank"),style:{width:"100%",justifyContent:"flex-start"},children:"\u{1F41B} Report a Bug"}),u(Me,{variant:"ghost",onClick:()=>window.open("https://github.com","_blank"),style:{width:"100%",justifyContent:"flex-start"},children:"\u{1F4A1} Request a Feature"})]})]}),g("section",{className:"settings-section panel",style:{padding:16},children:[u("h4",{style:{marginTop:0},children:"Contact Developer"}),u("div",{className:"subtle",style:{marginBottom:12},children:"Have feedback or just want to say hello?"}),g("div",{className:"setting-row",style:{flexDirection:"column",gap:8},children:[u(Me,{onClick:()=>window.location.href="mailto:developer@example.com",style:{width:"100%",justifyContent:"flex-start"},children:"\u{1F4E7} Send Email"}),u(Me,{variant:"ghost",onClick:()=>window.open("https://twitter.com","_blank"),style:{width:"100%",justifyContent:"flex-start"},children:"\u{1D54F} Twitter"}),u(Me,{variant:"ghost",onClick:()=>window.open("https://discord.com","_blank"),style:{width:"100%",justifyContent:"flex-start"},children:"\u{1F4AC} Discord Community"})]})]})]}),u("div",{style:{marginTop:24,textAlign:"center"},children:u(Me,{onClick:l,children:"Save"})})]})})};const Zh=({tier:t,cost:e,costType:n,rewards:r,onOpen:i,isDisabled:s,isFree:o=!1,cooldownMs:l=0,lastOpenedTime:c=0})=>{const[d,f]=L.exports.useState(!1),[v,m]=L.exports.useState(null),[T,P]=L.exports.useState(0),[R,y]=L.exports.useState(0);we.useEffect(()=>{if(!o)return;const _=()=>{const b=Date.now()-c,N=Math.max(0,l-b);y(N)};_();const S=setInterval(_,1e3);return()=>clearInterval(S)},[o,c,l]);const E={bronze:"#CD7F32",silver:"#C0C0C0",gold:"#FFD700"},x={bronze:"\u{1F4E6}",silver:"\u{1F381}",gold:"\u{1F48E}"},D=()=>{if(s||d||o&&R>0)return;f(!0),P(0);let _=0;const S=setInterval(()=>{_+=1,P(_%r.length)},100);setTimeout(()=>{clearInterval(S);const I=r[Math.floor(Math.random()*r.length)];m(I),i(I)},2e3)},O=_=>{const S=Math.floor(_/36e5),I=Math.floor(_%(1e3*60*60)/(1e3*60));return`${S}h ${I}m`},z=_=>_.type==="xp"?`${_.amount} XP`:`${_.amount} \u{1F48E}`,V=x[t],k=E[t];return u("div",{className:"loot-crate-container",children:g("div",{className:"panel",style:{padding:16,textAlign:"center",height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[g("div",{children:[g("h4",{style:{margin:"0 0 8px 0",textTransform:"capitalize"},children:[V," ",t," Crate"]}),u("div",{className:"subtle",style:{fontSize:"0.9rem",marginBottom:12},children:"Open for random rewards"})]}),d&&!v?u("div",{className:"loot-reward-display",children:u("div",{className:"reward-scroll",style:{color:k,fontSize:"1.5rem",fontWeight:"bold"},children:z(r[T])})}):v?g("div",{className:"loot-reward-display",style:{background:"linear-gradient(135deg, rgba(34, 197, 94, 0.1) 0%, rgba(34, 197, 94, 0.05) 100%)"},children:[u("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#22c55e"},children:z(v)}),u("div",{style:{fontSize:"0.9rem",color:"var(--muted)",marginTop:8},children:"You won!"})]}):u("div",{style:{fontSize:"3rem",margin:"12px 0"},children:V}),u("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:8,marginTop:12},children:v?u("button",{onClick:()=>{m(null),f(!1)},className:"btn primary",style:{padding:"8px 16px",fontSize:"0.9rem",backgroundColor:"var(--primary)",border:"1px solid var(--accent)",color:"white",fontWeight:"bold"},children:"Close"}):o?g(Wt,{children:[u("button",{onClick:D,disabled:d||R>0,className:"btn primary",style:{padding:"8px 16px",fontSize:"0.9rem",opacity:R>0?.5:1,cursor:R>0?"not-allowed":"pointer"},children:d?"...":"Open"}),u("span",{style:{fontSize:"0.9rem",fontWeight:"bold",color:"#22c55e"},children:R>0?O(R):"FREE"})]}):g(Wt,{children:[u("button",{onClick:D,disabled:s||d,className:"btn primary",style:{padding:"8px 16px",fontSize:"0.9rem",opacity:s?.5:1,cursor:s?"not-allowed":"pointer"},children:d?"...":"Open"}),u("span",{style:{fontSize:"0.9rem",fontWeight:"bold",color:n==="xp"?"#6366f1":"#ec4899"},children:n==="xp"?`${e} XP`:`${e} \u{1F48E}`})]})})]})})},m_="adhd_purchases",g_="adhd_premium_purchases",ef="adhd_plus_subscription",y_="adhd_bronze_crate_last_opened",OD=()=>{const[t,e]=L.exports.useState(De()),[n,r]=L.exports.useState(pt()),[i,s]=L.exports.useState(()=>{const I=localStorage.getItem(m_);return I?new Set(JSON.parse(I)):new Set}),[o,l]=L.exports.useState(()=>{const I=localStorage.getItem(g_);return I?new Set(JSON.parse(I)):new Set}),[c,d]=L.exports.useState(()=>{const I=localStorage.getItem(ef);return I?JSON.parse(I):{isActive:!1,expiresAt:0,lastClaimedMonthlyGems:""}}),[f,v]=L.exports.useState(()=>{const I=localStorage.getItem(y_);return I?Number(I):0}),[m,T]=L.exports.useState(()=>Vt()),P=c.isActive&&c.expiresAt>Date.now(),R=()=>P?Math.ceil((c.expiresAt-Date.now())/(1e3*60*60*24)):0,y=()=>new Date().toDateString(),E=P&&c.lastClaimedMonthlyGems!==y(),x=[{id:1,name:"Theme Unlock: Sunset",cost:100,description:"Unlock a warm sunset color theme",type:"xp"},{id:2,name:"Theme Unlock: Ocean",cost:100,description:"Unlock a cool ocean color theme",type:"xp"},{id:3,name:"Custom Avatar Border",cost:150,description:"Personalize your profile with a custom border",type:"xp"},{id:4,name:"Extra Task Slots",cost:200,description:"Double your daily task capacity",type:"xp"},{id:5,name:"Custom Avatar Upload",cost:150,description:"Upload custom images for your avatar",type:"xp"}],D=[{id:101,name:"Premium Avatar Frame",cost:99,description:"Exclusive golden frame for your avatar",type:"gems"},{id:102,name:"Custom Profile Banner",cost:149,description:"Personalize your profile with a custom banner",type:"gems"},{id:103,name:"XP Booster (7 days)",cost:199,description:"+50% XP gain for 7 days",type:"gems"},{id:104,name:"Unlimited Tasks",cost:299,description:"Unlock unlimited daily tasks",type:"gems"},{id:105,name:"Exclusive Badge",cost:79,description:"Show off your premium status with an exclusive badge",type:"gems"}],O=(I,b,N,w)=>{if((w==="xp"?i:o).has(I)){alert("You already own this item!");return}if(w==="xp")if(t>=b){const J=t-b;gn(J),e(J);const se=new Set(i);se.add(I),s(se),localStorage.setItem(m_,JSON.stringify(Array.from(se))),alert(`Purchased: ${N}!`),window.dispatchEvent(new Event("profileUpdated"))}else alert("Not enough XP to purchase this item.");else if(n>=b){const J=n-b;bt(J),r(J);const se=new Set(o);se.add(I),l(se),localStorage.setItem(g_,JSON.stringify(Array.from(se))),alert(`Purchased: ${N}!`),window.dispatchEvent(new Event("currencyUpdated"))}else alert("Not enough Gems to purchase this item.")},z=(I,b)=>{const N=n+I;bt(N),r(N),alert(`Successfully purchased ${I} Gems for ${b}!`),window.dispatchEvent(new Event("currencyUpdated"))},V=()=>{const I=Date.now()+2592e6,b={isActive:!0,expiresAt:I,lastClaimedMonthlyGems:""};d(b),localStorage.setItem(ef,JSON.stringify(b)),alert("Successfully subscribed to Plus! \u{1F389}"),window.dispatchEvent(new Event("subscriptionUpdated"))},k=()=>{if(!E){alert("You can only claim daily gems once per day!");return}const I=n+10;bt(I),r(I);const b={...c,lastClaimedMonthlyGems:y()};d(b),localStorage.setItem(ef,JSON.stringify(b)),alert("Claimed 10 daily gems! \u{1F48E}"),window.dispatchEvent(new Event("currencyUpdated"))},_=(I,b)=>(b==="xp"?i:o).has(I),S=(I,b,N)=>{if(t<N){alert("Not enough XP to buy this pet!");return}if(mD(I)){const Q=De();e(Q),T(Vt()),alert(`Welcome ${b}! Your new companion has arrived! \u{1F389}`),window.dispatchEvent(new Event("currencyUpdated"))}};return g("div",{className:"container",children:[g("div",{className:"header",style:{textAlign:"center"},children:[u("h1",{style:{fontSize:"2.5rem",marginBottom:16},children:"Store"}),u("div",{className:"subtle",style:{fontSize:"1.1rem"},children:"Spend your hard-earned XP and Gems on exclusive items"})]}),g("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:24,gap:16,flexWrap:"wrap"},children:[g("div",{className:"panel",style:{padding:16},children:[u("h3",{style:{margin:0},children:"Your XP"}),g("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#6366f1",marginTop:8},children:[t," XP"]})]}),g("div",{className:"panel",style:{padding:16},children:[u("h3",{style:{margin:0},children:"Your Gems"}),g("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#ec4899",marginTop:8},children:["\u{1F48E} ",n]})]})]}),u("div",{style:{marginBottom:32},children:u("div",{className:"panel",style:{padding:24,background:"linear-gradient(135deg, rgba(236, 72, 153, 0.1) 0%, rgba(168, 85, 247, 0.1) 100%)",border:"2px solid rgba(236, 72, 153, 0.5)",borderRadius:12,position:"relative"},children:g("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:20},children:[g("div",{style:{flex:1},children:[u("h2",{style:{margin:"0 0 8px 0",fontSize:"1.8rem"},children:"\u2728 ADHD Plus"}),u("div",{className:"subtle",style:{fontSize:"1rem",marginBottom:16},children:"Unlock exclusive benefits and monthly rewards"}),g("div",{style:{marginBottom:16},children:[u("h4",{style:{margin:"0 0 12px 0",color:"#ec4899"},children:"\u2705 Benefits:"}),g("ul",{style:{margin:0,paddingLeft:20,lineHeight:"1.8"},children:[g("li",{children:["\u{1F4E6} ",u("strong",{children:"10 Gems Daily"})," - Claim once per day"]}),g("li",{children:["\u2B50 ",u("strong",{children:"2x XP Multiplier"})," - Earn XP faster"]}),g("li",{children:["\u{1F3A8} ",u("strong",{children:"Exclusive Themes"})," - Premium color schemes"]}),g("li",{children:["\u{1F3C6} ",u("strong",{children:"Premium Badge"})," - Show your VIP status"]}),g("li",{children:["\u{1F381} ",u("strong",{children:"Bonus Items"})," - Early access to new store items"]})]})]})]}),u("div",{style:{minWidth:320,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-start",paddingTop:40},children:P?g("div",{style:{background:"linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(168, 85, 247, 0.1) 100%)",padding:16,borderRadius:8,textAlign:"center",border:"2px solid #6366f1"},children:[u("div",{style:{color:"#6366f1",fontWeight:"bold",marginBottom:12},children:"\u2713 Active Subscription"}),g("div",{className:"subtle",style:{marginBottom:12},children:["Expires in ",R()," days"]}),u(Me,{onClick:k,disabled:!E,style:{width:"100%"},children:E?"\u{1F381} Claim 10 Gems":"\u2713 Gems Claimed Today"})]}):g("div",{style:{background:"var(--panel)",padding:32,borderRadius:8,textAlign:"center",width:"100%"},children:[u("div",{style:{fontSize:"2.5rem",fontWeight:"bold",color:"#ec4899",marginBottom:16},children:"$9.99/mo"}),u(Me,{onClick:V,style:{width:"100%",marginBottom:8},children:"Subscribe Now"}),u("div",{className:"subtle",style:{fontSize:"0.85rem"},children:"Cancel anytime"})]})})]})})}),g("div",{style:{marginBottom:32},children:[u("h2",{style:{marginBottom:16},children:"Get Premium Gems"}),g("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:16,marginBottom:24},children:[g("div",{className:"panel",style:{padding:16,display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[g("div",{children:[u("h4",{style:{margin:"0 0 8px 0"},children:"\u{1F48E} 100 Gems"}),u("div",{className:"subtle",style:{fontSize:"0.9rem"},children:"Starter Pack"})]}),g("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:12},children:[u("span",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#ec4899"},children:"$4.99"}),u(Me,{onClick:()=>z(100,"$4.99"),style:{fontSize:"0.85rem"},children:"Buy"})]})]}),g("div",{className:"panel",style:{padding:16,display:"flex",flexDirection:"column",justifyContent:"space-between",border:"2px solid #ec4899"},children:[g("div",{children:[u("h4",{style:{margin:"0 0 8px 0"},children:"\u{1F48E} 550 Gems"}),u("div",{className:"subtle",style:{fontSize:"0.9rem",color:"#ec4899"},children:"\u2B50 Best Value (+50 bonus)"})]}),g("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:12},children:[u("span",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#ec4899"},children:"$19.99"}),u(Me,{onClick:()=>z(550,"$19.99"),style:{fontSize:"0.85rem"},children:"Buy"})]})]}),g("div",{className:"panel",style:{padding:16,display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[g("div",{children:[u("h4",{style:{margin:"0 0 8px 0"},children:"\u{1F48E} 1200 Gems"}),u("div",{className:"subtle",style:{fontSize:"0.9rem"},children:"Premium Pack"})]}),g("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:12},children:[u("span",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#ec4899"},children:"$39.99"}),u(Me,{onClick:()=>z(1200,"$39.99"),style:{fontSize:"0.85rem"},children:"Buy"})]})]})]})]}),g("div",{style:{marginBottom:32},children:[u("h2",{style:{marginBottom:16},children:"\u{1F3B2} Loot Crates - Random Rewards!"}),g("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(260px, 1fr))",gap:16,marginBottom:24},children:[u(Zh,{tier:"bronze",cost:25,costType:"gems",isFree:!0,cooldownMs:12*60*60*1e3,lastOpenedTime:f,rewards:[{type:"gems",amount:10},{type:"gems",amount:15},{type:"xp",amount:50},{type:"xp",amount:75},{type:"gems",amount:20},{type:"xp",amount:100}],onOpen:I=>{if(I.type==="xp"){const b=t+I.amount;gn(b),e(b)}else{const b=n+I.amount;bt(b),r(b)}v(Date.now()),localStorage.setItem(y_,String(Date.now())),window.dispatchEvent(new Event("currencyUpdated"))},isDisabled:!1}),u(Zh,{tier:"silver",cost:60,costType:"gems",rewards:[{type:"gems",amount:30},{type:"gems",amount:50},{type:"xp",amount:150},{type:"xp",amount:200},{type:"gems",amount:75},{type:"xp",amount:250},{type:"gems",amount:100}],onOpen:I=>{if(I.type==="xp"){const b=t+I.amount;gn(b),e(b)}else{const b=n+I.amount;bt(b),r(b)}window.dispatchEvent(new Event("currencyUpdated"))},isDisabled:n<60}),u(Zh,{tier:"gold",cost:150,costType:"gems",rewards:[{type:"gems",amount:100},{type:"gems",amount:150},{type:"xp",amount:400},{type:"xp",amount:500},{type:"gems",amount:200},{type:"xp",amount:600},{type:"gems",amount:250},{type:"xp",amount:750}],onOpen:I=>{if(I.type==="xp"){const b=t+I.amount;gn(b),e(b)}else{const b=n+I.amount;bt(b),r(b)}window.dispatchEvent(new Event("currencyUpdated"))},isDisabled:n<150})]})]}),g("div",{style:{marginBottom:32},children:[u("h2",{style:{marginBottom:16},children:"Premium Items (Gems)"}),u("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:16},children:D.map(I=>g("div",{className:"panel",style:{padding:16,display:"flex",flexDirection:"column",border:"1px solid rgba(236, 72, 153, 0.3)"},children:[u("h4",{style:{margin:"0 0 8px 0"},children:I.name}),u("p",{style:{margin:"0 0 12px 0",color:"#9ca3af"},children:I.description}),g("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"auto"},children:[g("span",{style:{fontSize:"1.25rem",fontWeight:"bold",color:"#ec4899"},children:["\u{1F48E} ",I.cost]}),u(Me,{onClick:()=>O(I.id,I.cost,I.name,"gems"),variant:_(I.id,"gems")?"ghost":n>=I.cost?void 0:"ghost",disabled:_(I.id,"gems")||n<I.cost,children:_(I.id,"gems")?"Owned":"Buy"})]})]},I.id))})]}),g("div",{style:{marginBottom:32},children:[u("h2",{style:{marginBottom:16},children:"Pet Shop (Companion Pets)"}),u("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:16},children:xg.map(I=>{const b=gD(I.petId);return g("div",{className:"panel",style:{padding:16,display:"flex",flexDirection:"column"},children:[u("div",{style:{fontSize:"3rem",marginBottom:12,textAlign:"center"},children:I.emoji}),u("h4",{style:{margin:"0 0 8px 0"},children:I.name}),g("p",{style:{margin:"0 0 12px 0",color:"#9ca3af",fontSize:"0.9rem"},children:["Starts at Level ",I.presetLevel]}),g("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"auto"},children:[g("span",{style:{fontSize:"1.25rem",fontWeight:"bold",color:"#6366f1"},children:[I.cost," XP"]}),u(Me,{onClick:()=>S(I.petId,I.name,I.cost),variant:b?"ghost":t>=I.cost?void 0:"ghost",disabled:b||t<I.cost,children:b?"Owned":"Buy"})]})]},I.petId)})})]}),g("div",{style:{marginBottom:120},children:[u("h2",{style:{marginBottom:16},children:"Free Items (XP)"}),u("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:16},children:x.map(I=>g("div",{className:"panel",style:{padding:16,display:"flex",flexDirection:"column"},children:[u("h4",{style:{margin:"0 0 8px 0"},children:I.name}),u("p",{style:{margin:"0 0 12px 0",color:"#9ca3af"},children:I.description}),g("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"auto"},children:[g("span",{style:{fontSize:"1.25rem",fontWeight:"bold",color:"#6366f1"},children:[I.cost," XP"]}),u(Me,{onClick:()=>O(I.id,I.cost,I.name,"xp"),variant:_(I.id,"xp")?"ghost":t>=I.cost?void 0:"ghost",disabled:_(I.id,"xp")||t<I.cost,children:_(I.id,"xp")?"Purchased":"Buy"})]})]},I.id))})]})]})},LD="adhd_profile",MD="adhd_xp",tf="adhd_leaderboard_monthly",FD="adhd_friends",v_="adhd_leaderboard_reset_date",VD=()=>{const[t,e]=L.exports.useState([]),[n,r]=L.exports.useState(null),[i,s]=L.exports.useState("global"),[o,l]=L.exports.useState(new Set),[c,d]=L.exports.useState({daysLeft:0,hoursLeft:0,minutesLeft:0,totalDaysLeft:0}),f=()=>{const R=new Date,E=new Date(R.getFullYear(),R.getMonth()+1,1).getTime()-R.getTime(),x=Math.floor(E/(1e3*60*60*24)),D=Math.floor(E%(1e3*60*60*24)/(1e3*60*60)),O=Math.floor(E%(1e3*60*60)/(1e3*60));return{daysLeft:x,hoursLeft:D,minutesLeft:O,totalDaysLeft:x}},v=()=>{const R=new Date,y=`${R.getFullYear()}-${R.getMonth()}`;return localStorage.getItem(v_)!==y?(localStorage.setItem(v_,y),localStorage.removeItem(tf),!0):!1};L.exports.useEffect(()=>{try{v();const R=f();d(R);const y=setInterval(()=>{const N=f();d(N)},6e4),E=localStorage.getItem(LD),x=E?JSON.parse(E):{username:"Player",avatar:"\u{1F464}"},D=localStorage.getItem(MD),O=D?JSON.parse(D):{current:0,total:0},z=Math.floor(O.total/100)+1,V=localStorage.getItem(FD),k=V?new Set(JSON.parse(V)):new Set;l(k);let _=localStorage.getItem(tf),S=[];if(_)try{const N=JSON.parse(_);S=Array.isArray(N)?N.filter(w=>w&&typeof w.xp=="number"):[]}catch{S=[]}const I={id:"player",username:x.username,avatar:x.avatar||"\u{1F464}",xp:O.total||0,level:z};S=S.filter(N=>N&&N.id!=="player"),S.push(I),S.sort((N,w)=>(w.xp||0)-(N.xp||0));const b=S.findIndex(N=>N.id==="player")+1;return r(b),e(S),localStorage.setItem(tf,JSON.stringify(S)),()=>clearInterval(y)}catch(R){console.error("Error loading leaderboard:",R),e([])}},[]);const m=t.length>0?t:[{id:"1",username:"You",avatar:"\u{1F31F}",xp:500,level:6},{id:"2",username:"TaskMaster",avatar:"\u{1F680}",xp:1200,level:13},{id:"3",username:"FocusNinja",avatar:"\u{1F9D8}",xp:950,level:10},{id:"4",username:"ProductivityKing",avatar:"\u{1F451}",xp:850,level:9},{id:"5",username:"HabitBuilder",avatar:"\u{1F3D7}\uFE0F",xp:750,level:8}],T=i==="friends"?m.filter(R=>R.id==="player"||o.has(R.id)):m,P=T.findIndex(R=>R.id==="player")+1;return u("div",{className:"container",children:g("div",{className:"panel",style:{maxWidth:700,margin:"24px auto"},children:[g("div",{style:{marginBottom:24,textAlign:"center"},children:[u("h2",{style:{margin:"0 0 8px 0"},children:"\u{1F3C6} Leaderboards"}),u("div",{className:"subtle",children:"Compete with others. Complete tasks. Earn XP."}),g("div",{style:{marginTop:12,padding:"8px 12px",background:"rgba(99, 102, 241, 0.1)",borderRadius:6,border:"1px solid var(--primary)",fontSize:"0.85rem",color:"var(--text)"},children:["Resets Monthly \u2022 Next reset in ",c.daysLeft,"d ",c.hoursLeft,"h ",c.minutesLeft,"m"]})]}),g("div",{style:{display:"flex",gap:12,marginBottom:24,borderBottom:"1px solid var(--border)",paddingBottom:12,justifyContent:"center"},children:[u("button",{onClick:()=>s("global"),style:{padding:"8px 16px",border:"none",background:i==="global"?"var(--primary)":"transparent",color:i==="global"?"white":"var(--text)",borderRadius:6,cursor:"pointer",fontWeight:i==="global"?"bold":"normal",fontSize:"0.95rem"},children:"\u{1F30D} Global"}),u("button",{onClick:()=>s("friends"),style:{padding:"8px 16px",border:"none",background:i==="friends"?"var(--primary)":"transparent",color:i==="friends"?"white":"var(--text)",borderRadius:6,cursor:"pointer",fontWeight:i==="friends"?"bold":"normal",fontSize:"0.95rem"},children:"\u{1F465} Friends"})]}),P>0&&g("div",{style:{background:"var(--panel)",border:"2px solid var(--primary)",borderRadius:8,padding:16,marginBottom:24,textAlign:"center"},children:[u("div",{style:{fontSize:"0.9rem",color:"var(--text-secondary)",marginBottom:4},children:"YOUR RANK"}),g("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"var(--primary)"},children:["#",P]})]}),T.length===0?g("div",{style:{textAlign:"center",padding:32,color:"var(--text-secondary)"},children:[u("div",{style:{fontSize:"2rem",marginBottom:12},children:"\u{1F465}"}),u("div",{children:"No friends on the leaderboard yet!"})]}):u("div",{style:{display:"flex",flexDirection:"column",gap:12},children:T.map((R,y)=>g("div",{style:{display:"flex",alignItems:"center",gap:12,padding:12,background:"var(--panel)",borderRadius:8,border:R.id==="player"?"2px solid var(--primary)":"1px solid var(--border)"},children:[u("div",{style:{minWidth:32,display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold",fontSize:"1.2rem"},children:y===0?"\u{1F947}":y===1?"\u{1F948}":y===2?"\u{1F949}":`#${y+1}`}),u("div",{style:{fontSize:"1.8rem",minWidth:40,textAlign:"center"},children:R.avatar}),g("div",{style:{flex:1},children:[g("div",{style:{fontWeight:"bold",marginBottom:4},children:[R.username,R.id==="player"&&u("span",{style:{color:"var(--primary)",marginLeft:8},children:"(You)"})]}),g("div",{style:{fontSize:"0.85rem",color:"var(--text-secondary)"},children:["Level ",R.level]})]}),g("div",{style:{textAlign:"right",minWidth:80},children:[u("div",{style:{fontWeight:"bold",fontSize:"1.1rem",color:"var(--primary)"},children:(R.xp||0).toLocaleString()}),u("div",{style:{fontSize:"0.85rem",color:"var(--text-secondary)"},children:"XP"})]})]},R.id))}),g("div",{style:{marginTop:32,padding:16,background:"var(--panel)",borderRadius:8,textAlign:"center"},children:[u("div",{className:"subtle",style:{marginBottom:12},children:"Complete tasks and focus sessions to earn XP and climb the leaderboard!"}),u(Me,{onClick:()=>window.location.href="/",children:"Back to Dashboard"})]})]})})},__="adhd_quests_progress",UD=[{id:1,title:"Task Master",description:"Complete 5 tasks",category:"daily",progress:0,target:5,reward:{xp:50,gems:10},icon:"\u2705",completed:!1},{id:2,title:"Focus Time",description:"Use the focus timer for 30 minutes",category:"daily",progress:0,target:30,reward:{xp:30,gems:5},icon:"\u23F1\uFE0F",completed:!1},{id:3,title:"Social Butterfly",description:"Add 3 friends to your social circle",category:"weekly",progress:0,target:3,reward:{xp:100,gems:25},icon:"\u{1F465}",completed:!1},{id:4,title:"Streak Keeper",description:"Maintain a 7-day streak",category:"weekly",progress:0,target:7,reward:{xp:150,gems:30},icon:"\u{1F525}",completed:!1},{id:5,title:"Level Up",description:"Reach Level 5",category:"long-term",progress:0,target:5,reward:{xp:500,gems:100},icon:"\u2B50",completed:!1},{id:6,title:"Premium Journey",description:"Subscribe to Plus for 30 days",category:"long-term",progress:0,target:30,reward:{xp:300,gems:150},icon:"\u{1F48E}",completed:!1}],BD=()=>{const{tasks:t}=Lo(),[e,n]=L.exports.useState(()=>{const c=localStorage.getItem(__);return c?JSON.parse(c):UD});L.exports.useEffect(()=>{const c=t.filter(T=>{const P=new Date(T.dueDate).toDateString(),R=new Date().toDateString();return P===R&&T.completed}).length,f=JSON.parse(localStorage.getItem("adhd_streak")||'{"current": 0}').current||0,v=go(De()),m=e.map(T=>{let P=T.progress,R=!1;switch(T.id){case 1:P=Math.min(c,5),R=P>=5;break;case 4:P=Math.min(f,7),R=P>=7;break;case 5:P=Math.min(v,5),R=P>=5;break;default:R=T.completed;break}return{...T,progress:P,completed:T.completed||R}});n(m),localStorage.setItem(__,JSON.stringify(m))},[t]);const r=c=>{const d=e.find(f=>f.id===c);if(d&&!d.completed){tr(d.reward.xp),Xl(d.reward.gems),window.dispatchEvent(new Event("currencyUpdated"));const f=e.map(v=>v.id===c?{...v,completed:!0}:v);n(f)}},i=e.filter(c=>c.category==="daily"),s=e.filter(c=>c.category==="weekly"),o=e.filter(c=>c.category==="long-term"),l=c=>g("div",{className:"panel",style:{padding:20,background:c.completed?"linear-gradient(135deg, rgba(34, 197, 94, 0.1) 0%, rgba(59, 130, 246, 0.1) 100%)":"transparent",border:c.completed?"2px solid rgba(34, 197, 94, 0.5)":"1px solid var(--border)",display:"flex",flexDirection:"column",gap:12,opacity:c.completed?.8:1},children:[u("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:g("div",{style:{display:"flex",gap:12,alignItems:"start",flex:1},children:[u("span",{style:{fontSize:"1.5rem"},children:c.icon}),g("div",{style:{flex:1},children:[g("h4",{style:{margin:"0 0 4px 0"},children:[c.title,c.completed&&" \u2713"]}),u("p",{style:{margin:0,fontSize:"0.9rem",color:"var(--muted)"},children:c.description})]})]})}),g("div",{children:[g("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:6,fontSize:"0.85rem"},children:[u("span",{children:"Progress"}),g("span",{children:[c.progress," / ",c.target]})]}),u("div",{style:{width:"100%",height:8,background:"rgba(255,255,255,0.1)",borderRadius:4,overflow:"hidden"},children:u("div",{style:{height:"100%",width:`${Math.min(100,c.progress/c.target*100)}%`,background:"linear-gradient(90deg, var(--accent), var(--accent-2))",transition:"width 0.3s ease"}})})]}),g("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"0.9rem"},children:[g("div",{style:{display:"flex",gap:12},children:[g("span",{children:["\u{1F4E6} +",c.reward.xp," XP"]}),g("span",{children:["\u{1F48E} +",c.reward.gems," Gems"]})]}),u(Me,{onClick:()=>r(c.id),disabled:c.completed||c.progress<c.target,variant:c.completed?"ghost":void 0,title:c.progress<c.target?`Complete ${c.target-c.progress} more to claim`:"",children:c.completed?"Completed":c.progress<c.target?"Incomplete":"Claim"})]})]},c.id);return u("div",{className:"container",children:g("div",{style:{maxWidth:900,margin:"24px auto"},children:[g("div",{style:{marginBottom:32},children:[u("h1",{style:{fontSize:"2.5rem",marginBottom:8},children:"Quests"}),u("p",{style:{color:"var(--muted)",marginBottom:0},children:"Complete quests to earn XP and Gems"})]}),g("section",{style:{marginBottom:32},children:[u("h2",{style:{marginBottom:16,display:"flex",alignItems:"center",gap:8},children:"\u2600\uFE0F Daily Quests"}),u("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:16},children:i.map(l)})]}),g("section",{style:{marginBottom:32},children:[u("h2",{style:{marginBottom:16,display:"flex",alignItems:"center",gap:8},children:"\u{1F4C5} Weekly Quests"}),u("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:16},children:s.map(l)})]}),g("section",{style:{marginBottom:32},children:[u("h2",{style:{marginBottom:16,display:"flex",alignItems:"center",gap:8},children:"\u{1F3C6} Long-term Quests"}),u("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:16},children:o.map(l)})]}),u("section",{style:{marginTop:40},children:g("div",{className:"panel",style:{padding:24,display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:20},children:[g("div",{style:{textAlign:"center"},children:[u("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"var(--accent)",marginBottom:4},children:e.filter(c=>c.completed).length}),u("div",{style:{fontSize:"0.9rem",color:"var(--muted)"},children:"Quests Completed"})]}),g("div",{style:{textAlign:"center"},children:[u("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#ec4899",marginBottom:4},children:e.reduce((c,d)=>d.completed?c+d.reward.xp:c,0)}),u("div",{style:{fontSize:"0.9rem",color:"var(--muted)"},children:"Total XP Earned"})]}),g("div",{style:{textAlign:"center"},children:[u("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#06b6d4",marginBottom:4},children:e.reduce((c,d)=>d.completed?c+d.reward.gems:c,0)}),u("div",{style:{fontSize:"0.9rem",color:"var(--muted)"},children:"Total Gems Earned"})]})]})})]})})},w_="adhd_profile",E_="adhd_streak",S_="adhd_quests_progress",zD=()=>{const[t,e]=L.exports.useState(null),[n,r]=L.exports.useState(null),[i,s]=L.exports.useState([]),[o,l]=L.exports.useState([]),[c,d]=L.exports.useState(0),[f,v]=L.exports.useState(0),[m,T]=L.exports.useState([]);L.exports.useEffect(()=>{const x=localStorage.getItem(w_);x&&e(JSON.parse(x));const D=localStorage.getItem(E_);D&&r(JSON.parse(D));const O=localStorage.getItem(S_);O&&s(JSON.parse(O)),d(De()),v(pt()),T(Ku()),P()},[]);const P=()=>{const x=localStorage.getItem(w_),D=x?JSON.parse(x):{},O=localStorage.getItem(E_),z=O?JSON.parse(O):{current:0,longest:0},V=localStorage.getItem(S_),k=V?JSON.parse(V):[],_=[{title:"Total Tasks Completed",value:D.tasksCompleted||0,icon:"\u2705",description:"You've crushed it! Keep going!"},{title:"Current Streak",value:z.current||0,icon:"\u{1F525}",description:z.current>0?`${z.current} days of consistency`:"Start a new streak!"},{title:"Longest Streak",value:z.longest||0,icon:"\u2B50",description:"Your personal best!"},{title:"Quests Completed",value:k.filter(S=>S.completed).length,icon:"\u{1F3C6}",description:`${k.filter(S=>S.completed).length} of ${k.length} total`},{title:"Medals Earned",value:Ku().filter(S=>S.earned).length,icon:"\u{1F396}\uFE0F",description:"Achievements unlocked!"},{title:"Total XP Earned",value:De(),icon:"\u{1F4E6}",description:"Experience points accumulated"}];l(_)},R=i.filter(x=>x.completed).length,y=m.filter(x=>x.earned).length,E=t!=null&&t.tasksCompleted?(t.tasksCompleted/Math.max((n==null?void 0:n.longest)||1,1)).toFixed(1):0;return u("div",{className:"container",children:g("div",{style:{maxWidth:900,margin:"24px auto"},children:[g("div",{style:{marginBottom:32},children:[u("h1",{style:{fontSize:"2.5rem",marginBottom:8},children:"\u{1F4CA} Personal Insights"}),u("p",{style:{color:"var(--muted)",marginBottom:0},children:"Your journey of growth and achievement"})]}),u("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:16,marginBottom:32},children:o.map((x,D)=>g("div",{className:"panel",style:{padding:24,textAlign:"center",background:"linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(90, 208, 168, 0.1) 100%)",border:"1px solid rgba(99, 102, 241, 0.2)"},children:[u("div",{style:{fontSize:"2.5rem",marginBottom:12},children:x.icon}),u("div",{style:{fontSize:"0.9rem",color:"var(--muted)",marginBottom:8},children:x.title}),u("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"var(--accent)",marginBottom:8},children:x.value}),x.description&&u("div",{style:{fontSize:"0.8rem",color:"var(--muted)"},children:x.description})]},D))}),g("section",{style:{marginBottom:32},children:[u("h2",{style:{marginBottom:16},children:"\u{1F3AF} Achievement Summary"}),g("div",{className:"panel",style:{padding:24,display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:20},children:[g("div",{style:{textAlign:"center"},children:[u("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"var(--accent)",marginBottom:4},children:(t==null?void 0:t.tasksCompleted)||0}),u("div",{style:{fontSize:"0.9rem",color:"var(--muted)"},children:"Tasks Completed"}),E&&g("div",{style:{fontSize:"0.75rem",color:"var(--muted)",marginTop:4},children:["~",E,"/day"]})]}),g("div",{style:{textAlign:"center"},children:[g("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#ec4899",marginBottom:4},children:[R,"/",i.length]}),u("div",{style:{fontSize:"0.9rem",color:"var(--muted)"},children:"Quests Done"}),g("div",{style:{fontSize:"0.75rem",color:"var(--muted)",marginTop:4},children:[i.length>0?`${Math.round(R/i.length*100)}%`:"0%"," completed"]})]}),g("div",{style:{textAlign:"center"},children:[g("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#06b6d4",marginBottom:4},children:[y,"/",m.length]}),u("div",{style:{fontSize:"0.9rem",color:"var(--muted)"},children:"Medals Earned"}),g("div",{style:{fontSize:"0.75rem",color:"var(--muted)",marginTop:4},children:[m.length>0?`${Math.round(y/m.length*100)}%`:"0%"," unlocked"]})]}),g("div",{style:{textAlign:"center"},children:[u("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#fbbf24",marginBottom:4},children:f}),u("div",{style:{fontSize:"0.9rem",color:"var(--muted)"},children:"Gems Collected"}),u("div",{style:{fontSize:"0.75rem",color:"var(--muted)",marginTop:4},children:"\u{1F48E} In pocket"})]})]})]}),g("section",{style:{marginBottom:32},children:[u("h2",{style:{marginBottom:16},children:"\u{1F4A1} Personal Observations"}),u("div",{className:"panel",style:{padding:24},children:g("div",{style:{display:"grid",gap:16},children:[g("div",{style:{paddingBottom:16,borderBottom:"1px solid var(--border)"},children:[u("div",{style:{fontSize:"0.9rem",fontWeight:"bold",marginBottom:8},children:"\u{1F4C8} Progress Trend"}),u("div",{style:{fontSize:"0.9rem",color:"var(--muted)"},children:(t==null?void 0:t.tasksCompleted)>20?"\u{1F525} You're on a roll! Your consistency is impressive.":(t==null?void 0:t.tasksCompleted)>10?"\u{1F4AA} Great effort! You're building momentum.":"\u{1F331} Every journey starts with a single step. Keep going!"})]}),g("div",{style:{paddingBottom:16,borderBottom:"1px solid var(--border)"},children:[u("div",{style:{fontSize:"0.9rem",fontWeight:"bold",marginBottom:8},children:"\u{1F525} Streak Status"}),u("div",{style:{fontSize:"0.9rem",color:"var(--muted)"},children:(n==null?void 0:n.current)>7?`Amazing! You've maintained a ${n.current}-day streak. Don't break it! \u{1F3AF}`:(n==null?void 0:n.current)>0?`You're on a ${n.current}-day streak. Keep the momentum going!`:"Start a new streak today and build consistency!"})]}),g("div",{style:{paddingBottom:16,borderBottom:"1px solid var(--border)"},children:[u("div",{style:{fontSize:"0.9rem",fontWeight:"bold",marginBottom:8},children:"\u{1F3C6} Quest Progress"}),u("div",{style:{fontSize:"0.9rem",color:"var(--muted)"},children:R===i.length&&i.length>0?"Incredible! You've completed all available quests. You're a quest master! \u{1F389}":R>0?`You've completed ${R} quest${R>1?"s":""}. Great work! Keep completing more.`:"Start completing quests to earn rewards and achievements!"})]}),g("div",{children:[u("div",{style:{fontSize:"0.9rem",fontWeight:"bold",marginBottom:8},children:"\u{1F396}\uFE0F Achievement Status"}),u("div",{style:{fontSize:"0.9rem",color:"var(--muted)"},children:y===m.length&&m.length>0?"\u{1F31F} Perfect! You've unlocked all available medals. You are unstoppable!":y>0?`You've earned ${y} medal${y>1?"s":""}. ${m.length-y} more to unlock!`:"Earn medals by completing tasks, quests, and achieving milestones."})]})]})})]}),g("section",{children:[u("h2",{style:{marginBottom:16},children:"\u{1F4AD} Tips for Success"}),u("div",{className:"panel",style:{padding:24,background:"linear-gradient(135deg, rgba(236, 72, 153, 0.1) 0%, rgba(168, 85, 247, 0.1) 100%)"},children:g("ul",{style:{margin:0,paddingLeft:20,lineHeight:"1.8"},children:[u("li",{children:"\u2728 Focus on consistency over perfection - every small task counts!"}),u("li",{children:"\u{1F3AF} Use streaks as motivation - they compound over time"}),u("li",{children:"\u{1F3C6} Complete quests regularly for extra rewards and badges"}),u("li",{children:"\u{1F396}\uFE0F Work towards unlocking all medals for ultimate achievement"}),u("li",{children:"\u{1F48E} Collect gems and XP to unlock exclusive features in the store"}),u("li",{children:"\u{1F525} If you break a streak, don't give up - start a new one immediately"})]})})]})]})})},jD=()=>{var q,te,$,H;const[t,e]=L.exports.useState(null),[n,r]=L.exports.useState(0),[i,s]=L.exports.useState(0),[o,l]=L.exports.useState(!0),[c,d]=L.exports.useState(!1),[f,v]=L.exports.useState(""),[m,T]=L.exports.useState(!1),[P,R]=L.exports.useState(!1),[y,E]=L.exports.useState([]),[x,D]=L.exports.useState(null),O=5,z=30;L.exports.useEffect(()=>{const M=Vt();let B=Et();B?(B=nr(),B.mood||(B.mood=Ep(B)),B.color||(B.color="default"),B.skin||(B.skin="default")):B=c_("Your Pet");let Y=[B];M.forEach(ge=>{ge.id!==B.id&&Y.push(ge)}),E(Y);const ne=yo();D(ne);let ue=null;ne&&M.some(ge=>ge.id===ne)?ue=M.find(ge=>ge.id===ne)||B:ue=B,e(ue),v((ue==null?void 0:ue.name)||""),r(pt()),s(De()),l(!1)},[]),L.exports.useEffect(()=>{const M=()=>{console.log("[Pet] Pets restored from Firestore, reloading...");const Y=Vt();let ne=Et();ne?(ne=nr(),ne.mood||(ne.mood=Ep(ne)),ne.color||(ne.color="default"),ne.skin||(ne.skin="default")):ne=c_("Your Pet");let ue=[ne];Y.forEach(Ae=>{Ae.id!==ne.id&&ue.push(Ae)}),E(ue);const ge=yo();D(ge);let Ee=null;ge&&Y.some(Ae=>Ae.id===ge)?Ee=Y.find(Ae=>Ae.id===ge)||ne:Ee=ne,e(Ee),v((Ee==null?void 0:Ee.name)||""),r(pt()),s(De())},B=()=>{console.log("[Pet] Pets cleared on logout"),e(null),E([]),D(null),v("")};return window.addEventListener("pets:restored",M),window.addEventListener("pets:cleared",B),()=>{window.removeEventListener("pets:restored",M),window.removeEventListener("pets:cleared",B)}},[]);const V=M=>{if(M==="gems"&&n<O){alert("Not enough gems! You need 5 gems to feed your pet.");return}if(M==="xp"&&i<z){alert("Not enough XP! You need 30 XP to feed your pet.");return}const B=Ya(M);B&&(e(B),r(pt()),s(De()))},k=()=>{if(f.trim()&&t){const M=dD(f.trim());M&&(e(M),d(!1))}},_=M=>{const B=hD(M);B&&(e(B),T(!1))},S=M=>{const B=fD(M);B&&(e(B),R(!1))},I=()=>{if(window.confirm("Are you sure? This will reset your pet to an egg.")&&t){t.stage="egg",t.level=1,t.experience=0,t.health=50,t.hunger=30,t.happiness=80;const M=nr();M&&(e(M),E(B=>B.map(Y=>Y.id===M.id?M:Y)))}};if(o||!t)return u("div",{className:"container",style:{padding:"24px",textAlign:"center"},children:u("p",{children:"Loading your pet..."})});const b=pD(t.level),N=b>0?t.experience/b*100:100,w=t.hunger<30?"#22c55e":t.hunger<70?"#eab308":"#ef4444",Q=t.happiness>70?"#22c55e":t.happiness>40?"#eab308":"#ef4444",J=t.health>70?"#22c55e":t.health>40?"#eab308":"#ef4444",se={happy:"\u{1F604}",content:"\u{1F60A}",neutral:"\u{1F610}",sad:"\u{1F622}",excited:"\u{1F929}"};return u("div",{className:"container",children:g("div",{style:{maxWidth:700,margin:"24px auto"},children:[g("div",{style:{textAlign:"center",marginBottom:32},children:[u("h1",{style:{fontSize:"2.5rem",marginBottom:8},children:"Your Pet"}),u("p",{style:{color:"var(--muted)",marginBottom:0},children:"Care, customize, and grow your companion"})]}),y.length>0&&u("div",{className:"panel",style:{padding:16,marginBottom:24},children:g("div",{style:{marginBottom:12},children:[g("h3",{style:{margin:"0 0 12px 0",fontSize:"0.9rem",color:"var(--muted)"},children:["YOUR PETS (",y.length,")"]}),u("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(60px, 1fr))",gap:8},children:y.map(M=>{const B=(t==null?void 0:t.id)===M.id;return g("button",{onClick:()=>{Vt().find(ne=>ne.id===M.id)&&Cl(M.id),D(M.id),e(M),v(M.name)},style:{padding:"8px",borderRadius:6,border:B?"2px solid var(--accent)":"1px solid var(--border)",background:B?"rgba(167, 139, 250, 0.2)":"var(--bg)",cursor:"pointer",transition:"all 0.2s",display:"flex",flexDirection:"column",alignItems:"center",gap:4,fontSize:"0.85rem",color:"var(--text)",fontWeight:B?"bold":"normal"},children:[u("div",{style:{fontSize:"1.5rem"},children:tu(M.stage,M.color||"default",M.emoji)}),u("div",{children:M.name})]},M.id)})})]})}),g("div",{className:"panel",style:{padding:40,textAlign:"center",marginBottom:24,background:"linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(90, 208, 168, 0.1) 100%)"},children:[u("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:16,marginBottom:20},children:u("div",{style:{fontSize:"5rem",animation:"pulse 2s infinite"},children:tu(t.stage,t.color||"default",t.emoji)})}),u("div",{style:{marginBottom:16},children:c?g("div",{style:{display:"flex",gap:8,justifyContent:"center"},children:[u("input",{type:"text",className:"input",value:f,onChange:M=>v(M.target.value),onKeyDown:M=>M.key==="Enter"&&k(),autoFocus:!0,style:{maxWidth:200}}),u("button",{className:"btn primary",onClick:k,style:{padding:"6px 12px"},children:"Save"}),u("button",{className:"btn ghost",onClick:()=>{d(!1),v(t.name)},style:{padding:"6px 12px"},children:"Cancel"})]}):u("h2",{style:{fontSize:"1.8rem",marginBottom:8,cursor:"pointer"},onClick:()=>{d(!0),v(t.name)},children:t.name})}),g("p",{style:{color:"var(--muted)",marginBottom:8},children:["Level ",u("span",{style:{color:"var(--accent)",fontWeight:"bold"},children:t.level})," ",t.stage.charAt(0).toUpperCase()+t.stage.slice(1)]}),g("p",{style:{color:"var(--muted)",fontSize:"0.9rem"},children:["Mood: ",u("span",{style:{fontWeight:"bold"},children:(t.mood||"neutral").charAt(0).toUpperCase()+(t.mood||"neutral").slice(1)})," ",se[t.mood||"neutral"]]}),g("p",{style:{color:"var(--muted)",fontSize:"0.85rem"},children:["Fed ",u("span",{style:{fontWeight:"bold"},children:t.timesFeeding})," times \u2022 Skin: ",u("span",{style:{fontWeight:"bold"},children:((q=Rc[t.skin||"default"])==null?void 0:q.name)||"Default"})]})]}),g("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:12,marginBottom:24},children:[g("div",{className:"panel",style:{padding:16,textAlign:"center"},children:[u("div",{style:{fontSize:"1.5rem",marginBottom:8},children:"\u{1F356}"}),u("div",{style:{fontSize:"0.75rem",color:"var(--muted)",marginBottom:4},children:"Hunger"}),u("div",{style:{height:4,background:"var(--border)",borderRadius:2,marginBottom:4},children:u("div",{style:{height:"100%",width:`${Math.max(0,100-t.hunger)}%`,background:w,borderRadius:2,transition:"width 0.3s"}})}),g("div",{style:{fontSize:"0.85rem",fontWeight:"bold",color:w},children:[Math.round(100-t.hunger),"%"]})]}),g("div",{className:"panel",style:{padding:16,textAlign:"center"},children:[u("div",{style:{fontSize:"1.5rem",marginBottom:8},children:"\u{1F60A}"}),u("div",{style:{fontSize:"0.75rem",color:"var(--muted)",marginBottom:4},children:"Happiness"}),u("div",{style:{height:4,background:"var(--border)",borderRadius:2,marginBottom:4},children:u("div",{style:{height:"100%",width:`${t.happiness}%`,background:Q,borderRadius:2,transition:"width 0.3s"}})}),g("div",{style:{fontSize:"0.85rem",fontWeight:"bold",color:Q},children:[t.happiness,"%"]})]}),g("div",{className:"panel",style:{padding:16,textAlign:"center"},children:[u("div",{style:{fontSize:"1.5rem",marginBottom:8},children:"\u{1F49A}"}),u("div",{style:{fontSize:"0.75rem",color:"var(--muted)",marginBottom:4},children:"Health"}),u("div",{style:{height:4,background:"var(--border)",borderRadius:2,marginBottom:4},children:u("div",{style:{height:"100%",width:`${t.health}%`,background:J,borderRadius:2,transition:"width 0.3s"}})}),g("div",{style:{fontSize:"0.85rem",fontWeight:"bold",color:J},children:[t.health,"%"]})]})]}),g("div",{className:"panel",style:{padding:16,marginBottom:24},children:[g("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8,fontSize:"0.9rem"},children:[u("span",{children:"Experience"}),g("span",{style:{color:"var(--muted)"},children:[t.experience," / ",b," XP"]})]}),u("div",{style:{height:8,background:"var(--border)",borderRadius:4},children:u("div",{style:{height:"100%",width:`${N}%`,background:"linear-gradient(90deg, #6366f1, #5ad0a8)",borderRadius:4,transition:"width 0.3s"}})})]}),g("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12,marginBottom:24},children:[g("button",{onClick:()=>V("gems"),disabled:n<O,className:"btn primary",style:{padding:"14px",opacity:n<O?.5:1,cursor:n<O?"not-allowed":"pointer",textAlign:"center"},children:[u("div",{style:{fontWeight:"bold",marginBottom:4},children:"Feed with Gems"}),g("div",{style:{fontSize:"0.85rem",color:"inherit",opacity:.9},children:["\u{1F48E} ",O," (have ",n,")"]})]}),g("button",{onClick:()=>V("xp"),disabled:i<z,className:"btn primary",style:{padding:"14px",opacity:i<z?.5:1,cursor:i<z?"not-allowed":"pointer",textAlign:"center"},children:[u("div",{style:{fontWeight:"bold",marginBottom:4},children:"Feed with XP"}),g("div",{style:{fontSize:"0.85rem",color:"inherit",opacity:.9},children:["\u2B50 ",z," (have ",i,")"]})]})]}),g("div",{className:"panel",style:{padding:20,marginBottom:24},children:[u("h3",{style:{marginTop:0,marginBottom:16},children:"\u{1F3A8} Customize Your Pet"}),g("div",{style:{marginBottom:20},children:[u("div",{style:{fontSize:"0.9rem",fontWeight:"bold",marginBottom:8},children:"Pet Color"}),m?u("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:8},children:Object.entries(Qu).map(([M,B])=>g("button",{onClick:()=>_(M),className:"btn ghost",style:{padding:"12px",border:t.color===M?"2px solid var(--accent)":"2px solid transparent",display:"flex",flexDirection:"column",alignItems:"center",gap:4},children:[u("div",{style:{fontSize:"1.5rem"},children:B.emoji}),u("div",{style:{fontSize:"0.75rem"},children:B.name})]},M))}):g("button",{className:"btn ghost",onClick:()=>T(!0),style:{width:"100%"},children:[u("div",{style:{fontSize:"1.5rem",marginBottom:4},children:tu(t.stage,t.color||"default",t.emoji)}),u("div",{children:((te=Qu[t.color||"default"])==null?void 0:te.name)||"Default"})]})]}),g("div",{children:[u("div",{style:{fontSize:"0.9rem",fontWeight:"bold",marginBottom:8},children:"Pet Skin"}),P?u("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:Object.entries(Rc).map(([M,B])=>g("button",{onClick:()=>S(M),className:"btn ghost",style:{padding:"12px",border:t.skin===M?"2px solid var(--accent)":"2px solid transparent",textAlign:"left"},children:[u("div",{style:{fontWeight:"bold",marginBottom:2},children:B.name}),u("div",{style:{fontSize:"0.8rem",color:"var(--muted)"},children:B.description})]},M))}):g("button",{className:"btn ghost",onClick:()=>R(!0),style:{width:"100%",textAlign:"left"},children:[u("div",{style:{fontWeight:"bold",marginBottom:2},children:(($=Rc[t.skin||"default"])==null?void 0:$.name)||"Default"}),u("div",{style:{fontSize:"0.8rem",color:"var(--muted)"},children:((H=Rc[t.skin||"default"])==null?void 0:H.description)||"Classic pet"})]})]})]}),g("div",{className:"panel",style:{padding:16,marginBottom:24},children:[u("h3",{style:{marginTop:0},children:"\u{1F4A1} Pet Care Tips"}),g("ul",{style:{margin:0,paddingLeft:20,fontSize:"0.9rem",lineHeight:"1.6"},children:[u("li",{children:"Feed your pet regularly to keep it happy and healthy"}),u("li",{children:"Choose between gems or XP to feed your pet (both work!)"}),u("li",{children:"Your pet gains XP whenever you feed it, helping it grow"}),u("li",{children:"Each pet stage unlocks at specific levels: Baby (2), Teen (3), Adult (4), Legendary (5+)"}),u("li",{children:"Customize your pet's color and skin to make it unique!"}),u("li",{children:"Pet mood depends on hunger, happiness, and health"})]})]}),u("button",{onClick:I,className:"btn ghost",style:{width:"100%",padding:"8px",fontSize:"0.85rem",color:"var(--muted)"},children:"Reset Pet"})]})})};function $D(){const[t,e]=L.exports.useState("forgiveness"),[n,r]=L.exports.useState([]),[i,s]=L.exports.useState(0),[o,l]=L.exports.useState(0),[c,d]=L.exports.useState(null);L.exports.useEffect(()=>{f()},[]);const f=()=>{r(Yd()),s(De()),l(pt())},v=T=>{const P=Fr[T];if(!P)return;if(Jh(T)){alert("Skill already purchased!");return}if(!br(T)){Fr[T],alert("Prerequisites not met! You need to purchase prerequisite skills first.");return}if(!(P.costType==="xp"&&i>=P.cost||P.costType==="gems"&&o>=P.cost)){alert(`Not enough ${P.costType.toUpperCase()} to purchase this skill!`);return}vD(T)&&(f(),d(null))},m=yD(t);return g("div",{style:{padding:"1.5rem",maxWidth:"1200px",margin:"0 auto"},children:[g("div",{style:{marginBottom:"2rem"},children:[u("h1",{style:{marginBottom:"0.5rem",fontSize:"2rem"},children:"Skill Tree"}),u("p",{style:{color:"var(--text-secondary)",marginBottom:"1.5rem"},children:"Unlock powerful skills to enhance your productivity and pet care"}),g("div",{style:{display:"flex",gap:"1rem",marginBottom:"1.5rem"},children:[g("div",{style:{padding:"0.75rem 1rem",backgroundColor:"var(--panel)",border:"1px solid var(--border)",borderRadius:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u("span",{style:{fontSize:"1.25rem"},children:"\u2B50"}),g("div",{children:[u("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:"XP Available"}),u("div",{style:{fontWeight:"bold",fontSize:"1.25rem"},children:i})]})]}),g("div",{style:{padding:"0.75rem 1rem",backgroundColor:"var(--panel)",border:"1px solid var(--border)",borderRadius:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u("span",{style:{fontSize:"1.25rem"},children:"\u{1F48E}"}),g("div",{children:[u("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:"Gems Available"}),u("div",{style:{fontWeight:"bold",fontSize:"1.25rem"},children:o})]})]})]})]}),g("div",{style:{display:"flex",gap:"0.75rem",marginBottom:"2rem",borderBottom:"1px solid var(--border)",paddingBottom:"1rem"},children:[u("button",{onClick:()=>e("forgiveness"),style:{padding:"0.75rem 1.5rem",borderRadius:"0.5rem",border:"none",backgroundColor:t==="forgiveness"?"#3B82F6":"var(--panel)",color:t==="forgiveness"?"white":"var(--text)",cursor:"pointer",fontSize:"1rem",fontWeight:t==="forgiveness"?"bold":"normal",transition:"all 0.2s ease"},children:"\u{1F91D} Forgiveness Tree"}),u("button",{onClick:()=>e("xp_mastery"),style:{padding:"0.75rem 1.5rem",borderRadius:"0.5rem",border:"none",backgroundColor:t==="xp_mastery"?"#F59E0B":"var(--panel)",color:t==="xp_mastery"?"white":"var(--text)",cursor:"pointer",fontSize:"1rem",fontWeight:t==="xp_mastery"?"bold":"normal",transition:"all 0.2s ease"},children:"\u{1F525} XP Mastery"}),u("button",{onClick:()=>e("pet_power"),style:{padding:"0.75rem 1.5rem",borderRadius:"0.5rem",border:"none",backgroundColor:t==="pet_power"?"#10B981":"var(--panel)",color:t==="pet_power"?"white":"var(--text)",cursor:"pointer",fontSize:"1rem",fontWeight:t==="pet_power"?"bold":"normal",transition:"all 0.2s ease"},children:"\u{1F43E} Pet Power"})]}),u("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))",gap:"0.75rem"},children:m.map(T=>{const P=T.purchased,R=br(T.id)&&(T.costType==="xp"&&i>=T.cost||T.costType==="gems"&&o>=T.cost);return g("div",{onClick:()=>d(T),style:{padding:"1rem",backgroundColor:P?"var(--primary)10":"var(--panel)",border:P?"2px solid var(--primary)":"1px solid var(--border)",borderRadius:"0.75rem",cursor:"pointer",transition:"all 0.2s ease",opacity:P?1:.8,position:"relative",display:"flex",flexDirection:"column",height:"100%"},onMouseEnter:y=>{y.currentTarget.style.transform="translateY(-4px)",y.currentTarget.style.boxShadow="0 8px 16px rgba(0,0,0,0.1)"},onMouseLeave:y=>{y.currentTarget.style.transform="translateY(0)",y.currentTarget.style.boxShadow="none"},children:[P&&u("div",{style:{position:"absolute",top:"0.75rem",right:"0.75rem",fontSize:"1.5rem"},children:"\u2705"}),u("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:T.icon}),u("h3",{style:{marginBottom:"0.25rem",fontSize:"0.95rem",fontWeight:"bold"},children:T.name}),u("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginBottom:"0.75rem"},children:T.description}),g("div",{style:{padding:"0.5rem",backgroundColor:"var(--background)",borderRadius:"0.5rem",marginBottom:"0.75rem",fontSize:"0.8rem",fontWeight:"bold"},children:[T.costType==="xp"?"\u2B50":"\u{1F48E}"," ",T.cost," ",T.costType.toUpperCase()]}),T.level>1&&g("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:"0.5rem"},children:["Level ",T.level," Skill"]}),T.prerequisites&&T.prerequisites.length>0&&!P&&g("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)",marginBottom:"0.5rem",padding:"0.4rem",backgroundColor:"var(--background)",borderRadius:"0.25rem"},children:["Requires: ",T.prerequisites.map(y=>{var E;return(E=Fr[y])==null?void 0:E.name}).join(", ")]}),u("div",{style:{flex:1}}),!P&&u("button",{onClick:y=>{y.stopPropagation(),v(T.id)},disabled:!R,style:{width:"100%",marginTop:"0.75rem",padding:"0.6rem",backgroundColor:R?"var(--primary)":"#666",color:"white",border:R?"2px solid var(--primary)":"2px solid #666",borderRadius:"0.5rem",cursor:R?"pointer":"not-allowed",fontWeight:"bold",fontSize:"0.85rem",opacity:R?1:.6,transition:"all 0.2s ease",textTransform:"uppercase",letterSpacing:"0.5px"},onMouseEnter:y=>{R&&(y.currentTarget.style.transform="translateY(-2px)",y.currentTarget.style.boxShadow="0 4px 12px rgba(59, 130, 246, 0.3)")},onMouseLeave:y=>{R&&(y.currentTarget.style.transform="translateY(0)",y.currentTarget.style.boxShadow="none")},children:br(T.id)?"Unlock":"Locked"}),P&&u("div",{style:{width:"100%",marginTop:"0.75rem",padding:"0.6rem",backgroundColor:"var(--primary)",color:"white",border:"none",borderRadius:"0.5rem",fontWeight:"bold",textAlign:"center",fontSize:"0.85rem"},children:"Unlocked"})]},T.id)})}),c&&u("div",{onClick:()=>d(null),style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:g("div",{onClick:T=>T.stopPropagation(),style:{backgroundColor:"var(--panel)",border:"1px solid var(--border)",borderRadius:"1rem",padding:"2rem",maxWidth:"500px",width:"90%",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.3)"},children:[g("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1.5rem"},children:[u("div",{style:{fontSize:"3rem"},children:c.icon}),g("div",{children:[u("h2",{style:{marginBottom:"0.25rem",fontSize:"1.5rem"},children:c.name}),g("p",{style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:[c.tree.replace("_"," ")," Tree"]})]})]}),u("p",{style:{marginBottom:"1.5rem",fontSize:"1rem",lineHeight:"1.6"},children:c.description}),g("div",{style:{marginBottom:"1.5rem"},children:[u("h3",{style:{marginBottom:"0.75rem",fontWeight:"bold"},children:"Effects:"}),u("ul",{style:{marginLeft:"1.5rem",color:"var(--text-secondary)"},children:c.effects.map((T,P)=>u("li",{style:{marginBottom:"0.5rem"},children:T},P))})]}),g("div",{style:{marginBottom:"1.5rem",padding:"1rem",backgroundColor:"var(--background)",borderRadius:"0.5rem"},children:[g("div",{style:{marginBottom:"0.75rem"},children:[u("strong",{children:"Cost:"})," ",c.costType==="xp"?"\u2B50":"\u{1F48E}"," ",c.cost," ",c.costType.toUpperCase()]}),c.prerequisites&&c.prerequisites.length>0&&g("div",{children:[u("strong",{children:"Prerequisites:"}),u("ul",{style:{marginLeft:"1.5rem",marginTop:"0.5rem"},children:c.prerequisites.map(T=>{const P=Fr[T],R=Jh(T);return g("li",{style:{color:R?"var(--primary)":"var(--text-secondary)"},children:[R?"\u2705":"\u2B1C"," ",P==null?void 0:P.name]},T)})})]})]}),g("div",{style:{display:"flex",gap:"1rem"},children:[!Jh(c.id)&&u("button",{onClick:()=>{v(c.id)},disabled:!br(c.id)||c.costType==="xp"&&i<c.cost||c.costType==="gems"&&o<c.cost,style:{flex:1,padding:"0.75rem",backgroundColor:br(c.id)&&(c.costType==="xp"&&i>=c.cost||c.costType==="gems"&&o>=c.cost)?"var(--primary)":"var(--text-secondary)",color:"white",border:"none",borderRadius:"0.5rem",cursor:"pointer",fontWeight:"bold",opacity:br(c.id)&&(c.costType==="xp"&&i>=c.cost||c.costType==="gems"&&o>=c.cost)?1:.5},children:br(c.id)?"Unlock Skill":"Prerequisites Not Met"}),u("button",{onClick:()=>d(null),style:{flex:1,padding:"0.75rem",backgroundColor:"var(--panel)",border:"1px solid var(--border)",borderRadius:"0.5rem",cursor:"pointer",fontWeight:"bold"},children:"Close"})]})]})})]})}const WD=()=>{try{const t=new(window.AudioContext||window.webkitAudioContext),e=t.currentTime;[{freq:523.25,time:0,duration:.1},{freq:659.25,time:.1,duration:.1},{freq:783.99,time:.2,duration:.2},{freq:1046.5,time:.4,duration:.3}].forEach(r=>{const i=t.createOscillator(),s=t.createGain();i.connect(s),s.connect(t.destination),i.frequency.value=r.freq,i.type="sine",s.gain.setValueAtTime(.3,e+r.time),s.gain.exponentialRampToValueAtTime(.01,e+r.time+r.duration),i.start(e+r.time),i.stop(e+r.time+r.duration)})}catch{console.log("Audio context not available")}},HD=()=>{try{const t=new(window.AudioContext||window.webkitAudioContext),e=t.currentTime;[{freq:900,time:0,duration:.12},{freq:1100,time:.15,duration:.15}].forEach(r=>{const i=t.createOscillator(),s=t.createGain();i.connect(s),s.connect(t.destination),i.frequency.value=r.freq,i.type="sine",s.gain.setValueAtTime(.25,e+r.time),s.gain.exponentialRampToValueAtTime(.01,e+r.time+r.duration),i.start(e+r.time),i.stop(e+r.time+r.duration)})}catch{console.log("Audio context not available")}},qD=({isOpen:t,onClose:e,onOpen:n})=>{const[r,i]=L.exports.useState(!1),[s,o]=L.exports.useState(null),[l,c]=L.exports.useState(0),d=[{type:"xp",amount:50},{type:"xp",amount:75},{type:"gems",amount:5},{type:"xp",amount:100},{type:"gems",amount:10},{type:"xp",amount:60}],f=()=>{if(r)return;i(!0),c(0);let m=0;const T=setInterval(()=>{m+=1,c(m%d.length)},100);setTimeout(()=>{clearInterval(T);const P=d[Math.floor(Math.random()*d.length)];o(P),n(P),setTimeout(()=>{i(!1),o(null),e()},1500)},2e3)},v=m=>m.type==="xp"?`${m.amount} XP`:`${m.amount} \u{1F48E}`;return t?g("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:99999},children:[g("div",{className:"panel",style:{maxWidth:400,padding:40,backgroundColor:"var(--panel)",boxShadow:"0 8px 32px rgba(0,0,0,0.3)",textAlign:"center"},children:[u("h2",{style:{margin:"0 0 24px 0",fontSize:"1.5rem"},children:"\u{1F389} Critical Hit!"}),u("p",{style:{margin:"0 0 32px 0",color:"var(--muted)"},children:"You've earned a Free Bronze Crate!"}),u("div",{style:{fontSize:"4rem",marginBottom:24,animation:r?"pulse 0.3s infinite":"none"},children:"\u{1F4E6}"}),r&&u("div",{style:{marginBottom:24,fontSize:"1.2rem",fontWeight:"bold",color:"var(--accent)",minHeight:32},children:v(d[l])}),s&&u("div",{style:{marginBottom:24,fontSize:"1.5rem",fontWeight:"bold",color:"var(--accent-2)",minHeight:32,animation:"pulse 0.5s ease-out"},children:v(s)}),u("button",{className:"btn primary",onClick:f,disabled:r,style:{width:"100%",padding:"12px 24px",fontSize:"1rem",opacity:r?.6:1,cursor:r?"not-allowed":"pointer"},children:r?"Opening...":"Open Crate"}),u("button",{className:"btn ghost",onClick:e,disabled:r,style:{width:"100%",marginTop:12,opacity:r?.5:1,cursor:r?"not-allowed":"pointer"},children:"Close"})]}),u("style",{children:`
        @keyframes pulse {
          0% { transform: scale(1); }
          50% { transform: scale(1.05); }
          100% { transform: scale(1); }
        }
      `})]}):null},GD=()=>{const[t,e]=L.exports.useState(De()),n=L.exports.useRef(go(t)),[r,i]=L.exports.useState(!1),[s,o]=L.exports.useState([]),[l,c]=L.exports.useState([]),[d,f]=L.exports.useState(!1),v=72,m=go(t),T=sD(t),P=oD(t),R=iD(t),y=P>0?Math.max(0,Math.min(100,Math.round(T/P*100))):0;return L.exports.useEffect(()=>{const D=z=>{var V,k;return e((k=(V=z.detail)==null?void 0:V.xp)!=null?k:De())},O=z=>{var I,b,N,w,Q,J;const V=(b=(I=z.detail)==null?void 0:I.amount)!=null?b:0,k=(w=(N=z.detail)==null?void 0:N.isCritical)!=null?w:!1,_=(J=(Q=z.detail)==null?void 0:Q.crateReward)!=null?J:!1,S=Date.now();k&&HD(),_&&f(!0),c(se=>[{id:S,amount:V,isCritical:k},...se].slice(0,5)),setTimeout(()=>{c(se=>se.filter(q=>q.id!==S))},4200)};return window.addEventListener("xp:update",D),window.addEventListener("xp:granted",O),()=>{window.removeEventListener("xp:update",D),window.removeEventListener("xp:granted",O)}},[]),L.exports.useEffect(()=>{const E=n.current;if(m>E){WD(),i(!0),o(Array.from({length:20},(O,z)=>z));const x=setTimeout(()=>i(!1),2500),D=setTimeout(()=>o([]),2600);return()=>{clearTimeout(x),clearTimeout(D)}}n.current=m},[m]),g(Wt,{children:[r&&u("div",{style:{position:"fixed",bottom:"100px",left:"50%",transform:"translateX(-50%)",pointerEvents:"none",zIndex:1e4,display:"block",visibility:"visible"},children:g("div",{className:"congrats-text",children:["Level Up! \u2014 Lv ",m]})}),s.length>0&&u("div",{"aria-hidden":!0,style:{position:"fixed",bottom:"100px",left:"0",right:"0",height:"80px",pointerEvents:"none",overflow:"visible",zIndex:9999,display:"block",visibility:"visible"},children:s.map(E=>u("span",{className:"confetti",style:{["--i"]:String(E%10)}},E))}),l.map((E,x)=>g("div",{className:`xp-popup show xp-bounce ${E.isCritical?"critical":""}`,role:"status","aria-live":"polite",style:{bottom:`${120+x*v}px`},children:[g("span",{className:"amount",children:["+",E.amount]}),E.isCritical&&u("span",{className:"critical-badge",style:{marginLeft:4,fontWeight:"bold",color:"#fbbf24"},children:"2x"}),u("span",{className:"label",style:{marginLeft:8},children:"XP"})]},E.id)),u("div",{className:"xp-footer","aria-live":"polite",children:g("div",{className:"xp-inner panel",style:{position:"relative",overflow:"visible"},children:[g("div",{className:"xp-left",children:[g("div",{className:"xp-level",children:["Lv ",m]}),g("div",{className:"xp-text",children:[t," XP"]})]}),u("div",{className:"xp-track","aria-hidden":!0,children:u("div",{className:"xp-fill",style:{width:`${y}%`}})}),g("div",{style:{textAlign:"center",fontSize:"0.75rem",color:"var(--muted)",marginTop:6},children:[R," XP to next level"]}),u("div",{className:"xp-actions"})]})}),u(qD,{isOpen:d,onClose:()=>f(!1),onOpen:E=>{localStorage.setItem("adhd_bronze_crate_last_opened","0"),window.dispatchEvent(new CustomEvent("currencyUpdated"))}})]})},KD=({open:t,onClose:e})=>g(Wt,{children:[u("aside",{className:`sidebar ${t?"open":""}`,"aria-hidden":!t,children:g("div",{className:"sidebar-inner panel",children:[g("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12},children:[u("h4",{style:{margin:0},children:"Menu"}),u("button",{className:"btn ghost",onClick:e,"aria-label":"Close menu",children:"\u2715"})]}),g("nav",{className:"sidebar-nav",children:[u(Hn,{to:"/",onClick:e,className:"sidebar-link",children:"Dashboard"}),u(Hn,{to:"/quests",onClick:e,className:"sidebar-link",children:"Quests"}),u(Hn,{to:"/insights",onClick:e,className:"sidebar-link",children:"Personal Insights"}),u(Hn,{to:"/skills",onClick:e,className:"sidebar-link",children:"Skill Tree"}),u(Hn,{to:"/pet",onClick:e,className:"sidebar-link",children:"My Pet"}),u(Hn,{to:"/store",onClick:e,className:"sidebar-link",children:"Store"}),u(Hn,{to:"/leaderboards",onClick:e,className:"sidebar-link",children:"Leaderboards"}),u(Hn,{to:"/settings",onClick:e,className:"sidebar-link",children:"Settings"})]})]})}),u("div",{className:`sidebar-backdrop ${t?"open":""}`,onClick:e})]}),XD=(t,e,n)=>{try{const r=Ul(sn,"messages"),i=po(r,ci("senderUid","in",[t,e]),ci("recipientUid","in",[t,e]),mp("createdAt","asc"));return CS(i,o=>{const l=o.docs.map(c=>({id:c.id,...c.data()})).filter(c=>c.senderUid===t&&c.recipientUid===e||c.senderUid===e&&c.recipientUid===t);n(l)})}catch(r){throw console.error("Error subscribing to conversation:",r),r}},QD=(t,e)=>{try{const n=Ul(sn,"messages"),r=po(n,ci("senderUid","==",t),mp("createdAt","desc"));return CS(r,async s=>{const o=new Map;for(const f of s.docs){const v=f.data(),m=v.recipientUid,T=v.recipientUsername;o.has(m)||o.set(m,{friendId:m,friendUid:m,friendUsername:T,lastMessage:v.text,lastMessageTime:v.timestamp,unreadCount:0})}const l=po(n,ci("recipientUid","==",t),mp("createdAt","desc")),c=await Wd(l);for(const f of c.docs){const v=f.data(),m=v.senderUid,T=v.senderUsername;if(!o.has(m))o.set(m,{friendId:m,friendUid:m,friendUsername:T,lastMessage:v.text,lastMessageTime:v.timestamp,unreadCount:v.read?0:1});else{const P=o.get(m);v.timestamp.toMillis()>P.lastMessageTime.toMillis()&&(P.lastMessage=v.text,P.lastMessageTime=v.timestamp)}}const d=Array.from(o.values()).sort((f,v)=>v.lastMessageTime.toMillis()-f.lastMessageTime.toMillis());e(d)})}catch(n){throw console.error("Error subscribing to conversations:",n),n}},YD=async(t,e)=>{try{const n=Ul(sn,"messages"),r=po(n,ci("senderUid","in",[t,e]),ci("recipientUid","in",[t,e])),s=(await Wd(r)).docs.filter(o=>{const l=o.data();return l.senderUid===t&&l.recipientUid===e||l.senderUid===e&&l.recipientUid===t}).map(o=>NR(o.ref));await Promise.all(s)}catch(n){throw console.error("Error deleting conversation:",n),n}},JD=async t=>{try{const n=Oo().currentUser;if(!n)throw new Error("User not authenticated");const r=Ul(sn,"users"),i=po(r,ci("username","==",t));return(await Wd(i)).docs.map(l=>({uid:l.id,...l.data()})).filter(l=>l.uid!==n.uid)}catch(e){throw console.error("Error searching users:",e),e}},ZD=async t=>{try{const e=await zl(ls(sn,"users",t));return e.exists()?{uid:e.id,...e.data()}:null}catch(e){throw console.error("Error getting user profile:",e),e}},T_="adhd_friends",eO=({open:t,onClose:e,currentProfile:n})=>{const[r,i]=L.exports.useState("friends"),[s,o]=L.exports.useState(null),[l,c]=L.exports.useState([]),[d,f]=L.exports.useState(""),[v,m]=L.exports.useState(""),[T,P]=L.exports.useState([]),[R,y]=L.exports.useState(null),[E,x]=L.exports.useState(""),[D,O]=L.exports.useState(!1),[z,V]=L.exports.useState([]),[k,_]=L.exports.useState(!1),S=["\u{1F600}","\u{1F602}","\u{1F60D}","\u{1F914}","\u{1F60E}","\u{1F389}","\u{1F525}","\u{1F44D}","\u2764\uFE0F","\u2728","\u{1F680}","\u{1F4AA}","\u{1F91D}","\u{1F605}","\u{1F38A}","\u{1F4AF}"],b=Oo().currentUser;L.exports.useEffect(()=>{if(!b){o(null);return}(async()=>{try{const te=await ZD(b.uid);te&&o(te)}catch(te){console.error("Error loading profile:",te)}})();try{const te=QD(b.uid,$=>{V($)});return()=>te()}catch(te){console.error("Error subscribing to conversations:",te)}},[b]);const N=async()=>{if(m(""),!d.trim()){m("Username is required");return}if(!b){m("You must be logged in");return}try{_(!0);const q=await JD(d.trim());if(q.length===0){m("User not found");return}const te=q[0];if(l.some(B=>B.uid===te.uid)){m("Already friends with this user");return}const $={id:te.uid,uid:te.uid,username:te.username,hashtag:te.hashtag,avatar:te.avatar||"\u{1F464}"};c([...l,$]),f("");const H=l.concat($),M=new Set(H.map(B=>B.uid));localStorage.setItem(T_,JSON.stringify(Array.from(M)))}catch(q){console.error("Error adding friend:",q),m("Failed to add friend")}finally{_(!1)}},w=q=>{const te=l.filter(H=>H.uid!==q);c(te);const $=new Set(te.map(H=>H.uid));localStorage.setItem(T_,JSON.stringify(Array.from($))),(R==null?void 0:R.uid)===q&&y(null)},Q=async()=>{if(!(!E.trim()||!R||!b||!s))try{_(!0),await Q(R.uid,R.username,E,s.username),x("")}catch(q){console.error("Error sending message:",q),m("Failed to send message")}finally{_(!1)}},J=q=>{x(E+q),O(!1)},se=async q=>{if(!!b)try{await YD(b.uid,q),(R==null?void 0:R.uid)===q&&y(null)}catch(te){console.error("Error deleting conversation:",te),m("Failed to delete conversation")}};return L.exports.useEffect(()=>{if(!R||!b){P([]);return}try{const q=XD(b.uid,R.uid,te=>{P(te)});return()=>q()}catch(q){console.error("Error subscribing to conversation:",q)}},[R,b]),g(Wt,{children:[u("aside",{className:`sidebar ${t?"open":""}`,"aria-hidden":!t,style:{left:"auto",right:0,transform:t?"translateX(0)":"translateX(110%)"},children:g("div",{className:"sidebar-inner panel",children:[g("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12,textAlign:"center"},children:[u("h4",{style:{margin:0,flex:1,fontSize:"1.3rem"},children:"\u{1F465} Social"}),u("button",{onClick:()=>{console.log("Close button clicked, calling onClose"),e()},className:"btn ghost","aria-label":"Close menu",children:"\u2715"})]}),g("div",{style:{display:"flex",gap:8,marginBottom:16,borderBottom:"1px solid var(--border)",paddingBottom:8},children:[u("button",{onClick:()=>i("friends"),style:{flex:1,padding:"6px 12px",border:"none",background:r==="friends"?"var(--primary)":"transparent",color:r==="friends"?"white":"var(--text)",borderRadius:6,cursor:"pointer",fontWeight:r==="friends"?"bold":"normal",fontSize:"0.9rem"},children:"Friends"}),u("button",{onClick:()=>i("messages"),style:{flex:1,padding:"6px 12px",border:"none",background:r==="messages"?"var(--primary)":"transparent",color:r==="messages"?"white":"var(--text)",borderRadius:6,cursor:"pointer",fontWeight:r==="messages"?"bold":"normal",fontSize:"0.9rem"},children:"Messages"})]}),r==="friends"&&g("div",{children:[g("div",{style:{marginBottom:16},children:[u("div",{style:{display:"flex",gap:8,marginBottom:8},children:u("input",{type:"text",placeholder:"Enter username",value:d,onChange:q=>{f(q.target.value),m("")},onKeyPress:q=>q.key==="Enter"&&N(),className:"input",style:{flex:1},disabled:k})}),v&&u("div",{style:{color:"var(--danger, #ff6b6b)",fontSize:"0.85rem",padding:8,background:"rgba(255, 107, 107, 0.1)",borderRadius:4,marginBottom:8},children:v}),u("button",{onClick:N,className:"btn",style:{width:"100%"},disabled:k,children:k?"Adding...":"Add Friend"})]}),g("div",{style:{display:"flex",flexDirection:"column",gap:12,maxHeight:400,overflowY:"auto"},children:[s&&g("div",{style:{display:"flex",alignItems:"center",gap:8,padding:12,background:"linear-gradient(135deg, var(--accent) 0%, var(--accent-2) 100%)",borderRadius:8,border:"2px solid var(--accent-2)",boxShadow:"0 4px 12px rgba(99, 102, 241, 0.3)",position:"relative",overflow:"hidden"},children:[u("div",{style:{position:"absolute",top:0,right:-20,width:100,height:100,background:"rgba(255,255,255,0.1)",borderRadius:"50%",pointerEvents:"none"}}),u("div",{style:{fontSize:"1.5rem",position:"relative",zIndex:1},children:s.avatar}),g("div",{style:{flex:1,position:"relative",zIndex:1},children:[g("div",{style:{fontWeight:"bold",fontSize:"0.95rem",color:"white"},children:[s.username,g("span",{style:{color:"rgba(255,255,255,0.8)",marginLeft:4},children:["#",s.hashtag]})]}),u("div",{style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.7)",fontWeight:500,letterSpacing:.5},children:"YOU"})]})]}),l.length===0?u("div",{style:{textAlign:"center",color:"var(--text-secondary)",padding:16},children:"No friends yet. Add one to get started!"}):l.map(q=>g("div",{style:{display:"flex",alignItems:"center",gap:8,padding:8,background:"var(--panel)",borderRadius:6,border:"1px solid var(--border)"},children:[u("div",{style:{fontSize:"1.2rem"},children:q.avatar}),u("div",{style:{flex:1},children:g("div",{style:{fontWeight:"bold",fontSize:"0.9rem"},children:[q.username,g("span",{style:{color:"var(--muted)",marginLeft:4},children:["#",q.hashtag]})]})}),u("button",{onClick:()=>{y(q),i("messages")},className:"btn ghost",style:{padding:"4px 8px",fontSize:"0.8rem"},children:"\u{1F4AC}"}),u("button",{onClick:()=>w(q.uid),className:"btn ghost",style:{padding:"4px 8px",fontSize:"0.8rem",color:"var(--danger, #ff6b6b)"},children:"\u2715"})]},q.uid))]})]}),r==="messages"&&u("div",{style:{display:"flex",flexDirection:"column",height:"calc(100% - 60px)"},children:R?g(Wt,{children:[g("div",{style:{marginBottom:12,paddingBottom:12,borderBottom:"1px solid var(--border)"},children:[u("button",{onClick:()=>y(null),className:"btn ghost",style:{marginBottom:8},children:"\u2190 Back"}),g("div",{style:{fontWeight:"bold"},children:[R.username,g("span",{style:{color:"var(--muted)",marginLeft:4},children:["#",R.hashtag]})]})]}),u("div",{style:{flex:1,overflowY:"auto",marginBottom:12,minHeight:200,maxHeight:300,padding:8,background:"var(--panel)",borderRadius:6},children:T.length===0?u("div",{style:{textAlign:"center",color:"var(--text-secondary)",padding:16},children:"No messages yet. Start a conversation!"}):T.map(q=>g("div",{style:{marginBottom:8,padding:8,background:q.senderUid===(b==null?void 0:b.uid)?"var(--primary)":"var(--border)",borderRadius:6,color:q.senderUid===(b==null?void 0:b.uid)?"white":"var(--text)",textAlign:q.senderUid===(b==null?void 0:b.uid)?"right":"left"},children:[u("div",{style:{fontSize:"0.75rem",opacity:.7,marginBottom:4},children:new Date(q.createdAt).toLocaleTimeString()}),u("div",{children:q.text})]},q.id))}),g("div",{style:{display:"flex",gap:8},children:[u("input",{type:"text",placeholder:"Type message...",value:E,onChange:q=>x(q.target.value),onKeyPress:q=>q.key==="Enter"&&Q(),className:"input",style:{flex:1},disabled:k}),u("button",{onClick:()=>O(!D),className:"btn ghost",style:{padding:"8px 12px"},title:"Add emoji",children:"\u{1F60A}"}),u("button",{onClick:Q,className:"btn",style:{padding:"8px 12px"},disabled:k,children:k?"...":"Send"})]}),D&&u("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:6,padding:8,background:"var(--panel)",border:"1px solid var(--border)",borderRadius:6,marginTop:8},children:S.map((q,te)=>u("button",{onClick:()=>J(q),style:{padding:"6px",fontSize:"1.5rem",background:"transparent",border:"1px solid var(--border)",borderRadius:4,cursor:"pointer",transition:"all 0.2s"},onMouseEnter:$=>{$.currentTarget.style.background="var(--primary)",$.currentTarget.style.transform="scale(1.2)"},onMouseLeave:$=>{$.currentTarget.style.background="transparent",$.currentTarget.style.transform="scale(1)"},children:q},te))})]}):u("div",{style:{display:"flex",flexDirection:"column",gap:8,overflowY:"auto"},children:z.length===0?u("div",{style:{textAlign:"center",color:"var(--text-secondary)",padding:16},children:"No messages yet. Start a conversation from the Friends tab!"}):z.map(q=>{const te=l.find($=>$.uid===q.friendUid);return te?g("div",{style:{display:"flex",gap:12,alignItems:"center"},children:[g("button",{onClick:()=>y(te),style:{display:"flex",gap:12,padding:12,background:"linear-gradient(135deg, var(--accent) 0%, rgba(99, 102, 241, 0.1) 100%)",border:"1px solid var(--accent)",borderRadius:8,cursor:"pointer",textAlign:"left",transition:"all 0.2s",alignItems:"center",flex:1},onMouseEnter:$=>{$.currentTarget.style.background="linear-gradient(135deg, var(--accent) 0%, rgba(99, 102, 241, 0.2) 100%)",$.currentTarget.style.boxShadow="0 4px 12px rgba(99, 102, 241, 0.2)"},onMouseLeave:$=>{$.currentTarget.style.background="linear-gradient(135deg, var(--accent) 0%, rgba(99, 102, 241, 0.1) 100%)",$.currentTarget.style.boxShadow="none"},children:[u("div",{style:{fontSize:"2rem",flexShrink:0,lineHeight:1},children:te.avatar}),g("div",{style:{flex:1,minWidth:0},children:[u("div",{style:{fontWeight:"bold",fontSize:"0.95rem",color:"white",marginBottom:4},children:te.username}),u("div",{style:{fontSize:"0.8rem",color:"rgba(255, 255, 255, 0.8)",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",marginBottom:4},children:u("span",{style:{fontWeight:"500"},children:q.lastMessage.substring(0,30)})}),u("div",{style:{fontSize:"0.7rem",color:"rgba(255, 255, 255, 0.5)"},children:new Date(q.lastMessageTime.toMillis()).toLocaleDateString()})]})]}),u("button",{onClick:()=>se(q.friendUid),className:"btn ghost",style:{padding:"6px 8px",fontSize:"1rem",color:"var(--danger, #ff6b6b)",flexShrink:0,transition:"all 0.2s"},title:"Delete conversation",onMouseEnter:$=>{$.currentTarget.style.background="rgba(255, 107, 107, 0.2)"},onMouseLeave:$=>{$.currentTarget.style.background="transparent"},children:"\u{1F5D1}\uFE0F"})]},q.friendUid):null})})})]})}),u("div",{className:`sidebar-backdrop ${t?"open":""}`,onClick:e})]})},I_="adhd_quests_progress",tO=({open:t,onClose:e})=>{const n=Ow(),[r,i]=L.exports.useState(()=>{const c=localStorage.getItem(I_);return c?JSON.parse(c):[]});L.exports.useEffect(()=>{if(t){const c=localStorage.getItem(I_);c&&i(JSON.parse(c))}},[t]);const s=r.filter(c=>c.completed).length,o=r.filter(c=>c.category==="daily"&&!c.completed),l=r.filter(c=>c.category==="weekly"&&!c.completed);return g(Wt,{children:[u("aside",{className:"sidebar custom-scrollbar","aria-hidden":!t,style:{left:"auto",right:0,transform:t?"translateX(0)":"translateX(110%)"},children:g("div",{className:"sidebar-inner panel",children:[g("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[u("h4",{style:{margin:0,flex:1,fontSize:"1.3rem"},children:"\u{1F3C6} Quests"}),u("button",{onClick:e,className:"btn ghost","aria-label":"Close menu",children:"\u2715"})]}),g("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,marginBottom:16,padding:12,background:"rgba(0, 0, 0, 0.1)",borderRadius:8},children:[g("div",{style:{textAlign:"center"},children:[g("div",{style:{fontSize:"1.3rem",fontWeight:"bold",color:"var(--accent)"},children:[s,"/",r.length]}),u("div",{style:{fontSize:"0.75rem",color:"var(--muted)"},children:"Completed"})]}),g("div",{style:{textAlign:"center"},children:[u("div",{style:{fontSize:"1.3rem",fontWeight:"bold",color:"#06b6d4"},children:r.filter(c=>c.completed).reduce((c,d)=>c+d.reward.gems,0)}),u("div",{style:{fontSize:"0.75rem",color:"var(--muted)"},children:"Gems Earned"})]})]}),o.length>0&&g("div",{style:{marginBottom:16},children:[u("h5",{style:{margin:"0 0 8px 0",fontSize:"0.9rem",color:"var(--muted)"},children:"\u2600\uFE0F DAILY"}),u("div",{style:{display:"flex",flexDirection:"column",gap:8},children:o.slice(0,3).map(c=>g("div",{style:{padding:10,background:"rgba(99, 102, 241, 0.1)",border:"1px solid var(--border)",borderRadius:6},children:[g("div",{style:{display:"flex",gap:8,alignItems:"start",marginBottom:6},children:[u("span",{style:{fontSize:"1.2rem"},children:c.icon}),g("div",{style:{flex:1,minWidth:0},children:[u("div",{style:{fontSize:"0.8rem",fontWeight:"bold"},children:c.title}),u("div",{style:{fontSize:"0.7rem",color:"var(--muted)"},children:c.description})]})]}),g("div",{style:{fontSize:"0.7rem",color:"var(--muted)"},children:[c.progress," / ",c.target]}),u("div",{style:{width:"100%",height:4,background:"rgba(255, 255, 255, 0.1)",borderRadius:2,marginTop:4,overflow:"hidden"},children:u("div",{style:{height:"100%",width:`${Math.min(100,c.progress/c.target*100)}%`,background:"var(--accent)"}})})]},c.id))})]}),l.length>0&&g("div",{style:{marginBottom:16},children:[u("h5",{style:{margin:"0 0 8px 0",fontSize:"0.9rem",color:"var(--muted)"},children:"\u{1F4C5} WEEKLY"}),u("div",{style:{display:"flex",flexDirection:"column",gap:8},children:l.slice(0,3).map(c=>g("div",{style:{padding:10,background:"rgba(99, 102, 241, 0.1)",border:"1px solid var(--border)",borderRadius:6},children:[g("div",{style:{display:"flex",gap:8,alignItems:"start",marginBottom:6},children:[u("span",{style:{fontSize:"1.2rem"},children:c.icon}),g("div",{style:{flex:1,minWidth:0},children:[u("div",{style:{fontSize:"0.8rem",fontWeight:"bold"},children:c.title}),u("div",{style:{fontSize:"0.7rem",color:"var(--muted)"},children:c.description})]})]}),g("div",{style:{fontSize:"0.7rem",color:"var(--muted)"},children:[c.progress," / ",c.target]}),u("div",{style:{width:"100%",height:4,background:"rgba(255, 255, 255, 0.1)",borderRadius:2,marginTop:4,overflow:"hidden"},children:u("div",{style:{height:"100%",width:`${Math.min(100,c.progress/c.target*100)}%`,background:"var(--accent)"}})})]},c.id))})]}),r.length===0&&u("div",{style:{textAlign:"center",color:"var(--muted)",padding:16},children:"No quests yet. Check back later!"}),u("button",{onClick:()=>{n.push("/quests"),e()},className:"btn",style:{width:"100%",marginTop:16,padding:"0.75rem 1rem",backgroundColor:"var(--primary)",color:"white",border:"none",borderRadius:"0.5rem",cursor:"pointer",fontWeight:"bold",fontSize:"0.9rem"},children:"View All Quests \u2192"})]})}),u("div",{className:"sidebar-backdrop",style:{opacity:t?1:0,pointerEvents:t?"auto":"none"},onClick:e})]})},nO=()=>{const[t,e]=L.exports.useState(pt()),[n,r]=L.exports.useState(!1);L.exports.useState(De()),L.exports.useEffect(()=>{const o=()=>{e(pt())};return window.addEventListener("currencyUpdated",o),()=>window.removeEventListener("currencyUpdated",o)},[]);const i=[{amount:50,price:4.99,label:"50 \u{1F48E}"},{amount:200,price:14.99,label:"200 \u{1F48E}"},{amount:500,price:29.99,label:"500 \u{1F48E}"},{amount:1200,price:59.99,label:"1200 \u{1F48E}"}],s=o=>{const l=pt()+o;bt(l),e(l),alert(`\u2728 Added ${o} gems!`),r(!1),window.dispatchEvent(new Event("currencyUpdated"))};return g(Wt,{children:[g("div",{onClick:()=>r(!0),style:{display:"flex",alignItems:"center",gap:8,padding:"8px 12px",borderRadius:6,background:"linear-gradient(135deg, rgba(236, 72, 153, 0.1) 0%, rgba(168, 85, 247, 0.1) 100%)",border:"1px solid rgba(236, 72, 153, 0.3)",fontSize:"0.95rem",fontWeight:600,color:"var(--text)",marginLeft:1700,marginRight:100,cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:o=>{o.currentTarget.style.background="linear-gradient(135deg, rgba(236, 72, 153, 0.2) 0%, rgba(168, 85, 247, 0.2) 100%)",o.currentTarget.style.borderColor="rgba(236, 72, 153, 0.6)"},onMouseLeave:o=>{o.currentTarget.style.background="linear-gradient(135deg, rgba(236, 72, 153, 0.1) 0%, rgba(168, 85, 247, 0.1) 100%)",o.currentTarget.style.borderColor="rgba(236, 72, 153, 0.3)"},children:[u("span",{style:{fontSize:"1.2rem"},children:"\u{1F48E}"}),u("span",{children:t})]}),n&&u("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:()=>r(!1),children:g("div",{className:"panel",onClick:o=>o.stopPropagation(),style:{padding:24,borderRadius:12,maxWidth:400,backgroundColor:"var(--panel)",boxShadow:"0 10px 40px rgba(0, 0, 0, 0.3)"},children:[u("h2",{style:{marginTop:0,marginBottom:20,color:"var(--text)"},children:"\u{1F48E} Buy Gems"}),u("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12,marginBottom:20},children:i.map(o=>g("button",{onClick:()=>s(o.amount),className:"btn primary",style:{padding:16,textAlign:"center",display:"flex",flexDirection:"column",gap:6},children:[u("div",{style:{fontSize:"1.2rem",fontWeight:"bold"},children:o.label}),g("div",{style:{fontSize:"0.85rem",opacity:.9},children:["$",o.price]})]},o.amount))}),u("button",{onClick:()=>r(!1),className:"btn ghost",style:{width:"100%",padding:12},children:"Close"})]})})]})},Tn="adhd_quests",rO=()=>{const[t,e]=L.exports.useState(!1),[n,r]=L.exports.useState(!1),[i,s]=L.exports.useState(""),[o,l]=L.exports.useState(""),[c,d]=L.exports.useState(gT()),[f,v]=L.exports.useState(_T()),[m,T]=L.exports.useState(Cn());L.exports.useState(()=>Di()),L.exports.useState(()=>Ds());const P="adhd_bronze_crate_last_opened";L.exports.useEffect(()=>{const y=()=>{r(!0),s(""),l("")};return window.addEventListener("devMenuKeyCombo",y),()=>window.removeEventListener("devMenuKeyCombo",y)},[]);const R=()=>{i==="adhd123"?(e(!0),r(!1),s(""),l("")):(l("Incorrect password"),s(""))};return!n&&!t?null:n?u("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:99998},children:g("div",{className:"panel",style:{maxWidth:400,padding:24,backgroundColor:"var(--panel)",boxShadow:"0 8px 32px rgba(0,0,0,0.3)"},children:[u("h2",{style:{margin:"0 0 16px 0",textAlign:"center"},children:"Developer Menu"}),u("p",{style:{textAlign:"center",color:"var(--muted)",marginBottom:16},children:"Enter password to continue"}),u("input",{type:"password",className:"input",placeholder:"Password",value:i,onChange:y=>s(y.target.value),onKeyDown:y=>y.key==="Enter"&&R(),autoFocus:!0,style:{marginBottom:12}}),o&&u("div",{style:{color:"#ef4444",marginBottom:12,fontSize:"0.9rem",textAlign:"center"},children:o}),g("div",{style:{display:"flex",gap:8},children:[u("button",{className:"btn primary",onClick:R,style:{flex:1},children:"Unlock"}),u("button",{className:"btn ghost",onClick:()=>{r(!1),s(""),l("")},style:{flex:1},children:"Cancel"})]})]})}):t?u("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:99999},children:g("div",{className:"panel",style:{maxWidth:500,maxHeight:"80vh",padding:20,backgroundColor:"var(--panel)",boxShadow:"0 8px 32px rgba(0,0,0,0.3)",userSelect:"none",overflow:"auto"},children:[u("h2",{style:{margin:"0 0 12px 0",textAlign:"center"},children:"Development Menu"}),u("div",{style:{marginBottom:16,fontSize:"0.9rem",color:"var(--muted)"},children:g("div",{children:["Current XP: ",De()]})}),g("div",{style:{display:"flex",flexDirection:"column",gap:12},children:[g("div",{style:{borderBottom:"1px solid var(--border)",paddingBottom:12},children:[u("h3",{style:{margin:"0 0 8px 0"},children:"XP Controls"}),g("div",{style:{display:"flex",gap:8},children:[u("input",{type:"number",className:"input",placeholder:"XP amount",id:"devXpInput",style:{flex:1}}),u("button",{className:"btn",onClick:()=>{const y=document.getElementById("devXpInput"),E=parseInt(y.value)||0;gn(De()+E),y.value=""},children:"Grant"})]}),u("button",{className:"btn ghost",onClick:()=>Qa(),style:{marginTop:8,width:"100%"},children:"Reset XP"})]}),g("div",{style:{borderBottom:"1px solid var(--border)",paddingBottom:12},children:[u("h3",{style:{margin:"0 0 8px 0"},children:"Gem Controls"}),g("div",{style:{marginBottom:8},children:[g("div",{style:{fontSize:"0.9rem",marginBottom:8},children:["Current Gems: ",u("strong",{children:pt()})]}),g("div",{style:{display:"flex",gap:8},children:[u("input",{type:"number",className:"input",placeholder:"Gem amount",id:"devGemInput",style:{flex:1}}),u("button",{className:"btn",onClick:()=>{const y=document.getElementById("devGemInput"),E=parseInt(y.value);!isNaN(E)&&E>0&&(Xl(E),y.value="",window.dispatchEvent(new Event("currencyUpdated")))},children:"Add"})]})]}),g("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[u("button",{className:"btn ghost",onClick:()=>{bt(0),window.dispatchEvent(new Event("currencyUpdated"))},children:"Set to 0"}),u("button",{className:"btn ghost",onClick:()=>{bt(1e3),window.dispatchEvent(new Event("currencyUpdated"))},children:"Set to 1000"})]})]}),g("div",{style:{borderBottom:"1px solid var(--border)",paddingBottom:12},children:[u("h3",{style:{margin:"0 0 8px 0"},children:"Skill Tree Controls"}),u("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,maxHeight:200,overflowY:"auto"},children:Yd().map(y=>g("button",{className:"btn ghost",onClick:()=>IT(y.id),style:{fontSize:"0.75rem",opacity:Yu().includes(y.id)?1:.5},children:[Yu().includes(y.id)?"\u2713":"\u2717"," ",y.name]},y.id))})]}),g("div",{style:{borderBottom:"1px solid var(--border)",paddingBottom:12},children:[u("h3",{style:{margin:"0 0 8px 0"},children:"Pet Controls"}),g("div",{style:{marginBottom:12},children:[u("h4",{style:{margin:"0 0 8px 0",fontSize:"0.8rem",color:"var(--muted)"},children:"Delete Pet"}),u("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(80px, 1fr))",gap:6},children:Vt().map(y=>g("button",{className:"btn ghost",onClick:()=>{window.confirm(`Delete ${y.name}?`)&&(Sp(y.id),alert(`${y.name} deleted!`))},style:{fontSize:"0.7rem",padding:"4px 8px"},children:["Delete ",y.name]},y.id))})]})]}),g("div",{style:{borderBottom:"1px solid var(--border)",paddingBottom:12},children:[u("h3",{style:{margin:"0 0 8px 0"},children:"Title Controls"}),g("div",{style:{marginBottom:12},children:[u("button",{className:"btn ghost",onClick:()=>{bT("developer"),alert("Developer title unlocked!")},style:{fontSize:"0.8rem",width:"100%",marginBottom:8},children:"Unlock Developer Title"}),u("button",{className:"btn ghost",onClick:()=>{nu("developer"),alert("Developer title equipped!")},style:{fontSize:"0.8rem",width:"100%"},children:"Equip Developer Title"})]})]}),g("div",{style:{borderBottom:"1px solid var(--border)",paddingBottom:12},children:[u("h3",{style:{margin:"0 0 8px 0"},children:"Crate Timer Controls"}),g("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[u("button",{className:"btn ghost",onClick:()=>{localStorage.setItem(P,"0"),alert("Bronze crate timer reset!")},style:{fontSize:"0.8rem"},children:"Reset Bronze Timer"}),u("button",{className:"btn ghost",onClick:()=>{localStorage.setItem(P,String(Date.now()-12*60*60*1e3)),alert("Bronze crate ready!")},style:{fontSize:"0.8rem"},children:"Bronze Ready Now"})]})]}),g("div",{style:{borderBottom:"1px solid var(--border)",paddingBottom:12},children:[u("h3",{style:{margin:"0 0 8px 0"},children:"Critical Hit Testing"}),g("div",{style:{marginBottom:12,fontSize:"0.85rem",color:"var(--muted)"},children:[g("div",{children:["2x XP Chance: ",g("strong",{children:[m.criticalHitChance,"%"]})]}),g("div",{children:["Crate Chance: ",g("strong",{children:[m.crateRewardChance,"%"]})]})]}),g("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,marginBottom:8},children:[g("button",{className:`btn ${c?"primary":"ghost"}`,onClick:()=>{pT(),d(!0),T(Cn()),alert("Critical test mode enabled (100% chance)!")},style:{fontSize:"0.8rem"},children:[c?"\u2713 ":"","Max Critical (100%)"]}),u("button",{className:"btn ghost",onClick:()=>{mT(),d(!1),T(Cn()),alert("Critical test mode disabled (normal chances)!")},style:{fontSize:"0.8rem"},children:"Reset Critical"})]}),g("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,marginBottom:8},children:[g("button",{className:`btn ${f?"primary":"ghost"}`,onClick:()=>{yT(),v(!0),T(Cn()),alert("Crate test mode enabled (100% chance)!")},style:{fontSize:"0.8rem"},children:[f?"\u2713 ":"","Max Crate (100%)"]}),u("button",{className:"btn ghost",onClick:()=>{vT(),v(!1),T(Cn()),alert("Crate test mode disabled (normal chances)!")},style:{fontSize:"0.8rem"},children:"Reset Crate"})]}),u("button",{className:"btn ghost",onClick:()=>{tr(10),alert("Granted 10 XP - check for critical!")},style:{fontSize:"0.8rem",width:"100%"},children:"Test Grant 10 XP"})]}),g("div",{style:{borderBottom:"1px solid var(--border)",paddingBottom:12},children:[u("h3",{style:{margin:"0 0 8px 0"},children:"Purchases"}),g("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[u("button",{className:"btn ghost",onClick:()=>{const y=new Set(JSON.parse(localStorage.getItem("adhd_purchases")||"[]"));y.has(1)?y.delete(1):y.add(1),localStorage.setItem("adhd_purchases",JSON.stringify(Array.from(y))),window.dispatchEvent(new Event("purchasesUpdated"))},style:{fontSize:"0.8rem",opacity:(()=>new Set(JSON.parse(localStorage.getItem("adhd_purchases")||"[]")).has(1)?1:.5)()},children:"\u2713 Sunset Theme"}),u("button",{className:"btn ghost",onClick:()=>{const y=new Set(JSON.parse(localStorage.getItem("adhd_purchases")||"[]"));y.has(2)?y.delete(2):y.add(2),localStorage.setItem("adhd_purchases",JSON.stringify(Array.from(y))),window.dispatchEvent(new Event("purchasesUpdated"))},style:{fontSize:"0.8rem",opacity:(()=>new Set(JSON.parse(localStorage.getItem("adhd_purchases")||"[]")).has(2)?1:.5)()},children:"\u2713 Ocean Theme"}),u("button",{className:"btn ghost",onClick:()=>{const y=new Set(JSON.parse(localStorage.getItem("adhd_purchases")||"[]"));y.has(3)?y.delete(3):y.add(3),localStorage.setItem("adhd_purchases",JSON.stringify(Array.from(y))),window.dispatchEvent(new Event("purchasesUpdated"))},style:{fontSize:"0.8rem",opacity:(()=>new Set(JSON.parse(localStorage.getItem("adhd_purchases")||"[]")).has(3)?1:.5)()},children:"\u2713 Avatar Border"}),u("button",{className:"btn ghost",onClick:()=>{const y=new Set(JSON.parse(localStorage.getItem("adhd_purchases")||"[]"));y.has(4)?y.delete(4):y.add(4),localStorage.setItem("adhd_purchases",JSON.stringify(Array.from(y))),window.dispatchEvent(new Event("purchasesUpdated"))},style:{fontSize:"0.8rem",opacity:(()=>new Set(JSON.parse(localStorage.getItem("adhd_purchases")||"[]")).has(4)?1:.5)()},children:"\u2713 Extra Slots"}),u("button",{className:"btn ghost",onClick:()=>{const y=new Set(JSON.parse(localStorage.getItem("adhd_purchases")||"[]"));y.has(5)?y.delete(5):y.add(5),localStorage.setItem("adhd_purchases",JSON.stringify(Array.from(y))),window.dispatchEvent(new Event("purchasesUpdated"))},style:{fontSize:"0.8rem",opacity:(()=>new Set(JSON.parse(localStorage.getItem("adhd_purchases")||"[]")).has(5)?1:.5)()},children:"\u2713 Custom Avatar"})]})]}),g("div",{style:{borderBottom:"1px solid var(--border)",paddingBottom:12},children:[u("h3",{style:{margin:"0 0 8px 0"},children:"Social Testing"}),u("button",{className:"btn ghost",onClick:()=>{const y=JSON.parse(localStorage.getItem("adhd_friends")||"[]"),E={id:"bot-9999",username:"TestBot",discriminator:"9999",avatar:"\u{1F916}"};y.find(x=>x.id===E.id)?alert("Test friend already exists!"):(y.push(E),localStorage.setItem("adhd_friends",JSON.stringify(y)),window.dispatchEvent(new Event("friendsUpdated")),alert("Test friend added!"))},style:{width:"100%",fontSize:"0.8rem"},children:"Add Test Friend (TestBot#9999)"})]}),g("div",{style:{borderBottom:"1px solid var(--border)",paddingBottom:12},children:[u("h3",{style:{margin:"0 0 8px 0"},children:"Pet Controls"}),g("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,marginBottom:12},children:[u("button",{className:"btn ghost",onClick:()=>{const y=Et();if(y){y.hunger=0;const E=Ya("gems");E&&(window.dispatchEvent(new CustomEvent("petUpdated",{detail:{pet:E}})),alert("Pet fed!"))}},style:{fontSize:"0.8rem"},children:"Feed Pet"}),u("button",{className:"btn ghost",onClick:()=>{const y=Et();if(y){y.happiness=100;const E=nr();E&&(window.dispatchEvent(new CustomEvent("petUpdated",{detail:{pet:E}})),alert("Happiness maxed!"))}},style:{fontSize:"0.8rem"},children:"Max Happiness"}),u("button",{className:"btn ghost",onClick:()=>{const y=Et();if(y){y.health=100;const E=nr();E&&(window.dispatchEvent(new CustomEvent("petUpdated",{detail:{pet:E}})),alert("Health maxed!"))}},style:{fontSize:"0.8rem"},children:"Max Health"}),u("button",{className:"btn ghost",onClick:()=>{const y=Et();if(y){y.level=Math.min(y.level+1,10);const E=nr();E&&(window.dispatchEvent(new CustomEvent("petUpdated",{detail:{pet:E}})),alert("Level increased!"))}},style:{fontSize:"0.8rem"},children:"+1 Level"})]}),u("button",{className:"btn ghost",onClick:()=>{const y=Et();y&&(Sp(y.id),alert("Pet deleted!"))},style:{fontSize:"0.8rem",width:"100%"},children:"Delete Current Pet"})]}),g("div",{style:{borderBottom:"1px solid var(--border)",paddingBottom:12},children:[u("h3",{style:{margin:"0 0 8px 0"},children:"Quest Controls"}),g("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[u("button",{className:"btn ghost",onClick:()=>{const y=JSON.parse(localStorage.getItem(Tn)||"[]");y.forEach(E=>E.completed=!1),localStorage.setItem(Tn,JSON.stringify(y)),window.dispatchEvent(new CustomEvent("questsReset")),alert("All quests reset!")},style:{fontSize:"0.8rem"},children:"Reset All Quests"}),u("button",{className:"btn ghost",onClick:()=>{const y=JSON.parse(localStorage.getItem(Tn)||"[]");y.forEach(E=>E.completed=!0),localStorage.setItem(Tn,JSON.stringify(y)),window.dispatchEvent(new CustomEvent("questsReset")),alert("All quests completed!")},style:{fontSize:"0.8rem"},children:"Complete All Quests"}),u("button",{className:"btn ghost",onClick:()=>{const y=JSON.parse(localStorage.getItem(Tn)||"[]"),E=y.find(x=>x.id===1);E&&(E.progress=5),localStorage.setItem(Tn,JSON.stringify(y)),window.dispatchEvent(new CustomEvent("questsReset")),alert("Task Master quest progressed!")},style:{fontSize:"0.8rem"},children:"+5 Tasks (Q1)"}),u("button",{className:"btn ghost",onClick:()=>{const y=JSON.parse(localStorage.getItem(Tn)||"[]"),E=y.find(x=>x.id===4);E&&(E.progress=7),localStorage.setItem(Tn,JSON.stringify(y)),window.dispatchEvent(new CustomEvent("questsReset")),alert("Streak Keeper quest progressed!")},style:{fontSize:"0.8rem"},children:"+7 Streak (Q4)"}),u("button",{className:"btn ghost",onClick:()=>{const y=JSON.parse(localStorage.getItem(Tn)||"[]"),E=y.find(x=>x.id===5);E&&(E.progress=5),localStorage.setItem(Tn,JSON.stringify(y)),window.dispatchEvent(new CustomEvent("questsReset")),alert("Level Up quest progressed!")},style:{fontSize:"0.8rem"},children:"+Level 5 (Q5)"})]})]}),u("button",{className:"btn",onClick:()=>e(!1),style:{width:"100%"},children:"Close"})]})]})}):null},iO=()=>{const[t,e]=L.exports.useState(!1),[n,r]=L.exports.useState(!1),[i,s]=L.exports.useState(!1),o=we.useRef([]);return L.exports.useEffect(()=>{const l=c=>{c.ctrlKey&&c.altKey?c.key==="d"||c.key==="D"?o.current=["d"]:(c.key==="f"||c.key==="F")&&o.current.length===1&&o.current[0]==="d"&&(c.preventDefault(),window.dispatchEvent(new CustomEvent("devMenuKeyCombo")),o.current=[]):o.current=[]};return window.addEventListener("keydown",l),()=>window.removeEventListener("keydown",l)},[]),u(Lb,{children:g("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[g("div",{className:"topbar",style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingRight:120,paddingLeft:16},children:[u("div",{style:{width:40,height:40},children:!t&&g("button",{className:"hamburger",onClick:()=>e(!0),"aria-label":"Open menu",children:[u("span",{className:"hamburger-line"}),u("span",{className:"hamburger-line"}),u("span",{className:"hamburger-line"})]})}),u(nO,{})]}),u(KD,{open:t,onClose:()=>e(!1)}),u(tO,{open:i,onClose:()=>s(!1)}),u(eO,{open:n,onClose:()=>r(!1)}),u("div",{style:{flex:1,marginBottom:"120px"},children:g(Db,{children:[u(hn,{path:"/",exact:!0,component:CD}),u(hn,{path:"/day",component:bD}),u(hn,{path:"/week",component:xD}),u(hn,{path:"/month",component:AD}),u(hn,{path:"/store",component:OD}),u(hn,{path:"/leaderboards",component:VD}),u(hn,{path:"/quests",component:BD}),u(hn,{path:"/insights",component:zD}),u(hn,{path:"/pet",component:jD}),u(hn,{path:"/skills",component:$D}),u(hn,{path:"/settings",component:DD})]})}),u(GD,{}),!i&&!n&&u("button",{onClick:()=>s(!0),className:"btn",style:{position:"fixed",bottom:180,right:24,width:56,height:56,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.5rem",border:"none",cursor:"pointer",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",zIndex:100},"aria-label":"Open quests menu",title:"Quests",children:"\u{1F3C6}"}),!n&&!i&&u("button",{onClick:()=>r(!0),className:"btn",style:{position:"fixed",bottom:100,right:24,width:56,height:56,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.5rem",border:"none",cursor:"pointer",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",zIndex:100},"aria-label":"Open social menu",title:"Social Menu",children:"\u{1F465}"}),u(rO,{})]})})};BC.render(u(we.StrictMode,{children:u(PD,{children:u(iO,{})})}),document.getElementById("root"));
